<!DOCTYPE html>
<html lang="en">

    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Using Prolog</title>
  <meta name="description" content="Personal website">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://edom.github.io/prolog.html">
  <link rel="alternate" type="application/rss+xml" title="Erik Dominikus&#39;s wiki" href="/feed.xml">

  

    <script>
// Help the reader estimate how much time the reading is going to take.
// Show word count and reading time estimation in TOC entry.
//
// TOC = table of contents
//
// Known issue: This janks: this DOM manipulation is done after the page is rendered.
// If we don't want jank, we have to manipulate the HTML source before it reaches the browser.
// We assume that the user doesn't refresh the page while reading.
// The benefit of fixing that jank is not enough for me to justify trying to fix it.
document.addEventListener("DOMContentLoaded", function () {
    function count_word (string) {
        return string.trim().split(/\s+/).length;
    }
    function show_quantity (count, singular) {
        let plural = singular + "s"; // For this script only.
        return count + " " + ((count == 1) ? singular : plural);
    }
    function create_length_indicator (word, minute) {
        let e = document.createElement("span");
        e.className = "toc_entry__length_indicator";
        e.textContent = " (" + show_quantity(word, "word") + " ~ " + show_quantity(minute, "minute") + ")";
        return e;
    }
    // We assume that readers read this many words per minute with 100% comprehension.
    // This assumption may not hold for dense texts such as philosophy and mathematics.
    const wpm_assumption = 200;
    // We assume a certain Jekyll template.
    let page = document.querySelector("main.page-content");
    if (page === null) {
        console.log("toc_generate_estimate: Impossible: CSS selector \"main.page-content\" does not match anything");
        return;
    }
    let page_title = document.querySelector("header.post-header h1.post-title");
    if (page_title === null) {
        console.log("toc_generate_estimate: Impossible: CSS selector \"header.post-header h1.post-title\" does not match anything");
        return;
    }
    let page_word = count_word(page.textContent);
    let page_minute = Math.ceil(page_word / wpm_assumption);
    page_title.insertAdjacentElement("afterend", create_length_indicator(page_word, page_minute));
    // We violate the HTML specification.
    // The page may have several elements with the same ID.
    // We assume that Org HTML Export generates a DIV element with ID "table-of-contents".
    // We assume that Jekyll Markdown-to-HTML generates a UL element with ID "markdown-toc".
    // This only works for Org HTML Export's TOC.
    let toc_entries = document.querySelectorAll("#table-of-contents a, #text-table-of-contents a");
    toc_entries.forEach((toc_entry_a) => {
        let href = toc_entry_a.getAttribute("href"); // We assume that this is a string like "#org0123456".
        if (href.charAt(0) !== '#') {
            console.log("toc_generate_estimate: Impossible: " + href + " does not begin with hash sign");
            return;
        }
        // We can't just document.querySelector(href) because target_id may contain invalid ID characters such as periods.
        let target_id = href.substring(1);
        let id_escaped = target_id.replace("\"", "\\\"");
        let h_elem = document.querySelector("[id=\"" + id_escaped + "\"]"); // We assume that this is the h1/h2/h3 element referred by the TOC entry.
        if (h_elem === null) { // We assume that this is impossible.
            console.log("toc_generate_estimate: Impossible: " + href + " does not refer to anything");
            return;
        }
        let section = h_elem.parentNode;
        let section_word = count_word(section.textContent);
        let section_minute = Math.ceil(section_word / wpm_assumption);
        toc_entry_a.insertAdjacentElement("afterend", create_length_indicator(section_word, section_minute));
    });
});
    </script>

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12628443-6', 'auto');
  ga('send', 'pageview');

</script>
  

  

  
</head>


  <body>

    <header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">Erik Dominikus&#39;s wiki</a>
  </div>
</header>


    

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Using Prolog</h1>
  </header>

  <div class="post-content">
    <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgecb35de">1. Before you go full Prolog</a></li>
<li><a href="#org44a9a25">2. Establishing a workflow</a></li>
<li><a href="#org33d40af">3. Error handling and logging</a></li>
<li><a href="#org867c8f2">4. Modeling things in Prolog</a></li>
<li><a href="#orga732c17">5. Writing extensible knowledge bases</a></li>
<li><a href="#org2537bad">6. Where things get ugly</a></li>
<li><a href="#orgdb8d5a8">7. Writing enterprise web applications?</a></li>
<li><a href="#org4793bde">8. Parsing</a></li>
<li><a href="#org9448c8f">9. Theories</a></li>
<li><a href="#org1338566">10. <span class="todo TODO">TODO</span> Half-baked things to shuffle around</a></li>
<li><a href="#orgd82689a">11. <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-05&gt; </span></span> How to present Prolog to newcomers</a></li>
<li><a href="#orgc47dbd3">12. Prolog community</a></li>
<li><a href="#org75682ec">13. <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-10&gt; </span></span> Smart editors are dangerous! Arbitrary code execution!</a></li>
<li><a href="#orgddba27b">14. Ramble</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgecb35de" class="outline-2">
<h2 id="orgecb35de"><span class="section-number-2">1</span> Before you go full Prolog</h2>
<div class="outline-text-2" id="text-1">
<div id="text-table-of-contents">
<ul>
<li><a href="#org389588e">1.1. <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-30&gt; </span></span> This is a book in progress! I don't know whether I will ever finish this.</a></li>
<li><a href="#org84d213a">1.2. Who might you be? How might this book serve you?</a></li>
<li><a href="#orge0528f6">1.3. Let me warn you about the woes and blockers.</a>
<ul>
<li><a href="#org95348b3">1.3.1. <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-22&gt; </span></span> Prolog weakness: binary array and low-level input-output</a></li>
</ul>
</li>
<li><a href="#org5f3d733">1.4. Let me hype you up.</a></li>
<li><a href="#org3b2124a">1.5. Not sure yet? Try Prolog with minimal investment.</a></li>
<li><a href="#org8d5259e">1.6. Comparing Prolog implementations?</a></li>
</ul>
</div>
</div>
<div id="outline-container-org389588e" class="outline-3">
<h3 id="org389588e"><span class="section-number-3">1.1</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-30&gt; </span></span> This is a book in progress! I don't know whether I will ever finish this.</h3>
</div>
<div id="outline-container-org84d213a" class="outline-3">
<h3 id="org84d213a"><span class="section-number-3">1.2</span> Who might you be? How might this book serve you?</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>a programmer used to C, C++, Java, PHP, Ruby, Python</li>
<li>a programmer used to Lisp, Scheme, Haskell</li>
<li>a Prolog believer</li>
<li>a Prolog evangelist</li>
<li>someone who used to write Prolog codes</li>
<li>a dreamer who thinks machines should do more</li>
<li>a researcher, theoretician, computer scientist, mathematician, logician, philosopher?</li>
<li>(Who else might you be, why the hell are you here, and how should I write for you?)</li>
</ul>
</div>
</div>
<div id="outline-container-orge0528f6" class="outline-3">
<h3 id="orge0528f6"><span class="section-number-3">1.3</span> Let me warn you about the woes and blockers.</h3>
<div class="outline-text-3" id="text-1-3">
<p>
I'm selling you Prolog here, but let me be honest:
Don't buy it if any of these year-2018 deal-breakers are an issue for you.
Prolog isn't ready for these use cases in 2018; I hope these will change.
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-09&gt;</span></span>
Somewhat fatal:
ISO Prolog open/4 has no way to open a file for writing without truncating it.
How the hell did they overlook such a common use case in a standard?
But some implementations have extensions to work around that.
</p>

<p>
Comparison of some open/4 implementations:
</p>
<ul class="org-ul">
<li>Prolog implementations that can open a file for both reading and writing:
<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-09&gt; </span></span> Amzi! Prolog open/4 has "readwrite" mode <a href="https://www.amzi.com/manuals/amzi/pro/ref_io.htm">https://www.amzi.com/manuals/amzi/pro/ref_io.htm</a></li>
</ul></li>
<li>Prolog implementations that can open a file for writing without truncating it:
<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-09&gt; </span></span> SWI-Prolog open/4 has "update" mode <a href="http://www.swi-prolog.org/pldoc/doc_for?object=open/4">http://www.swi-prolog.org/pldoc/doc_for?object=open/4</a></li>
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-09&gt; </span></span> ECLiPSe Prolog open/4 has "update" mode <a href="http://eclipseclp.org/doc/bips/kernel/iostream/open-4.html">http://eclipseclp.org/doc/bips/kernel/iostream/open-4.html</a></li>
</ul></li>
<li>Prolog implementations that <i>cannot</i> open a file for writing without truncating it:
<ul class="org-ul">
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-09&gt; </span></span> GNU Prolog <a href="http://www.gprolog.org/manual/html_node/gprolog034.html#open/4">http://www.gprolog.org/manual/html_node/gprolog034.html#open/4</a></li>
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-09&gt; </span></span> SICStus Prolog <a href="https://sicstus.sics.se/sicstus/docs/4.2.1/html/sicstus/mpg_002dref_002dopen.html">https://sicstus.sics.se/sicstus/docs/4.2.1/html/sicstus/mpg_002dref_002dopen.html</a></li>
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-09&gt; </span></span> Ciao Prolog <a href="https://ciao-lang.org/docs/1.14/13646/CiaoDE-1.14.2-13646_ciao.html/streams_basic.html#open/4">https://ciao-lang.org/docs/1.14/13646/CiaoDE-1.14.2-13646_ciao.html/streams_basic.html#open/4</a></li>
</ul></li>
</ul>

<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-30&gt;</span></span>
No arrays.
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-30&gt;</span></span>
SWI-Prolog is honest:
"The main weakness of Prolog are algorithms that require destructive assignment,
intensive array processing or bare-metal performance for e.g., processing pixels."
<a href="http://www.swi-prolog.org/FAQ/PrologLAMP.txt">http://www.swi-prolog.org/FAQ/PrologLAMP.txt</a>
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2018-10-24&gt;</span></span>
There is no standard date/time/calendar library?
There may be one?
I'm still looking.
library(julian)?
</p>
<ul class="org-ul">
<li>Java 8 has "java.util.time"; previous Java versions can use "Joda Time".</li>
<li>Haskell has the "time" package ("Data.Time" module).</li>
</ul>
</div>
<div id="outline-container-org95348b3" class="outline-4">
<h4 id="org95348b3"><span class="section-number-4">1.3.1</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-22&gt; </span></span> Prolog weakness: binary array and low-level input-output</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
Prolog doesn't have arrays.
</p>

<p>
Workaround: we can fake an array:
Allocate with functor(T,F,N), read with arg(N,T,A), and write with nb_setarg(N,T,A).
</p>

<p>
Prolog doesn't have unsigned integers.
</p>

<p>
How fast is this?
</p>

<p>
This requires that the implementation doesn't limit functor arguments.
</p>
</div>
</div>
</div>
<div id="outline-container-org5f3d733" class="outline-3">
<h3 id="org5f3d733"><span class="section-number-3">1.4</span> Let me hype you up.</h3>
<div class="outline-text-3" id="text-1-4">
<p>
(You can skip this.)
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-30&gt;</span></span>
Don't take this too seriously.
I'm on a honeymoon with Prolog.
</p>

<p>
Prolog is a <i>mind augmentation language</i>.
Prolog is a mental prosthesis.
With prosthetic arms, I can beat you in arm wrestling.
With prosthetic legs, I can beat you in running.
With prosthetic minds, I can beat you in thinking.
If logic is the language of thought, then Prolog is the closest thing we have to mind dump.
Offload your reasoning to computers.
As Leibniz said, "Let us calculate!"
</p>

<p>
You love Lisp macros?
Prolog has term_expansion/2, goal_expansion/2, op/2, and the infix operators that you have been dreaming of!
</p>

<p>
You love Haskell type system?
In Prolog you can write your own type systems!
</p>

<p>
You love C++ operator overloading?
In Prolog you can define your own operators with their precedences and associativities!
</p>

<p>
You want to beat/outdo/one-up your coworkers?
Prolog is perfect for that!
Unless you're low-level-programming,
Prolog is the secret weapon that multiplies your productivity by 20 compared to a low-level programming language such as C, C++, Java.
When you build your home, you don't build your own bricks.
</p>

<p>
Your coworkers are beating you with Prolog?
Well, what the hell are you waiting for?
Learn Prolog now, or lose your job and die in oblivion!
</p>

<p>
"Prolog is a convenient language in which to express the semantics of other languages."
<a href="https://www3.hhu.de/stups/prob/index.php/Why_Prolog?">https://www3.hhu.de/stups/prob/index.php/Why_Prolog?</a>
</p>
</div>
</div>
<div id="outline-container-org3b2124a" class="outline-3">
<h3 id="org3b2124a"><span class="section-number-3">1.5</span> Not sure yet? Try Prolog with minimal investment.</h3>
<div class="outline-text-3" id="text-1-5">
<p>
If you're not sure yet, I suggest that you
read <a href="https://www.metalevel.at/prolog">Markus Triska's book "The power of Prolog"</a>
while doodling some code on <a href="http://pengines.swi-prolog.org/apps/swish/index.html">SWISH online Prolog interpreter</a>.
</p>
</div>
</div>
<div id="outline-container-org8d5259e" class="outline-3">
<h3 id="org8d5259e"><span class="section-number-3">1.6</span> Comparing Prolog implementations?</h3>
<div class="outline-text-3" id="text-1-6">
<p>
I use SWI-Prolog because it's what I use in university, and because of this <a href="http://www.swi-prolog.org/features.html">SWI-Prolog sales pitch</a>.
</p>

<p>
This book assumes that the reader uses SWI-Prolog 7.6.4.
</p>

<p>
There are many Prolog implementations.
Some companies have their own Prolog implementations.
</p>

<p>
GNU Prolog is "a native-code compiler which produces standalone executables which don’t rely on any byte-code emulator or meta-interpreter."
<a href="https://www.semanticscholar.org/paper/On-the-Implementation-of-GNU-Prolog-Diaz-Abreu/2c4f697f96202f988602e88c49625a862a4ce696">https://www.semanticscholar.org/paper/On-the-Implementation-of-GNU-Prolog-Diaz-Abreu/2c4f697f96202f988602e88c49625a862a4ce696</a>
</p>

<p>
See also:
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Comparison_of_Prolog_implementations">https://en.wikipedia.org/wiki/Comparison_of_Prolog_implementations</a></li>
<li>Comparison between SWI Prolog, YAP, GNU Prolog <a href="http://www.david-reitter.com/compling/prolog/compare.html">http://www.david-reitter.com/compling/prolog/compare.html</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org44a9a25" class="outline-2">
<h2 id="org44a9a25"><span class="section-number-2">2</span> Establishing a workflow</h2>
<div class="outline-text-2" id="text-2">
<div id="text-table-of-contents">
<ul>
<li><a href="#org52e23ad">2.1. <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-10-20&gt; </span></span> Installing SWI-Prolog 7.6.4 on Ubuntu 14.04</a></li>
<li><a href="#org74a6cb0">2.2. Enabling readline</a></li>
<li><a href="#orgc1e2904">2.3. Starting the interpreter and the documentation server</a></li>
<li><a href="#org66d25a5">2.4. Thinking and editing</a></li>
<li><a href="#org153fb8e">2.5. Rebuilding</a></li>
<li><a href="#orgb03a2d7">2.6. Trying and manual testing</a></li>
<li><a href="#orgf1274af">2.7. Seeing source codes and finding definitions</a></li>
<li><a href="#org0a405a7">2.8. Troubleshooting: tracing and spying</a></li>
<li><a href="#orgb522a1a">2.9. Committing to a Git repository</a></li>
</ul>
</div>
</div>
<div id="outline-container-org52e23ad" class="outline-3">
<h3 id="org52e23ad"><span class="section-number-3">2.1</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-10-20&gt; </span></span> Installing SWI-Prolog 7.6.4 on Ubuntu 14.04</h3>
<div class="outline-text-3" id="text-2-1">
<p>
If you are using Ubuntu 14.04, follow my instructions below.
If your operating system has packaged SWI-Prolog 7.6.4 or newer, use it.
Otherwise, follow the <a href="http://www.swi-prolog.org/Download.html">official instructions</a> and choose the current stable release.
</p>

<p>
The following guide is for installing SWI-Prolog 7.6.4 on Ubuntu 14.04.
</p>

<p>
Uninstall existing SWI-Prolog installations.
The version packaged with Ubuntu 14.04 is too old (6.6.4).
SWI-Prolog 7 fixes a lot of issues with strings in SWI-Prolog 6.
</p>

<p>
Install dependencies.
I take this from the <a href="http://www.swi-prolog.org/build/Debian.html">Debian build instructions</a> with these changes.
I replace <code>libunwind-dev</code> with <code>libunwind8-dev</code>.
I remove <code>openjdk-8-jdk</code> and <code>junit</code>.
I add <code>libreadline-dev</code>.
</p>
<pre class="example">
sudo apt-get install \
        build-essential autoconf curl chrpath pkg-config \
        ncurses-dev libreadline-dev libedit-dev \
        libunwind8-dev \
        libgmp-dev \
        libssl-dev \
        unixodbc-dev \
        zlib1g-dev libarchive-dev \
        libossp-uuid-dev \
        libxext-dev libice-dev libjpeg-dev libxinerama-dev libxft-dev \
        libxpm-dev libxt-dev \
        libdb-dev \
        libpcre3-dev \
        libyaml-dev \
        libreadline-dev
</pre>

<p>
That doesn't include the documentation dependencies because they are too big.
Just read the documentation online.
</p>

<p>
After apt-get finishes, for security (avoiding sudo cache), close that terminal, and open a new one.
</p>

<p>
Download the <a href="http://www.swi-prolog.org/download/stable">source</a>.
</p>

<p>
Check the checksum using sha256sum.
</p>

<p>
<code>cp -p build.templ build</code>
</p>

<p>
<code>mkdir -p $HOME/.local</code>
</p>

<p>
Edit <code>build</code> script.
Set <code>PREFIX</code> to <code>$HOME/.local</code>.
Uncomment the <code>--link</code> option in <code>EXTRACFG</code> variable.
</p>

<p>
Run <code>./build</code>.
It should take a few minutes (about 5 minutes on my 4-core 8-GB-RAM machine).
</p>

<p>
Ensure that <code>$HOME/.local/bin</code> is in your <code>PATH</code>.
For example, I have this line somewhere near the end of my <code>~/.bashrc</code> file:
</p>
<pre class="example">
export PATH="$PATH:$HOME/.local/bin"
</pre>

<p>
If you edit your bashrc, close your terminal and open a new one.
Entering <code>swipl --version</code> should print this:
</p>
<pre class="example">
SWI-Prolog version 7.6.4 for x86_64-linux
</pre>

<p>
If you don't want to edit your bashrc, you can run swipl by its full path <code>~/.local/bin/swipl</code>.
</p>
</div>
</div>
<div id="outline-container-org74a6cb0" class="outline-3">
<h3 id="org74a6cb0"><span class="section-number-3">2.2</span> Enabling readline</h3>
<div class="outline-text-3" id="text-2-2">
<p>
We want readline for history (Ctrl+R, Ctrl+S) and completion (Tab, Up, Down).
</p>

<p>
To keep the entire codebase under BSD license,
SWI-Prolog doesn't enable the GPL-licensed GNU readline by default.
But you can tell SWI-Prolog to use readline.
Create a FILE containing this:
</p>
<pre class="example">
:- set_prolog_flag(readline, readline).
</pre>

<p>
Add <code>-f FILE</code> switch to the command line you use to start <code>swipl</code>.
</p>

<p>
Related: <a href="https://github.com/SWI-Prolog/issues/issues/72">GitHub issue #72</a>: "how to build with GNU readline on linux".
</p>
</div>
</div>
<div id="outline-container-orgc1e2904" class="outline-3">
<h3 id="orgc1e2904"><span class="section-number-3">2.3</span> Starting the interpreter and the documentation server</h3>
<div class="outline-text-3" id="text-2-3">
<p>
I start SWI-Prolog with this command line:
</p>
<pre class="example">
swipl --pldoc=DocPort -f UserInitFile -l PrologFile
</pre>

<p>
I have enabled readline in my UserInitFile.
</p>

<p>
I use 4002 for DocPort.
I open <a href="http://localhost:4002/pldoc/">http://localhost:4002/pldoc/</a> in my browser.
</p>
</div>
</div>
<div id="outline-container-org66d25a5" class="outline-3">
<h3 id="org66d25a5"><span class="section-number-3">2.4</span> Thinking and editing</h3>
<div class="outline-text-3" id="text-2-4">
<p>
I edit some Prolog source files in Visual Studio Code with vim key bindings
because I often need to duplicate a line when adding a new clause.
</p>

<p>
I add statements or comments.
</p>

<p>
I think a lot about names, representations, and relations.
</p>

<p>
To edit the source of a thing in PceEmacs, I have several options:
</p>
<ul class="org-ul">
<li>I click the "Edit file" or "Edit predicate" button in pldoc server.</li>
<li>I query <code>edit(Name)</code> or <code>edit(Name/Arity)</code> in the interpreter.</li>
</ul>
</div>
</div>
<div id="outline-container-org153fb8e" class="outline-3">
<h3 id="org153fb8e"><span class="section-number-3">2.5</span> Rebuilding</h3>
<div class="outline-text-3" id="text-2-5">
<p>
To see the updated documentation,
I click "Make &amp; Reload" button in my pldoc website, if I haven't done so.
If I have clicked that button, I simply refresh my browser with F5 or Ctrl+R.
</p>

<p>
To test the program, I query <code>make.</code> in the interactive prompt, and I enter some queries.
</p>

<p>
Warnings are errors.
If there is a warning, I go back to editing.
"Singleton variables" most likely mean there's a typo.
</p>
</div>
</div>
<div id="outline-container-orgb03a2d7" class="outline-3">
<h3 id="orgb03a2d7"><span class="section-number-3">2.6</span> Trying and manual testing</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Important: <i>Prolog source file and Prolog query prompt have different syntax.</i>
A Prolog source file contains <i>statements</i>.
The Prolog interpreter accepts <i>queries</i>.
Pasting a file into the interpreter does <i>not</i> load the file;
this is contrary to Lisp/Python/Ruby interpreters.
</p>

<p>
The prompt <code>?-</code> means that the interpreter is expecting a <i>query</i>.
However, we can enter temporary statements:
</p>
<ul class="org-ul">
<li>Type the query <code>[user].</code>.
The prompt changes to <code>|:</code>.
We're now at the statement prompt.
(The syntax <code>:- [foo].</code> is shorthand for <code>:- consult(foo).</code> which is documented in <a href="http://www.swi-prolog.org/pldoc/man?predicate=consult/1">consult/1</a>.)</li>
<li>Enter several lines of statements.</li>
<li>End with a new line and Control+D.
We're now back at the query prompt.</li>
</ul>

<p>
Those temporary statements disappear when the interpreter quits.
</p>

<p>
Usually, after trying my changes, I go back to thinking and editing.
</p>
</div>
</div>
<div id="outline-container-orgf1274af" class="outline-3">
<h3 id="orgf1274af"><span class="section-number-3">2.7</span> Seeing source codes and finding definitions</h3>
<div class="outline-text-3" id="text-2-7">
<p>
To show the canonical representation (properly-parenthesized tree form) of a term, query <code>write_canonical(Term)</code>.
</p>

<p>
To see the source code of a predicate, query <code>edit(Name)</code> or <code>edit(Name/Arity)</code> or <code>listing(Module:Name)</code> or <code>listing(Name)</code>.
We can see the source code of libraries.
We can easily find where things are defined.
</p>
</div>
</div>
<div id="outline-container-org0a405a7" class="outline-3">
<h3 id="org0a405a7"><span class="section-number-3">2.8</span> Troubleshooting: tracing and spying</h3>
<div class="outline-text-3" id="text-2-8">
<p>
Having to use the tracer means I have failed to design unsurprising programs.
It means that my past self have failed to communicate to my future self.
</p>

<p>
Sometimes I query debug/0 to disable optimizations so that errors have full stack trace.
Sometimes I need to restart the interpreter and query debug/0 before running my development web server.
See also nodebug/0.
</p>

<p>
I start tracing a goal with the query <code>trace, Goal.</code>
In the tracer prompt:
</p>
<ul class="org-ul">
<li><code>a</code> aborts (calls abort/0; goes back to toplevel interpreter prompt)</li>
<li><code>c</code> creeps ("step into" in modern debugger parlance)</li>
<li><code>s</code> skips ("step over" in modern debugger parlance)</li>
<li><code>l</code> leaps ("continue" in modern debugger parlance)</li>
<li>Type <code>/f</code> in the tracer prompt to run to the next failure.</li>
</ul>

<p>
I stop tracing by notrace/0.
</p>

<p>
TODO spy/1, tspy/1
</p>

<p>
trace/0, gtrace/0, notrace/0
</p>

<p>
These resources say something about fixing programming errors:
</p>
<ul class="org-ul">
<li><a href="https://www.cs.ucsb.edu/~kyledewey/cs162w15/debugging_prolog.html">https://www.cs.ucsb.edu/~kyledewey/cs162w15/debugging_prolog.html</a></li>
<li><a href="http://www.swi-prolog.org/pldoc/man?section=debugoverview">http://www.swi-prolog.org/pldoc/man?section=debugoverview</a></li>
<li><a href="https://www.metalevel.at/prolog/testing">https://www.metalevel.at/prolog/testing</a></li>
<li><a href="https://www.metalevel.at/prolog/debugging">https://www.metalevel.at/prolog/debugging</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgb522a1a" class="outline-3">
<h3 id="orgb522a1a"><span class="section-number-3">2.9</span> Committing to a Git repository</h3>
<div class="outline-text-3" id="text-2-9">
<p>
I commit my work to Git repository with Emacs Magit or git-gui.
I sanity-check the tree with <code>gitk --all</code>.
I push my work to my GitHub work repository.
</p>
</div>
</div>
</div>
<div id="outline-container-org33d40af" class="outline-2">
<h2 id="org33d40af"><span class="section-number-2">3</span> Error handling and logging</h2>
<div class="outline-text-2" id="text-3">
<div id="text-table-of-contents">
<ul>
<li><a href="#org046abbc">3.1. Fail, throw, stack traces</a></li>
<li><a href="#org5033478">3.2. Structured logging</a></li>
</ul>
</div>
</div>
<div id="outline-container-org046abbc" class="outline-3">
<h3 id="org046abbc"><span class="section-number-3">3.1</span> Fail, throw, stack traces</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Two options: throw or fail.
</p>

<p>
If backtracking doesn't make sense, then throw, don't fail.
</p>

<pre class="example">
person(joe).
pair_first_second(pair(A,_), A, B).
</pre>

<p>
Should <code>person(1)</code> fail or throw?
Should <code>pair_first_second(foo)</code> fail or throw?
</p>

<p>
Fail means try the next alternative.
</p>

<p>
If you want throw/1 with stack trace,
you must write it like <code>throw(error(Something, _))</code>.
</p>

<p>
A <i>function</i> should always throw and not fail, when an argument has a wrong type.
</p>

<pre class="example">
negate(A,B) :- integer(A), !, B is -A.
negate(A,B) :- integer(B), !, A is -B.
negate(A,B) :- throw(error(negate(A,B),_)).
</pre>

<ul class="org-ul">
<li><a href="https://wiki.colby.edu/display/~amvartan/Exception+and+Error+Handling+in+Prolog">https://wiki.colby.edu/display/~amvartan/Exception+and+Error+Handling+in+Prolog</a></li>
<li><a href="https://stackoverflow.com/questions/32968148/why-throw-an-exception-in-prolog-instead-a-simple-fail">https://stackoverflow.com/questions/32968148/why-throw-an-exception-in-prolog-instead-a-simple-fail</a></li>
</ul>
</div>
</div>
<div id="outline-container-org5033478" class="outline-3">
<h3 id="org5033478"><span class="section-number-3">3.2</span> Structured logging</h3>
<div class="outline-text-3" id="text-3-2">
<p>
This is how we log messages in Prolog:
</p>
<ul class="org-ul">
<li>Design a term that represents the <i>meaning</i> of the message.</li>
<li>Call <code>print_message(Kind,Message)</code> where Message is that term.</li>
<li>Extend <code>prolog:message//1</code> to translate that term to string.</li>
</ul>

<pre class="example">
% Syntax:
prolog:message(Term) --&gt; Lines.

% Example:
prolog:message(Term) --&gt;
    [ 'The term is ~q.'-[Term] ],
    [ 'This is the second line in the message.' ].
</pre>

<p>
Syntax description:
</p>
<ul class="org-ul">
<li>'Lines' is a list of 'Line's.
<ul class="org-ul">
<li>A 'Line' has this shape:
<ul class="org-ul">
<li>Format-Args: 'Format' and 'Args' are the same arguments accepted by format/2.</li>
<li>Terms of other shapes are converted to string.</li>
</ul></li>
</ul></li>
</ul>

<p>
The printed message is the concatenation of all 'Line's.
</p>

<p>
TODO:
</p>
<ul class="org-ul">
<li>How do we log to file?</li>
<li>How do we rotate log files?</li>
</ul>

<p>
References:
</p>
<ul class="org-ul">
<li><a href="http://www.pathwayslms.com/swipltuts/message/index.html">Anne Ogborn's "Printing Messages in SWI-Prolog"</a></li>
<li><a href="http://www.swi-prolog.org/pldoc/man?section=printmsg">http://www.swi-prolog.org/pldoc/man?section=printmsg</a></li>
<li><a href="http://www.swi-prolog.org/pldoc/man?section=debug">http://www.swi-prolog.org/pldoc/man?section=debug</a></li>
<li><a href="https://www.metalevel.at/prolog/business">https://www.metalevel.at/prolog/business</a></li>
</ul>

<p>
Usability issues:
</p>
<ul class="org-ul">
<li>Where is <code>prolog:message//1</code> documented?
I found that by trial-and-error.</li>
<li>Why do we require people to understand DCG rules before they can use the messaging system?</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org867c8f2" class="outline-2">
<h2 id="org867c8f2"><span class="section-number-2">4</span> Modeling things in Prolog</h2>
<div class="outline-text-2" id="text-4">
<div id="text-table-of-contents">
<ul>
<li><a href="#org87adb92">4.1. Declarative reading</a></li>
<li><a href="#org1e42883">4.2. Production prolog</a></li>
<li><a href="#orgc9217e1">4.3. Predicate for membership</a></li>
<li><a href="#org575e688">4.4. Designing predicates: naming is hard.</a></li>
<li><a href="#org5a9568b">4.5. Naming the parts of a list: head, tail, and butt</a></li>
<li><a href="#orgfa3bcf2">4.6. Total relational programming? Relational programs that can be proven to terminate?</a></li>
<li><a href="#org09b6661">4.7. Prolog procedural semantics</a>
<ul>
<li><a href="#org7f63ae4">4.7.1. Swapped phrases</a></li>
<li><a href="#org9f5c130">4.7.2. Understanding depth-first search, backtracking, choice points, performance, and cuts</a></li>
<li><a href="#org57e49f0">4.7.3. Prolog is a depth-first brute-forcer</a></li>
</ul>
</li>
<li><a href="#orgeed882e">4.8. Which string representation should I use?</a></li>
</ul>
</div>
</div>
<div id="outline-container-org87adb92" class="outline-3">
<h3 id="org87adb92"><span class="section-number-3">4.1</span> Declarative reading</h3>
<div class="outline-text-3" id="text-4-1">
<p>
<code>A :- B</code> means "to prove A, prove B".
</p>

<p>
<code>p(a,b) :- Q</code> is a shorthand of <code>p(A,B) :- A=a, B=b, Q</code>.
</p>

<p>
<code>A :- B</code> is pure iff all reordering of the phrases of B doesn't change the result?
</p>

<p>
<code>\+</code> means "not provable", not "not"
</p>

<p>
Every variable is implicitly universally quantified.
</p>

<p>
<code>?- Q</code> means we ask Prolog to prove <code>Q</code>.
</p>
</div>
</div>
<div id="outline-container-org1e42883" class="outline-3">
<h3 id="org1e42883"><span class="section-number-3">4.2</span> Production prolog</h3>
<div class="outline-text-3" id="text-4-2">
<p>
"Production Prolog" by Michael Hendricks; Strange Loop 2014
<a href="https://www.youtube.com/watch?v=G_eYTctGZw8">https://www.youtube.com/watch?v=G_eYTctGZw8</a>
</p>
<ul class="org-ul">
<li>This mentions "Mercury's bisecting debugger"</li>
<li>mavis library for optional type declarations</li>
<li>julian library for dates</li>
<li>time/1 for measuring how long a goal takes</li>
<li>library(spawn)?</li>
</ul>
</div>
</div>
<div id="outline-container-orgc9217e1" class="outline-3">
<h3 id="orgc9217e1"><span class="section-number-3">4.3</span> Predicate for membership</h3>
<div class="outline-text-3" id="text-4-3">
<p>
Membership
person(joe)
positive(1)
</p>
</div>
</div>
<div id="outline-container-org575e688" class="outline-3">
<h3 id="org575e688"><span class="section-number-3">4.4</span> Designing predicates: naming is hard.</h3>
<div class="outline-text-3" id="text-4-4">
<p>
The name of a relation should describe the relationship.
</p>

<p>
If we intend that there is only one relation between A and B that makes sense,
then we may name that relation A_B.
But:
</p>
<ul class="org-ul">
<li>What if A or B contains underscores?</li>
<li>Why do we prefer <code>father_child</code> to <code>beget</code> or <code>sire</code>?</li>
</ul>

<p>
is_thing(A).
</p>

<p>
A procedure's name should begin with a verb.
</p>

<p>
Order the parameters from the most likely to be bound.
If parameter A is more likely to be more bound than parameter B, then A should come before B.
Example: Write list_length/2 instead of length_list/2.
Unfortunately not everyone follows this convention.
</p>
</div>
</div>
<div id="outline-container-org5a9568b" class="outline-3">
<h3 id="org5a9568b"><span class="section-number-3">4.5</span> Naming the parts of a list: head, tail, and butt</h3>
<div class="outline-text-3" id="text-4-5">
<ul class="org-ul">
<li>"head" is the first element</li>
<li>"tail" is everything but the head</li>
<li>"butt" is the last element</li>
</ul>
</div>
</div>
<div id="outline-container-orgfa3bcf2" class="outline-3">
<h3 id="orgfa3bcf2"><span class="section-number-3">4.6</span> Total relational programming? Relational programs that can be proven to terminate?</h3>
<div class="outline-text-3" id="text-4-6">
<p>
A total relation is a relation that is defined for every element in its domain.
</p>

<p>
If there is total functional programming, then there should be total relational programming.
</p>

<p>
It is too easy to write a Prolog program that doesn't terminate.
</p>
</div>
</div>
<div id="outline-container-org09b6661" class="outline-3">
<h3 id="org09b6661"><span class="section-number-3">4.7</span> Prolog procedural semantics</h3>
<div class="outline-text-3" id="text-4-7">
</div>
<div id="outline-container-org7f63ae4" class="outline-4">
<h4 id="org7f63ae4"><span class="section-number-4">4.7.1</span> Swapped phrases</h4>
<div class="outline-text-4" id="text-4-7-1">
<p>
There is only a small syntactic difference between <code>dfs</code> and <code>bfs</code> (it's just flipped order).
</p>

<p>
Which one exploits tail call optimization (last call optimization)?
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">bit</span>(0).
<span style="color: #0000ff;">bit</span>(1).

<span style="color: #0000ff;">dfs</span>(<span style="color: #a020f0;">[]</span>).
<span style="color: #0000ff;">dfs</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">T</span><span style="color: #a020f0;">]</span>) :- bit(<span style="color: #a0522d;">H</span>), dfs(<span style="color: #a0522d;">T</span>).

<span style="color: #0000ff;">bfs</span>(<span style="color: #a020f0;">[]</span>).
<span style="color: #0000ff;">bfs</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">T</span><span style="color: #a020f0;">]</span>) :- bfs(<span style="color: #a0522d;">T</span>), bit(<span style="color: #a0522d;">H</span>).
</pre>
</div>
</div>
</div>
<div id="outline-container-org9f5c130" class="outline-4">
<h4 id="org9f5c130"><span class="section-number-4">4.7.2</span> Understanding depth-first search, backtracking, choice points, performance, and cuts</h4>
<div class="outline-text-4" id="text-4-7-2">
<p>
Save this knowledge base into a file, and load it into Prolog.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">a</span>(0).
<span style="color: #0000ff;">a</span>(1).

<span style="color: #0000ff;">b</span>(0).
<span style="color: #0000ff;">b</span>(1).
</pre>
</div>

<p>
Run the query <code>a(A), b(B).</code> and press <code>;</code> until Prolog fails.
</p>

<p>
This is what Prolog finds (we remove the newlines to make it more readable):
</p>
<pre class="example">
A = B, B = 0 ;
A = 0, B = 1 ;
A = 1, B = 0 ;
A = B, B = 1.
</pre>

<p>
This is the search space (search tree) of that query.
</p>
<pre class="example">
       ?- a(A), b(B).
      /              \
    A = 0           A = 1
   /     \         /     \
B = 0   B = 1   B = 0   B = 1
</pre>

<p>
Prolog traverses that tree in depth-first order as follows:
</p>
<pre class="example">
- ?- a(A), b(B).
  - A = 0
    - B = 0
    - B = 1
  - A = 1
    - B = 0
    - B = 1
</pre>

<p>
The important things to infer from this experiment are:
</p>
<ul class="org-ul">
<li>Prolog repeats the work on <code>b</code> as many times as the number of ways of satisfying <code>a</code>.
If <code>a</code> can be satisfied in N ways, and satisfying <code>b</code> is a lot of work,
then Prolog may do that work N times,
although the work produces the same result.</li>
<li>Everything to the right of an infinite branch will never be visited.</li>
</ul>

<p>
What is a choice point?
</p>

<p>
A cut makes <code>a(A), b(B)</code> and <code>b(B), a(A)</code> return different results.
</p>

<p>
How far does a cut cut?
</p>

<p>
"The craft of Prolog" defines three kinds of cuts: red, green, and blue.
</p>
<ul class="org-ul">
<li>A red cut destroys the logical meaning of a program.
Green and blue cuts don't.</li>
</ul>
</div>
</div>
<div id="outline-container-org57e49f0" class="outline-4">
<h4 id="org57e49f0"><span class="section-number-4">4.7.3</span> Prolog is a depth-first brute-forcer</h4>
<div class="outline-text-4" id="text-4-7-3">
<p>
But you can emulate other search algorithms too.
</p>
</div>
<ol class="org-ol">
<li><a id="org7aa584c"></a>Non-termination pitfalls, and how to generate terms correctly<br />
<div class="outline-text-5" id="text-4-7-3-1">
<p>
Sometimes we forget that Prolog, on failure, backtracks (retries), not stops.
</p>

<p>
Sometimes we focus too much on the logical reading and neglect the procedural reading.
</p>

<p>
For example, suppose that you want to generate all lists whose length doesn't exceed 2.
</p>

<p>
The following is a mathematically correct statement about that fact,
but it doesn't work in Prolog.
It has correct logical reading, but incorrect procedural reading.
If you keep pressing <code>;</code>, this will fail to terminate.
</p>
<div class="org-src-container">
<pre class="src src-prolog">?- length(<span style="color: #a0522d;">A</span>, <span style="color: #a0522d;">LA</span>), <span style="color: #a0522d;">LA</span> =&lt; 2.
</pre>
</div>

<p>
The correct way to do that is to use <code>between/3</code> (inclusive):
</p>
<div class="org-src-container">
<pre class="src src-prolog">?- between(0, 2, <span style="color: #a0522d;">LA</span>), length(<span style="color: #a0522d;">A</span>, <span style="color: #a0522d;">LA</span>).
</pre>
</div>

<p>
We can also use the <code>clpfd</code> library:
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module(library(clpfd)).

?- <span style="color: #a0522d;">LA</span> in 0..2, indomain(<span style="color: #a0522d;">LA</span>), length(<span style="color: #a0522d;">A</span>, <span style="color: #a0522d;">LA</span>).
</pre>
</div>

<p>
We shouldn't have to resort to cuts:
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #b22222;">% </span><span style="color: #b22222;">Don't do this.</span>
?- length(<span style="color: #a0522d;">A</span>, <span style="color: #a0522d;">LA</span>), (<span style="color: #a0522d;">LA</span> =&lt; 2 <span style="color: #a020f0;">-&gt;</span> true<span style="color: #a020f0;">;</span> <span style="color: #a020f0;">!</span>, fail).
</pre>
</div>

<p>
See also:
</p>
<ul class="org-ul">
<li><a href="https://www.metalevel.at/prolog/nontermination">https://www.metalevel.at/prolog/nontermination</a>
<ul class="org-ul">
<li>"[Non-termination is] common among beginners, and often lead them to perceive Prolog as 'slow', when in fact their program does not terminate <i>at all</i>."</li>
</ul></li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-orgeed882e" class="outline-3">
<h3 id="orgeed882e"><span class="section-number-3">4.8</span> Which string representation should I use?</h3>
<div class="outline-text-3" id="text-4-8">
<p>
The answer: Dedicated double-quoted string type (SWI-Prolog 7).
</p>
<ul class="org-ul">
<li>"Strings are distinct from lists" <a href="http://www.swi-prolog.org/pldoc/man?section=strings">http://www.swi-prolog.org/pldoc/man?section=strings</a></li>
<li>"Why has the representation of double quoted text changed?" <a href="http://www.swi-prolog.org/pldoc/man?section=ext-dquotes-motivation">http://www.swi-prolog.org/pldoc/man?section=ext-dquotes-motivation</a></li>
<li>2013 article "Strings in ECLiPSe 6.2, SWI-7 and YAP" <a href="http://eclipseclp.org/wiki/Prolog/Strings">http://eclipseclp.org/wiki/Prolog/Strings</a>
<ul class="org-ul">
<li>"With SWI-7 and ECLiPSe 6.2 string support has been harmonized, and YAP is expected to agree as well."</li>
<li>"Agreed Common Functionality"</li>
<li>"Situation before December 2013"</li>
</ul></li>
</ul>

<p>
Non-answer: Edinburgh style: Double-quoted string as list of integer codes (default mode of SWI-Prolog 6.6.4 on Ubuntu 14.04):
</p>
<ul class="org-ul">
<li>A Unicode character is represented as an integer that is the code of that character.</li>
<li>A string is represented as a list of codes.
Example: <code>"aaa" = [97,97,97]</code>.</li>
<li>This behavior changed in SWI-Prolog 7.</li>
<li>This was in 1993 ISO standard draft. <a href="http://fsl.cs.illinois.edu/images/9/9c/PrologStandard.pdf">http://fsl.cs.illinois.edu/images/9/9c/PrologStandard.pdf</a>
<ul class="org-ul">
<li>This wasn't in the final version?</li>
</ul></li>
</ul>

<p>
Non-answer: Double-quoted string as list of one-character atoms:
</p>
<ul class="org-ul">
<li>A Unicode character is represented as a one-character atom.</li>
<li>A string is represented as a list of one-character atoms.
Example: <code>"aaa" = [a,a,a]</code>.</li>
<li>This assumes that the Prolog implementation garbage-collects atoms.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga732c17" class="outline-2">
<h2 id="orga732c17"><span class="section-number-2">5</span> Writing extensible knowledge bases</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgf4a8c2a" class="outline-3">
<h3 id="orgf4a8c2a"><span class="section-number-3">5.1</span> Multifile or parametrization-and-catamorphism?</h3>
<div class="outline-text-3" id="text-5-1">
<pre class="example">
:- multifile foo_ext/1.

foo(A) :- foo_ext(A).
</pre>

<p>
Catamorphism:
</p>
<pre class="example">
foo(F,A) :- call(F,A).
</pre>

<p>
Don't multifile if clause order matters.
Reloading changes clause order.
<a href="http://www.swi-prolog.org/FAQ/Multifile.html">http://www.swi-prolog.org/FAQ/Multifile.html</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org2537bad" class="outline-2">
<h2 id="org2537bad"><span class="section-number-2">6</span> Where things get ugly</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org71a40f6" class="outline-3">
<h3 id="org71a40f6"><span class="section-number-3">6.1</span> Cuts</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>slide 5-28, pitfalls in implementing abs with cut <a href="http://users.informatik.uni-halle.de/~brass/lp06/c5_propr.pdf">http://users.informatik.uni-halle.de/~brass/lp06/c5_propr.pdf</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgf2d156d" class="outline-3">
<h3 id="orgf2d156d"><span class="section-number-3">6.2</span> Speeding things up</h3>
<div class="outline-text-3" id="text-6-2">
</div>
<div id="outline-container-orgc57b0f5" class="outline-4">
<h4 id="orgc57b0f5"><span class="section-number-4">6.2.1</span> Profiling: finding where your program spends time; finding where it is slow; diagnosing slowness</h4>
<div class="outline-text-4" id="text-6-2-1">
<p>
To run your <code>Goal</code> with profiling, simply query <code>profile(Goal)</code>.
</p>

<p>
Profiling couldn't be any simpler than this!
</p>
</div>
</div>
</div>

<div id="outline-container-orga2b3e1b" class="outline-3">
<h3 id="orga2b3e1b"><span class="section-number-3">6.3</span> Functional/expression style sometimes beats relational/unification style</h3>
<div class="outline-text-3" id="text-6-3">
<pre class="example">
-- Functional/expression style
g (f0 x0) (f1 x1) (f2 x2)

% Relational/unification style
f0(X0, Y0), f1(X1, Y1), f2(X2, Y2), g(Y0, Y1, Y2, Z).
</pre>
<p>
Example where functional style wins:
</p>
<ul class="org-ul">
<li>string formatting</li>
<li>number crunching</li>
</ul>

<p>
If backtracking isn't involved, functional style wins (is more concise than relational style).
</p>

<p>
If computation is reversible, relational style wins (half the amount of code of functional style).
</p>

<p>
We should use both styles depending on circumstances.
</p>

<p>
We can define a functional/expression/applicative/evaluative sublanguage in Prolog, roughly like this:
</p>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">eval</span>((<span style="color: #a0522d;">A</span> = <span style="color: #a0522d;">B</span>), <span style="color: #a0522d;">Val</span>) :- <span style="color: #a0522d;">A</span> = <span style="color: #a0522d;">B</span>, eval(<span style="color: #a0522d;">B</span>, <span style="color: #a0522d;">Val</span>), <span style="color: #a020f0;">!</span>.
<span style="color: #0000ff;">eval</span>(<span style="color: #a0522d;">F</span>, <span style="color: #a0522d;">Val</span>) :- callable(<span style="color: #a0522d;">F</span>), call(<span style="color: #a0522d;">F</span>, <span style="color: #a0522d;">Val</span>), <span style="color: #a020f0;">!</span>. <span style="color: #b22222;">% </span><span style="color: #b22222;">lots of hand-waving here</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">etc.</span>
</pre>
</div>

<p>
Haskell is weak against the AST decoration problem.
Dynamic languages (Scheme, JavaScript, Prolog) / gradual-typed languages (TypeScript) beat static languages (Haskell) on the AST decoration problem.
How about Ocaml polymorphic variants?
</p>

<p>
Should we move from Prolog to Scheme/miniKanren or Mercury?
</p>
</div>
</div>
<div id="outline-container-orgff76257" class="outline-3">
<h3 id="orgff76257"><span class="section-number-3">6.4</span> Directives like <code>:- op</code> complicate parsing a Prolog source code.</h3>
</div>
<div id="outline-container-orgcd563af" class="outline-3">
<h3 id="orgcd563af"><span class="section-number-3">6.5</span> Zero-arity compound term</h3>
<div class="outline-text-3" id="text-6-5">
<p>
Use compound_name_arity/3 instead of functor/3, but this seems to be an SWI-Prolog extension.
</p>

<p>
<a href="http://www.swi-prolog.org/pldoc/man?section=ext-compound-zero">http://www.swi-prolog.org/pldoc/man?section=ext-compound-zero</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgdb8d5a8" class="outline-2">
<h2 id="orgdb8d5a8"><span class="section-number-2">7</span> Writing enterprise web applications?</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-orga52d884" class="outline-3">
<h3 id="orga52d884"><span class="section-number-3">7.1</span> Comparison between ontology, relational programming, and database programming</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Open World Assumption vs Closed World Assumption <a href="http://www.mkbergman.com/852/the-open-world-assumption-elephant-in-the-room/">http://www.mkbergman.com/852/the-open-world-assumption-elephant-in-the-room/</a>
</p>

<p>
How do we combine closed-world assumption (logic programming / relational database) and open-world assumption (web ontology)?
</p>
</div>
</div>
<div id="outline-container-orgbbbadf1" class="outline-3">
<h3 id="orgbbbadf1"><span class="section-number-3">7.2</span> Knowledge representation and software specification</h3>
<div class="outline-text-3" id="text-7-2">
</div>
<div id="outline-container-orgf5826c1" class="outline-4">
<h4 id="orgf5826c1"><span class="section-number-4">7.2.1</span> Their relationships</h4>
<div class="outline-text-4" id="text-7-2-1">
<ul class="org-ul">
<li>2010, "Functional-Logic Programming Lecture Notes", Harold Boley, slides, <a href="http://www.cs.unb.ca/~boley/FLP/cs6905FLP.pdf">pdf</a>
<ul class="org-ul">
<li>Knowledge representation in AI roughly corresponds to software specification in software engineering.</li>
<li>Declarative programs can be thought as executable specifications.</li>
<li>Invertibility principle (slide 36)</li>
<li>Nesting/conjunction principle (slide 46)</li>
<li>Unification principle (slide 50)</li>
<li>Amalgamation/integration principle (slide 55)</li>
<li>That's a long deck: 270 slides.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org772a721" class="outline-4">
<h4 id="org772a721"><span class="section-number-4">7.2.2</span> Executable specification?</h4>
<div class="outline-text-4" id="text-7-2-2">
<ul class="org-ul">
<li>lightweight executable mathematics <a href="https://www.cl.cam.ac.uk/~pes20/lem/">https://www.cl.cam.ac.uk/~pes20/lem/</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orga93cc9a" class="outline-3">
<h3 id="orga93cc9a"><span class="section-number-3">7.3</span> Logic programming vs theorem proving</h3>
<div class="outline-text-3" id="text-7-3">
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/36335633/difference-between-logic-programming-and-automated-theorem-proving">https://stackoverflow.com/questions/36335633/difference-between-logic-programming-and-automated-theorem-proving</a></li>
<li><a href="https://en.wikipedia.org/wiki/Automated_theorem_proving">https://en.wikipedia.org/wiki/Automated_theorem_proving</a></li>
</ul>
</div>
</div>
<div id="outline-container-org07fd13b" class="outline-3">
<h3 id="org07fd13b"><span class="section-number-3">7.4</span> SWI-Prolog, PostgreSQL, and ODBC</h3>
<div class="outline-text-3" id="text-7-4">
<p>
Install the Ubuntu 14.04 package <code>odbc-postgresql</code>.
</p>

<p>
I want my application to self-contain its configuration.
I don't configure ODBC INI files.
</p>

<p>
ODBC Data Source Name (DSN) connection string
</p>

<p>
Relevant commands: <code>odbcinst -j</code>
</p>

<p>
The file <code>/etc/odbcinst.ini</code> contains a list of driver names.
</p>

<p>
<a href="http://www.swi-prolog.org/pldoc/doc_for?object=section(%27packages/cql.html%27)">SWI-Prolog CQL documentation</a> doesn't inspire confidence.
</p>
</div>
</div>
<div id="outline-container-org31c6bb5" class="outline-3">
<h3 id="org31c6bb5"><span class="section-number-3">7.5</span> Deductive databases and Datalog?</h3>
</div>
</div>
<div id="outline-container-org4793bde" class="outline-2">
<h2 id="org4793bde"><span class="section-number-2">8</span> Parsing</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orgb1d36b9" class="outline-3">
<h3 id="orgb1d36b9"><span class="section-number-3">8.1</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-02&gt; </span></span> Direct left-recursive parsers in Prolog</h3>
<div class="outline-text-3" id="text-8-1">
<p>
The key: unify terminals before recursing into nonterminals.
</p>
<pre class="example">
% S is a list of character codes.
binary_operator([0'+]).
binary_operator([0'*]).

digit(C) :- code_type(C, digit).

number(S) :-
    digit([S])
;   append([[A], B], S), digit(A), number(B);

expression(S) :-
    number(S)
;   binary_operator(B), append([A, B, C], S), expression(A), expression(C).
</pre>
</div>
</div>

<div id="outline-container-org36127b8" class="outline-3">
<h3 id="org36127b8"><span class="section-number-3">8.2</span> Relational parsing; parsing with Prolog; my train of thought</h3>
<div class="outline-text-3" id="text-8-2">
<p>
Parsing is turning a list into a tree.
</p>
</div>
<div id="outline-container-orgc5a4c9d" class="outline-4">
<h4 id="orgc5a4c9d"><span class="section-number-4">8.2.1</span> Approaches</h4>
<div class="outline-text-4" id="text-8-2-1">
<ul class="org-ul">
<li>2002 course notes <a href="http://www.cs.sfu.ca/~cameron/Teaching/383/DCG.html">http://www.cs.sfu.ca/~cameron/Teaching/383/DCG.html</a></li>
<li>1987 article "Parsing and compiling using Prolog" <a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.101.9739&amp;rep=rep1&amp;type=pdf">http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.101.9739&amp;rep=rep1&amp;type=pdf</a></li>
<li>relational approach
<ul class="org-ul">
<li>recognizer: <code>digit(Input)</code>
<ul class="org-ul">
<li>recognizer with explicit search strategy</li>
</ul></li>
<li>prefix remover: <code>digit(Input, Unparsed_suffix)</code>
<ul class="org-ul">
<li>This is the approach used by Prolog DCG (definite clause grammar).</li>
</ul></li>
<li>prefix extractor: <code>digit(Input, Parsed_prefix, Unparsed_suffix)</code>
<ul class="org-ul">
<li>This enables us to get the parsed input without <code>append/3</code>.</li>
</ul></li>
<li>concrete syntax tree parser: <code>digit(Input, Parsed, Unparsed)</code> where <code>Parsed = number(Children)</code>.
<ul class="org-ul">
<li>An example of <code>Parsed</code> is <code>number(digit(1), number(digit(2)))</code>.</li>
</ul></li>
<li>interpreter</li>
</ul></li>
<li>functional approach
<ul class="org-ul">
<li>parser combinator</li>
</ul></li>
<li>generator approach
<ul class="org-ul">
<li>parser generator</li>
<li>parsing expression grammar</li>
</ul></li>
<li>procedural approach
<ul class="org-ul">
<li>recursive-descent</li>
</ul></li>
<li><a href="https://en.wikipedia.org/wiki/Garden-path_sentence">https://en.wikipedia.org/wiki/Garden-path_sentence</a></li>
</ul>
</div>
</div>
<div id="outline-container-org8243e1b" class="outline-4">
<h4 id="org8243e1b"><span class="section-number-4">8.2.2</span> Determining the groundness of the length of the lists involved in append/3 and append/2</h4>
<div class="outline-text-4" id="text-8-2-2">
</div>
<ol class="org-ol">
<li><a id="org92e1fde"></a>Why do we care?<br />
<div class="outline-text-5" id="text-8-2-2-1">
<p>
Because we want to write naive parsers that terminate.
</p>
</div>
</li>
<li><a id="org819e5ca"></a>What?<br />
<div class="outline-text-5" id="text-8-2-2-2">
<p>
From the source code of SWI-Prolog, with some modifications:
</p>
<ul class="org-ul">
<li><a href="http://www.swi-prolog.org/pldoc/doc/_SWI_/library/lists.pl?show=src#append/3">http://www.swi-prolog.org/pldoc/doc/_SWI_/library/lists.pl?show=src#append/3</a></li>
</ul>

<p>
"Ground" here is an adjective, not a noun.
A term is <i>ground</i> iff it has no variables.
A term is non-ground otherwise.
</p>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">append</span>(<span style="color: #a020f0;">[]</span>, <span style="color: #a0522d;">L</span>, <span style="color: #a0522d;">L</span>).
<span style="color: #0000ff;">append</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">T</span><span style="color: #a020f0;">]</span>, <span style="color: #a0522d;">L</span>, <span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">R</span><span style="color: #a020f0;">]</span>) :-
    append(<span style="color: #a0522d;">T</span>, <span style="color: #a0522d;">L</span>, <span style="color: #a0522d;">R</span>).

<span style="color: #0000ff;">append</span>(<span style="color: #a020f0;">[]</span>, <span style="color: #a020f0;">[]</span>).
<span style="color: #0000ff;">append</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">L</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">Ls</span><span style="color: #a020f0;">]</span>, <span style="color: #a0522d;">As</span>) :-
    append(<span style="color: #a0522d;">L</span>, <span style="color: #a0522d;">Ws</span>, <span style="color: #a0522d;">As</span>),
    append(<span style="color: #a0522d;">Ls</span>, <span style="color: #a0522d;">Ws</span>).
</pre>
</div>

<p>
We say that a list is <i>length-ground</i> iff its length is ground, and <i>length-unground</i> otherwise.
The elements don't have to be ground.
</p>
<ul class="org-ul">
<li>The empty list is length-ground.</li>
<li>A list [_|T] is length-ground iff T is length-ground.</li>
<li>If a variable gets unified with a length-ground list, then the variable is length-ground.</li>
</ul>

<p>
To analyze length-groundedness, we "reverse" the program.
</p>

<pre class="example">
% append(T, L, R)
append([], L, L).
append(T, L, R) =&gt; append([H|T], L, [H|R]).
</pre>

<p>
(Length-ground = proper list?)
</p>

<p>
Now we can infer these about append(T, L, R):
</p>
<ul class="org-ul">
<li>If T = [], then L and R have the same length-groundness.</li>
<li>The recursive case:
<ul class="org-ul">
<li>Iff T is length-ground, then [H|T] is length-ground.</li>
<li>Iff R is length-ground, then [H|R] is length-ground.</li>
</ul></li>
<li>If we want L to be length-ground, then R has to be length-ground.</li>
<li>Thus we can infer that L and R have the same length-groundness regardless of the length-groundness of T.</li>
</ul>

<p>
If append(A, B, C) succeeds, then:
</p>
<ul class="org-ul">
<li>If A = [], then B and C have the same length-groundness.</li>
<li>If two of A, B, C are length-ground, then the other one is length-ground?</li>
<li>If two of A, B, C are length-unground, then the other one is length-unground?</li>
</ul>

<p>
What?
</p>
<ul class="org-ul">
<li>2002 article "Efficient Groundness Analysis in Prolog" <a href="https://arxiv.org/abs/cs/0201012">https://arxiv.org/abs/cs/0201012</a>
<ul class="org-ul">
<li><a href="https://github.com/pschachte/groundness">https://github.com/pschachte/groundness</a></li>
</ul></li>
</ul>
</div>
</li>
<li><a id="org2ce37c9"></a>How do we generate a long list in Prolog, for testing?<br />
<ol class="org-ol">
<li><a id="org7faeb02"></a>How do we say "A is a list of 100 equal elements" in Prolog?<br /></li>
</ol>
</li>
</ol>
</div>
<div id="outline-container-org88fceb4" class="outline-4">
<h4 id="org88fceb4"><span class="section-number-4">8.2.3</span> Naive approach with recognizer / membership predicate</h4>
<div class="outline-text-4" id="text-8-2-3">
<p>
A <i>recognizer</i> is a unary predicate that takes a list of character codes.
</p>

<p>
Another possible names for recognizer are <i>acceptor</i>, <i>determiner</i>, <i>decider</i>, <i>membership predicate</i>.
</p>

<p>
Example: The following <code>digit</code> predicate recognizes ASCII decimal digits.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">digit</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">D</span><span style="color: #a020f0;">]</span>) :- code_type(<span style="color: #a0522d;">D</span>, digit).
</pre>
</div>

<p>
We can build recognizers on other recognizers.
For example, here we use <code>digit</code> to define <code>number_</code>:
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #b22222;">% </span><span style="color: #b22222;">We append underscore because =number= is a reserved Prolog predicate.</span>
<span style="color: #0000ff;">number_</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">]</span>) :- digit(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">]</span>).
<span style="color: #0000ff;">number_</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">T</span><span style="color: #a020f0;">]</span>) :- digit(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">]</span>), number_(<span style="color: #a0522d;">T</span>).
</pre>
</div>

<p>
That Prolog knowledge base corresponds to this context-free grammar:
</p>
<pre class="example">
digit ::= &lt;a digit character as defined by Unicode&gt;
number ::= digit | digit number
</pre>

<p>
Exercise:
</p>
<ul class="org-ul">
<li>Here you will compare depth-first search and iterative deepening search, and understand search completeness.</li>
<li>Try the query <code>number_(S)</code>.</li>
<li>Try the query <code>length(S,_), number_(S)</code>.</li>
<li>If you keep pressing semicolon in the first query, will you ever encounter <code>S = [48,49]</code>?</li>
</ul>
</div>
<ol class="org-ol">
<li><a id="orgbe4baa5"></a>A cool thing: recognizers are generators.<br />
<div class="outline-text-5" id="text-8-2-3-1">
<p>
The predicate <code>number_</code> can be used not only to recognize strings, but also to <i>generate</i> all such strings.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #b22222;">% </span><span style="color: #b22222;">Press ; to generate the next possibility.</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">Press . to stop.</span>
?- length(<span style="color: #a0522d;">S</span>,<span style="color: #a0522d;">_</span>), number_(<span style="color: #a0522d;">S</span>).
</pre>
</div>

<p>
To understand how that works, we have to understand Prolog backtracking.
</p>
</div>
</li>
<li><a id="org829b313"></a>Left recursion thwarts the naive approach.<br />
<div class="outline-text-5" id="text-8-2-3-2">
<p>
Problem:
The following <code>expression</code> doesn't terminate.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">operator</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">A</span><span style="color: #a020f0;">]</span>) :- string_codes(<span style="color: #8b2252;">"+"</span>, <span style="color: #a0522d;">Ops</span>), member(<span style="color: #a0522d;">A</span>, <span style="color: #a0522d;">Ops</span>).

<span style="color: #0000ff;">expression</span>(<span style="color: #a0522d;">E</span>) :- number_(<span style="color: #a0522d;">E</span>).
<span style="color: #0000ff;">expression</span>(<span style="color: #a0522d;">E</span>) :- true
    , append(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">A</span>, <span style="color: #a0522d;">B</span>, <span style="color: #a0522d;">C</span><span style="color: #a020f0;">]</span>, <span style="color: #a0522d;">E</span>)
    , expression(<span style="color: #a0522d;">A</span>)
    , operator(<span style="color: #a0522d;">B</span>)
    , expression(<span style="color: #a0522d;">C</span>)
    .
</pre>
</div>

<p>
The corresponding context-free grammar is left-recursive:
</p>
<pre class="example">
expression ::= number | expression operator expression
</pre>

<p>
We don't want to sacrifice the elegance of the description.
</p>
</div>
</li>
<li><a id="org2b797d7"></a>Can memoization (tabling) help speed up the naive approach?<br />
<div class="outline-text-5" id="text-8-2-3-3">
<p>
No.
</p>
</div>
</li>
<li><a id="org8d69b32"></a>Another naive approach that works.<br />
<div class="outline-text-5" id="text-8-2-3-4">
<p>
This one works.
</p>

<p>
The key is:
</p>
<ul class="org-ul">
<li>Put grounding goals first.
A grounding goal is a goal that grounds its variables.</li>
<li><p>
Be careful with the pattern <code>g, u</code> where <code>g</code> generates ungrounded terms and <code>u</code> fails,
because it may cause infinite loop when Prolog backtracks,
because Prolog continues to generate fresh variables.
For example, this doesn't terminate:
</p>
<div class="org-src-container">
<pre class="src src-prolog">?- length(<span style="color: #a0522d;">L</span>, <span style="color: #a0522d;">N</span>), fail.
</pre>
</div>
<ul class="org-ul">
<li>If <code>p</code> may generate infinite choice points, then <code>p, fail</code> doesn't terminate.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">digit</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">C</span><span style="color: #a020f0;">]</span>) :- code_type(<span style="color: #a0522d;">C</span>, digit).

<span style="color: #0000ff;">number_</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">]</span>) :- digit(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">]</span>).
<span style="color: #0000ff;">number_</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">T</span><span style="color: #a020f0;">]</span>) :- digit(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">H</span><span style="color: #a020f0;">]</span>), number_(<span style="color: #a0522d;">T</span>).

<span style="color: #0000ff;">operator</span>(<span style="color: #a020f0;">[</span>0'+<span style="color: #a020f0;">]</span>).

<span style="color: #b22222;">% </span><span style="color: #b22222;">expression(Meaning,Codes) may not work if Codes is ungrounded.</span>
<span style="color: #0000ff;">expression</span>(number(<span style="color: #a0522d;">E</span>), <span style="color: #a0522d;">E</span>) :- number_(<span style="color: #a0522d;">E</span>).
<span style="color: #0000ff;">expression</span>(plus(<span style="color: #a0522d;">MA</span>,<span style="color: #a0522d;">MC</span>), <span style="color: #a0522d;">E</span>) :- true
    , operator(<span style="color: #a0522d;">EB</span>) <span style="color: #b22222;">% </span><span style="color: #b22222;">Put grounding goals first.</span>
    , append(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">EA</span>,<span style="color: #a0522d;">EB</span>,<span style="color: #a0522d;">EC</span><span style="color: #a020f0;">]</span>, <span style="color: #a0522d;">E</span>) <span style="color: #b22222;">% </span><span style="color: #b22222;">Thus B is grounded.</span>
    , expression(<span style="color: #a0522d;">MA</span>,<span style="color: #a0522d;">EA</span>)
    , expression(<span style="color: #a0522d;">MC</span>,<span style="color: #a0522d;">EC</span>)
    .
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org297dd52" class="outline-4">
<h4 id="org297dd52"><span class="section-number-4">8.2.4</span> Prefix remover / difference-list recognizer / list partitioner</h4>
<div class="outline-text-4" id="text-8-2-4">
<p>
We can turn the naive recognizer <code>digit/1</code> into difference-list recognizer <code>digit/2</code>.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">digit</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">D</span><span style="color: #a020f0;">]</span>) :- code_type(<span style="color: #a0522d;">D</span>, digit).
</pre>
</div>

<ul class="org-ul">
<li>The first parameter is the input string, say Input.</li>
<li>The second parameter is the recognized prefix of Input.</li>
<li>The third parameter is the unrecognized suffix of Input.</li>
</ul>

<p>
In the following, P stands for Parsed, and U stands for Unparsed.
</p>

<p>
We can turn the recognizer into:
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #b22222;">% </span><span style="color: #b22222;">Prefix remover.</span>
<span style="color: #0000ff;">digit</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">P</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">U</span><span style="color: #a020f0;">]</span>, <span style="color: #a0522d;">U</span>) :- code_type(<span style="color: #a0522d;">P</span>, digit).

<span style="color: #b22222;">% </span><span style="color: #b22222;">List partitioner.</span>
<span style="color: #0000ff;">digit</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">P</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">U</span><span style="color: #a020f0;">]</span>, <span style="color: #a020f0;">[</span><span style="color: #a0522d;">P</span><span style="color: #a020f0;">]</span>, <span style="color: #a0522d;">U</span>) :- code_type(<span style="color: #a0522d;">P</span>, digit).

<span style="color: #b22222;">% </span><span style="color: #b22222;">The list partitioner can be derived from the prefix remover:</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">digit(U0, P0, U1) :- digit(U0, U1), append(P0, U1, U0).</span>

<span style="color: #0000ff;">number_</span>(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">U1</span>) :- digit(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">U1</span>).

<span style="color: #0000ff;">number_</span>(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">P0</span>, <span style="color: #a0522d;">U1</span>) :- digit(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">P0</span>, <span style="color: #a0522d;">U1</span>).
<span style="color: #0000ff;">number_</span>(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">P2</span>, <span style="color: #a0522d;">U2</span>) :- true
    , digit(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">P0</span>, <span style="color: #a0522d;">U1</span>)
    , number_(<span style="color: #a0522d;">U1</span>, <span style="color: #a0522d;">P1</span>, <span style="color: #a0522d;">U2</span>)
    , append(<span style="color: #a0522d;">P0</span>, <span style="color: #a0522d;">P1</span>, <span style="color: #a0522d;">P2</span>)
    .
</pre>
</div>

<p>
The meaning of <code>number_(U0, P0, U1)</code> is:
</p>
<ul class="org-ul">
<li>P0 is a number.</li>
<li>P0 is a prefix of U0.</li>
<li>U0 is the concatenation of P0 and U1.</li>
</ul>

<p>
Observe how we "thread" the state.
The calls in the body follow the pattern <code>something(U&lt;n&gt;, P&lt;n&gt;, U&lt;n+1&gt;)</code>.
</p>

<p>
We can translate a recognizer into a difference-list recognizer.
</p>

<p>
The cool thing is that each parameter works both ways.
</p>
<ul class="org-ul">
<li>The query <code>string_codes("123", A), number_(A, A, [])</code> asks Prolog to find out whether "123" parses as a number.</li>
<li>The query <code>length(A, _), number_(A, A, []).</code> asks Prolog to find a string that parse as a number.
You can keep pressing <code>;</code> to generate the next strings.</li>
</ul>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">operator</span>(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">P</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">U</span><span style="color: #a020f0;">]</span>, <span style="color: #a020f0;">[</span><span style="color: #a0522d;">P</span><span style="color: #a020f0;">]</span>, <span style="color: #a0522d;">U</span>) :- string_codes(<span style="color: #8b2252;">"+"</span>, <span style="color: #a0522d;">Codes</span>), member(<span style="color: #a0522d;">P</span>, <span style="color: #a0522d;">Codes</span>).

<span style="color: #0000ff;">expression</span>(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">P0</span>, <span style="color: #a0522d;">U1</span>) :- number_(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">P0</span>, <span style="color: #a0522d;">U1</span>).
<span style="color: #0000ff;">expression</span>(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">P0</span>, <span style="color: #a0522d;">U1</span>) :- true
    , expression(<span style="color: #a0522d;">U0</span>, <span style="color: #a0522d;">P0</span>, <span style="color: #a0522d;">U1</span>)
    , operator(<span style="color: #a0522d;">U1</span>, <span style="color: #a0522d;">P1</span>, <span style="color: #a0522d;">U2</span>)
    , expression(<span style="color: #a0522d;">U2</span>, <span style="color: #a0522d;">P2</span>, <span style="color: #a0522d;">U3</span>)
    .
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb9a0257" class="outline-4">
<h4 id="orgb9a0257"><span class="section-number-4">8.2.5</span> Definite clause grammars</h4>
<div class="outline-text-4" id="text-8-2-5">
<ul class="org-ul">
<li>The DCG clause <code>left --&gt; right</code> desugars/expands/translates into the definite clause <code>left(U0, U1) :- ...</code> where:
<ul class="org-ul">
<li>U0 is the input.</li>
<li>U1 is the suffix of U0 that is not recognized by the DCG clause.</li>
<li>The string recognized by the clause is the difference between U0 and U1.
That string is the P such that U0 = P + U1 where + denotes list concatenation.</li>
</ul></li>
<li>"Interesting Things about Prolog" <a href="https://gist.github.com/CMCDragonkai/89a6c502ca7272e5e7464c0fc8667f4d">https://gist.github.com/CMCDragonkai/89a6c502ca7272e5e7464c0fc8667f4d</a>
<ul class="org-ul">
<li>"Definite clause grammars (DCG) make the difference list pattern into a first class primitive with the <code>--&gt;</code> operator."</li>
</ul></li>
</ul>
</div>
<ol class="org-ol">
<li><a id="org706c60e"></a>Why does this naive DCG fail?<br />
<div class="outline-text-5" id="text-8-2-5-1">
<div class="org-src-container">
<pre class="src src-prolog">digit --&gt; <span style="color: #a020f0;">[</span><span style="color: #a0522d;">Code</span><span style="color: #a020f0;">]</span>, <span style="color: #a020f0;">{</span>code_type(<span style="color: #a0522d;">Code</span>, digit)<span style="color: #a020f0;">}</span>.

number --&gt;
    digit, number
<span style="color: #a020f0;">;</span>   digit
.

operator --&gt; <span style="color: #8b2252;">"+"</span>.

expression --&gt;
    number
<span style="color: #a020f0;">;</span>   expression, operator, expression
.
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org5a5a814" class="outline-4">
<h4 id="org5a5a814"><span class="section-number-4">8.2.6</span> Relational parsing with derivatives</h4>
<div class="outline-text-4" id="text-8-2-6">
<p>
<a href="https://github.com/webyrd/relational-parsing-with-derivatives/blob/master/README.md">https://github.com/webyrd/relational-parsing-with-derivatives/blob/master/README.md</a>
</p>
</div>
</div>
<div id="outline-container-orge6f8e20" class="outline-4">
<h4 id="orge6f8e20"><span class="section-number-4">8.2.7</span> Context-sensitive grammars?</h4>
<div class="outline-text-4" id="text-8-2-7">
<p>
We can add context by adding parameter.
</p>
</div>
</div>
<div id="outline-container-orgb7e0caf" class="outline-4">
<h4 id="orgb7e0caf"><span class="section-number-4">8.2.8</span> Libraries?</h4>
<div class="outline-text-4" id="text-8-2-8">
<ul class="org-ul">
<li><a href="https://github.com/cbaziotis/prolog-cfg-parser">https://github.com/cbaziotis/prolog-cfg-parser</a></li>
<li>This isn't Prolog, but this looks awesome <a href="https://github.com/Engelberg/instaparse/blob/master/README.md">https://github.com/Engelberg/instaparse/blob/master/README.md</a></li>
</ul>
</div>
</div>
<div id="outline-container-org41436cc" class="outline-4">
<h4 id="org41436cc"><span class="section-number-4">8.2.9</span> Left recursion</h4>
<div class="outline-text-4" id="text-8-2-9">
<p>
Mathematics handles left recursion just fine.
Computers should too.
We shouldn't chicken out.
We shouldn't compromise by working around our grammar descriptions.
</p>
</div>
</div>
<div id="outline-container-org4be7bb9" class="outline-4">
<h4 id="org4be7bb9"><span class="section-number-4">8.2.10</span> Precedence parsing?</h4>
<div class="outline-text-4" id="text-8-2-10">
<ul class="org-ul">
<li>1996 article "An Operator Precedence Parser for Standard Prolog Text" <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/(SICI)1097-024X(199607)26:7%3C763::AID-SPE33%3E3.0.CO;2-L">https://onlinelibrary.wiley.com/doi/abs/10.1002/(SICI)1097-024X(199607)26:7<763::AID-SPE33>3.0.CO;2-L</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org1708dee" class="outline-3">
<h3 id="org1708dee"><span class="section-number-3">8.3</span> Metainterpreter for left-recursive parsing?</h3>
<div class="outline-text-3" id="text-8-3">
<p>
"Parsing with left-recursive grammars"
<a href="https://www.metalevel.at/acomip/">https://www.metalevel.at/acomip/</a>
</p>
</div>
</div>
<div id="outline-container-org31aef73" class="outline-3">
<h3 id="org31aef73"><span class="section-number-3">8.4</span> Left-recursive parsing</h3>
<div class="outline-text-3" id="text-8-4">
<p>
2009
Direct Left-Recursive Parsing Expressing Grammars
<a href="https://www.semanticscholar.org/paper/Direct-Left-Recursive-Parsing-Expressing-Grammars-Tratt/b1e8309db5537fb15f51071fcdc39e139659ed15">https://www.semanticscholar.org/paper/Direct-Left-Recursive-Parsing-Expressing-Grammars-Tratt/b1e8309db5537fb15f51071fcdc39e139659ed15</a>
</p>

<p>
2008
Packrat Parsers Can Support Left Recursion
</p>

<p>
Naive recognizer + memoization
</p>

<p>
list_not_empty
</p>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">exp</span>(<span style="color: #a0522d;">S</span>) :- is_list(<span style="color: #a0522d;">S</span>), append(<span style="color: #a020f0;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a020f0;">[</span>0'+<span style="color: #a020f0;">]</span>,<span style="color: #a0522d;">C</span><span style="color: #a020f0;">]</span>,<span style="color: #a0522d;">S</span>), exp(<span style="color: #a0522d;">A</span>), exp(<span style="color: #a0522d;">C</span>).
</pre>
</div>

<p>
Consume before recursing?
</p>

<p>
We can't piggyback Prolog's unification for lambda calculus substitution,
because Prolog unifies same-named variables while lambda-calculus shadows same-named variables.
</p>

<p>
If the recursive call has smaller arguments than the parent call does, then the predicate should terminate.
</p>
</div>
</div>
<div id="outline-container-orgfc2a0fc" class="outline-3">
<h3 id="orgfc2a0fc"><span class="section-number-3">8.5</span> What</h3>
<div class="outline-text-3" id="text-8-5">
<p>
relational parsing with derivatives?
<a href="https://github.com/webyrd/relational-parsing-with-derivatives/blob/master/README.md">https://github.com/webyrd/relational-parsing-with-derivatives/blob/master/README.md</a>
</p>

<p>
1997 inconclusive discussion "Prolog Parser in Prolog"
<a href="https://dtai.cs.kuleuven.be/projects/ALP/newsletter/archive_93_96/net/grammars/parser.html">https://dtai.cs.kuleuven.be/projects/ALP/newsletter/archive_93_96/net/grammars/parser.html</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org9448c8f" class="outline-2">
<h2 id="org9448c8f"><span class="section-number-2">9</span> Theories</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-orga380548" class="outline-3">
<h3 id="orga380548"><span class="section-number-3">9.1</span> Relational-multidirectional-logic programming?</h3>
</div>
<div id="outline-container-org6260cbe" class="outline-3">
<h3 id="org6260cbe"><span class="section-number-3">9.2</span> Embedding Prolog/Haskell in Haskell/Prolog</h3>
<div class="outline-text-3" id="text-9-2">
</div>
<div id="outline-container-org96eedd4" class="outline-4">
<h4 id="org96eedd4"><span class="section-number-4">9.2.1</span> Embedding Prolog in Haskell</h4>
<div class="outline-text-4" id="text-9-2-1">
<ul class="org-ul">
<li>1999 article "Embedding Prolog in Haskell" <a href="https://pdfs.semanticscholar.org/7c46/5d25205830735d0a034532746b7243221eca.pdf">https://pdfs.semanticscholar.org/7c46/5d25205830735d0a034532746b7243221eca.pdf</a>
<ul class="org-ul">
<li>"We propose an embedding of logic programming into lazy functional programming
in which each predicate in a Prolog program becomes a Haskell function,
in such a way that both the declarative and the procedural reading of the Prolog predicate are preserved."</li>
</ul></li>
<li>1988 article "Towards functional programming in Prolog" <a href="ftp://obaluae.inf.puc-rio.br/pub/docs/Publications/88_AI_Furtado_SINPLAN.Not.pdf">ftp://obaluae.inf.puc-rio.br/pub/docs/Publications/88_AI_Furtado_SINPLAN.Not.pdf</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgdb8096d" class="outline-4">
<h4 id="orgdb8096d"><span class="section-number-4">9.2.2</span> Embedding Haskell in Prolog: Nobody is talking about this?</h4>
<div class="outline-text-4" id="text-9-2-2">
<p>
translate haskell to prolog
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/1932770/haskell-vs-prolog-comparison">https://stackoverflow.com/questions/1932770/haskell-vs-prolog-comparison</a></li>
<li><a href="https://github.com/COMS30106/slides">https://github.com/COMS30106/slides</a></li>
<li><a href="https://github.com/COMS30106/slides/blob/master/haskell2prolog.pdf">https://github.com/COMS30106/slides/blob/master/haskell2prolog.pdf</a></li>
</ul>

<p>
Prolog and Haskell are almost equally concise.
Prolog and Haskell are even in head/2 and tail/2.
Prolog beats Haskell in null/1 and reverse/2.
Haskell beats Prolog in length/2, sumList/2, and everything that has arithmetics where Prolog requires intermediate variable such as "N1 is N-1".
</p>
</div>
</div>
</div>
<div id="outline-container-org1289834" class="outline-3">
<h3 id="org1289834"><span class="section-number-3">9.3</span> How are Prolog and Lisp similar?</h3>
<div class="outline-text-3" id="text-9-3">
<ul class="org-ul">
<li>Both Prolog and Lisp have symbols and cons cells.
<ul class="org-ul">
<li>This is a Lisp cons cell: <code>(cons 'a 'b)</code> or <code>'(a . b)</code>.</li>
<li>This is the corresponding SWI-Prolog cons cell: <code>[a|b]</code> (the canonical form is <code>'[|]'(a,b)</code>).</li>
</ul></li>
<li>Both have macros.
<ul class="org-ul">
<li>Lisp has defmacro.</li>
<li>Prolog has term_expansion/2 and goal_expansion/2.</li>
</ul></li>
</ul>

<p>
I'd say Prolog = Lisp + unification + backtracking - lambda.
</p>
</div>
</div>

<div id="outline-container-org853cdaa" class="outline-3">
<h3 id="org853cdaa"><span class="section-number-3">9.4</span> Comparison between what is difficult in various programming languages</h3>
<div class="outline-text-3" id="text-9-4">
<ul class="org-ul">
<li>2014 presentation "That scripting language called Prolog" <a href="https://www.slideshare.net/SergeiWinitzki/prolog-talk">https://www.slideshare.net/SergeiWinitzki/prolog-talk</a>
<ul class="org-ul">
<li>It compares what is difficult in various programming languages.</li>
<li>It defines "declarative": 'Programming is "declarative" when <i>specifications are programs</i>.'
<ul class="org-ul">
<li>Slide 29: "declarative programming = creating a good DSL for your domain"</li>
</ul></li>
<li>Slide 24 compares SQL, Datalog, and Prolog.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgf71d684" class="outline-3">
<h3 id="orgf71d684"><span class="section-number-3">9.5</span> Comparison with other relational programming languages</h3>
<div class="outline-text-3" id="text-9-5">
<p>
Comparison with miniKanren:
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/28467011/what-are-the-main-technical-differences-between-prolog-and-minikanren-with-resp">https://stackoverflow.com/questions/28467011/what-are-the-main-technical-differences-between-prolog-and-minikanren-with-resp</a>
<ul class="org-ul">
<li>William E. Byrd's answer:
<ul class="org-ul">
<li>Prolog is practical; miniKanren is pure.</li>
<li>Prolog unification doesn't use occurs check; miniKanren unification uses occurs check.</li>
<li>Prolog uses depth-first search; miniKanren uses complete interleaving search.</li>
<li>'[&#x2026;] miniKanren is being used for research in "relational" programming.'</li>
<li>"Over time miniKanren has added more symbolic constraints, really becoming a symbolically-oriented Constraint Logic Programming language."</li>
<li>"There are other very interesting logic programming languages as well, such as Mercury, Curry, and Gödel, each of which has its own take on logic programming."</li>
</ul></li>
</ul></li>
</ul>

<p>
Mercury vs Prolog
</p>
<ul class="org-ul">
<li><a href="http://lambda-the-ultimate.org/node/890">http://lambda-the-ultimate.org/node/890</a></li>
<li><span class="timestamp-wrapper"><span class="timestamp">&lt;2018-10-21&gt; </span></span> "The Prolog to Mercury transition guide" <a href="https://www.mercurylang.org/information/doc-latest/transition_guide.pdf">https://www.mercurylang.org/information/doc-latest/transition_guide.pdf</a></li>
</ul>

<p>
SQL? Datalog?
</p>
</div>
</div>

<div id="outline-container-orgc9578c0" class="outline-3">
<h3 id="orgc9578c0"><span class="section-number-3">9.6</span> Two camps in programming</h3>
<div class="outline-text-3" id="text-9-6">
<p>
There are two camps in programming:
the bottom-up camp and the top-down camp.
</p>

<p>
The bottom-up camp starts from machines and goes up toward mathematics.
This camp produces Assembly, Fortran, Cobol, Pascal, C, C++, Go.
This camp produced fast but ugly implementations.
Haphazard incremental improvements.
</p>

<p>
The top-down camp starts from mathematics and goes down toward machines.
This camp produces Lisp, Scheme, Prolog, ML, Ocaml, Haskell, Coq, Idris, Agda, Lean.
This camp produced elegant but slow implementations.
Big design up front.
</p>

<p>
They seem to be converging to a middle ground: ugly and slow.
</p>

<p>
Why can't we get fast and elegant?
</p>
</div>
</div>
<div id="outline-container-org53b4b7c" class="outline-3">
<h3 id="org53b4b7c"><span class="section-number-3">9.7</span> "GOEDEL is intended to be a declarative successor to Prolog."</h3>
<div class="outline-text-3" id="text-9-7">
<p>
"GOEDEL is intended to be a declarative successor to Prolog."
<a href="https://www.cs.cmu.edu/afs/cs/project/ai-repository/ai/lang/prolog/impl/other/goedel/0.html">https://www.cs.cmu.edu/afs/cs/project/ai-repository/ai/lang/prolog/impl/other/goedel/0.html</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org1338566" class="outline-2">
<h2 id="org1338566"><span class="section-number-2">10</span> <span class="todo TODO">TODO</span> Half-baked things to shuffle around</h2>
<div class="outline-text-2" id="text-10">
<div id="text-table-of-contents">
<ul>
<li><a href="#org931ca1c">10.1. Defining your own operators</a></li>
<li><a href="#orgda69842">10.2. Meta-programming</a></li>
<li><a href="#org8eef091">10.3. Use clpfd #=/2 instead of is/2?</a></li>
<li><a href="#orgaba238f">10.4. Difference lists</a></li>
<li><a href="#orgd6b7309">10.5. What? 99 Prolog problems?</a></li>
<li><a href="#org4b775c7">10.6. Iterative deepening search with length/1</a></li>
<li><a href="#org71915a3">10.7. <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-10-20&gt; </span></span> How do we make sense of this counterintuitive module syntax?</a></li>
<li><a href="#org1701963">10.8. Discover the wonderful world of Prolog / logic programming / relational programming</a>
<ul>
<li><a href="#org9ba8c58">10.8.1. Symbolic AI is the easiest AI approach.</a></li>
<li><a href="#orge2c5e32">10.8.2. Dreams</a></li>
</ul>
</li>
<li><a href="#org56b9135">10.9. Reminder for those who already know</a></li>
<li><a href="#orge4f7af2">10.10. Making compilers</a></li>
<li><a href="#org6fe9637">10.11. Declarative programming languages</a></li>
<li><a href="#org3c37b19">10.12. Speculative</a>
<ul>
<li><a href="#org9f4de94">10.12.1. Fast logic programming?</a></li>
<li><a href="#orgedb661a">10.12.2. Lambda-prolog?</a></li>
</ul>
</li>
<li><a href="#org8864f0c">10.13. Resources</a>
<ul>
<li><a href="#org3358571">10.13.1. For beginners</a></li>
<li><a href="#orge83f5ba">10.13.2. Not for beginners</a></li>
</ul>
</li>
<li><a href="#org5412738">10.14. What?</a>
<ul>
<li><a href="#orge795ae4">10.14.1. P# translates Prolog to C#.</a></li>
<li><a href="#org52d5d28">10.14.2. "Real World Programming in SWI-Prolog"</a></li>
<li><a href="#org1975287">10.14.3. "Frequently Asked Questions for ##Prolog"</a></li>
<li><a href="#org3a7676e">10.14.4. What are these trying to say?</a></li>
<li><a href="#org4a50502">10.14.5. Books?</a></li>
</ul>
</li>
<li><a href="#org8991268">10.15. <span class="todo TODO">TODO</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-30&gt; </span></span> Prolog needs static checking like Erlang Dialyzer.</a></li>
</ul>
</div>
</div>
<div id="outline-container-org931ca1c" class="outline-3">
<h3 id="org931ca1c"><span class="section-number-3">10.1</span> Defining your own operators</h3>
<div class="outline-text-3" id="text-10-1">
<ul class="org-ul">
<li><code>:- op(Precedence, Type, Name)</code></li>
</ul>
</div>
</div>
<div id="outline-container-orgda69842" class="outline-3">
<h3 id="orgda69842"><span class="section-number-3">10.2</span> Meta-programming</h3>
<div class="outline-text-3" id="text-10-2">
<ul class="org-ul">
<li>To define 'macros', use <code>term_expansion</code> or <code>goal_expansion</code>.</li>
</ul>
</div>
</div>
<div id="outline-container-org8eef091" class="outline-3">
<h3 id="org8eef091"><span class="section-number-3">10.3</span> Use clpfd #=/2 instead of is/2?</h3>
<div class="outline-text-3" id="text-10-3">
<p>
But it's good to have minimal dependencies.
</p>
</div>
</div>
<div id="outline-container-orgaba238f" class="outline-3">
<h3 id="orgaba238f"><span class="section-number-3">10.4</span> Difference lists</h3>
<div class="outline-text-3" id="text-10-4">
<ul class="org-ul">
<li>Who invented difference lists when?</li>
</ul>

<p>
A "difference list" is a term of the form <code>A - B</code> where <code>A</code> is a list and <code>B</code> is a list.
</p>

<p>
A difference list represents a list.
</p>

<p>
The difference list <code>A - []</code> represents the list <code>A</code>.
</p>

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Difference_list">https://en.wikipedia.org/wiki/Difference_list</a></li>
<li><a href="https://en.wikibooks.org/wiki/Prolog/Difference_Lists">https://en.wikibooks.org/wiki/Prolog/Difference_Lists</a>
<ul class="org-ul">
<li>Difference list has constant-time append.
Ordinary list has linear-time append.</li>
</ul></li>
<li><a href="https://wiki.haskell.org/Difference_list">https://wiki.haskell.org/Difference_list</a>
<ul class="org-ul">
<li>"Whether this kind of difference list is more efficient than another list representations depends on usage patterns."</li>
</ul></li>
<li><a href="http://homepages.inf.ed.ac.uk/pbrna/prologbook/node180.html">http://homepages.inf.ed.ac.uk/pbrna/prologbook/node180.html</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgd6b7309" class="outline-3">
<h3 id="orgd6b7309"><span class="section-number-3">10.5</span> What? 99 Prolog problems?</h3>
<div class="outline-text-3" id="text-10-5">
<ul class="org-ul">
<li>99 Prolog problems <a href="http://www.ic.unicamp.br/~meidanis/courses/problemas-prolog/">http://www.ic.unicamp.br/~meidanis/courses/problemas-prolog/</a></li>
</ul>
</div>
</div>
<div id="outline-container-org4b775c7" class="outline-3">
<h3 id="org4b775c7"><span class="section-number-3">10.6</span> Iterative deepening search with length/1</h3>
<div class="outline-text-3" id="text-10-6">
<p>
Prolog uses depth-first search.
It isn't complete.
(What does that mean?)
</p>

<p>
If you have a query <code>goal(List)</code> where <code>List</code> is a list,
then you can query <code>length(List, _), goal(List)</code> to make the search complete.
</p>

<p>
<a href="https://en.wikibooks.org/wiki/Prolog/Search_techniques">https://en.wikibooks.org/wiki/Prolog/Search_techniques</a>
</p>
</div>
</div>
<div id="outline-container-org71915a3" class="outline-3">
<h3 id="org71915a3"><span class="section-number-3">10.7</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-10-20&gt; </span></span> How do we make sense of this counterintuitive module syntax?</h3>
<div class="outline-text-3" id="text-10-7">
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/42399020/how-to-get-a-listing-of-a-specific-knowledge-base">https://stackoverflow.com/questions/42399020/how-to-get-a-listing-of-a-specific-knowledge-base</a></li>
</ul>
</div>
</div>
<div id="outline-container-org1701963" class="outline-3">
<h3 id="org1701963"><span class="section-number-3">10.8</span> Discover the wonderful world of Prolog / logic programming / relational programming</h3>
<div class="outline-text-3" id="text-10-8">
</div>
<div id="outline-container-org9ba8c58" class="outline-4">
<h4 id="org9ba8c58"><span class="section-number-4">10.8.1</span> Symbolic AI is the easiest AI approach.</h4>
<div class="outline-text-4" id="text-10-8-1">
<ul class="org-ul">
<li>Connectionist AI (neural networks) excels at tasks that are difficult to describe in formal logic.</li>
<li>Symbolic AI (Prolog) is much more understandable and predictable than connectionist AI.
<ul class="org-ul">
<li>Understanding connectionist AI requires probability, statistics, and real analysis.</li>
</ul></li>
<li>Why not both?
2017 article "SLDR-DL: A Framework for SLD-Resolution with Deep Learning" <a href="https://arxiv.org/pdf/1705.02210.pdf">https://arxiv.org/pdf/1705.02210.pdf</a>?</li>
</ul>
</div>
</div>
<div id="outline-container-orge2c5e32" class="outline-4">
<h4 id="orge2c5e32"><span class="section-number-4">10.8.2</span> Dreams</h4>
<div class="outline-text-4" id="text-10-8-2">
<ul class="org-ul">
<li>offload/scale/formalize thinking/cognition</li>
<li>transform reasoning into data entry</li>
<li>brain prosthetics; cognitive prosthetics</li>
<li>Leibniz, "Let us calculate!", calculus ratiocinator
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Calculus_ratiocinator">https://en.wikipedia.org/wiki/Calculus_ratiocinator</a></li>
<li><a href="https://publicdomainreview.org/2016/11/10/let-us-calculate-leibniz-llull-and-computational-imagination/">https://publicdomainreview.org/2016/11/10/let-us-calculate-leibniz-llull-and-computational-imagination/</a></li>
</ul></li>
<li>probabilistic logic programming</li>
<li><a href="https://softwareengineering.stackexchange.com/questions/275680/the-dream-of-declarative-programming">https://softwareengineering.stackexchange.com/questions/275680/the-dream-of-declarative-programming</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org56b9135" class="outline-3">
<h3 id="org56b9135"><span class="section-number-3">10.9</span> Reminder for those who already know</h3>
<div class="outline-text-3" id="text-10-9">
<p>
Elucidating
<a href="https://en.wikipedia.org/wiki/Prolog_syntax_and_semantics">https://en.wikipedia.org/wiki/Prolog_syntax_and_semantics</a>
</p>
</div>
</div>
<div id="outline-container-orge4f7af2" class="outline-3">
<h3 id="orge4f7af2"><span class="section-number-3">10.10</span> Making compilers</h3>
<div class="outline-text-3" id="text-10-10">
<ul class="org-ul">
<li><a href="https://www.reddit.com/r/ProgrammingLanguages/comments/9em9jf/future_directions_for_optimizing_compilers/">https://www.reddit.com/r/ProgrammingLanguages/comments/9em9jf/future_directions_for_optimizing_compilers/</a>
<ul class="org-ul">
<li>"Future Directions for Optimizing Compilers" <a href="https://arxiv.org/abs/1809.02161">https://arxiv.org/abs/1809.02161</a></li>
</ul></li>
</ul>

<p>
"Universal-transpiler" may be similar to what we want.
</p>

<ul class="org-ul">
<li>"Universal-transpiler"
<ul class="org-ul">
<li><a href="https://github.com/jarble/transpiler">https://github.com/jarble/transpiler</a>
<ul class="org-ul">
<li>it also has links to similar projects</li>
</ul></li>
<li><a href="http://www.swi-prolog.org/pack/list?p=transpiler">http://www.swi-prolog.org/pack/list?p=transpiler</a></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org6fe9637" class="outline-3">
<h3 id="org6fe9637"><span class="section-number-3">10.11</span> Declarative programming languages</h3>
<div class="outline-text-3" id="text-10-11">
<p>
<a href="http://www.cse.chalmers.se/~oloft/Papers/wm96/node2.html">Declarative Programming Languages</a>, functional logic programming, two ways it is done (narrowing and residuation);
definitional programming, GCLA language (separate definition and control)
</p>

<ul class="org-ul">
<li>1995, "Functional Logic Programming in GCLA", <a href="http://www.cse.chalmers.se/~oloft/Papers/wm95.pdf">pdf</a></li>
</ul>
</div>
</div>
<div id="outline-container-org3c37b19" class="outline-3">
<h3 id="org3c37b19"><span class="section-number-3">10.12</span> Speculative</h3>
<div class="outline-text-3" id="text-10-12">
</div>
<div id="outline-container-org9f4de94" class="outline-4">
<h4 id="org9f4de94"><span class="section-number-4">10.12.1</span> Fast logic programming?</h4>
<div class="outline-text-4" id="text-10-12-1">
<ul class="org-ul">
<li><a href="https://www.reddit.com/r/ProgrammingLanguages/comments/9fgv3v/can_logic_programming_execute_as_fast_as/">https://www.reddit.com/r/ProgrammingLanguages/comments/9fgv3v/can_logic_programming_execute_as_fast_as/</a>
<ul class="org-ul">
<li><a href="https://www.info.ucl.ac.be/~pvr/Peter.thesis/Peter.thesis.html">https://www.info.ucl.ac.be/~pvr/Peter.thesis/Peter.thesis.html</a></li>
</ul></li>
<li><a href="https://stackoverflow.com/questions/23711790/comparision-of-abstract-machines-for-execution-of-prolog">https://stackoverflow.com/questions/23711790/comparision-of-abstract-machines-for-execution-of-prolog</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgedb661a" class="outline-4">
<h4 id="orgedb661a"><span class="section-number-4">10.12.2</span> Lambda-prolog?</h4>
<div class="outline-text-4" id="text-10-12-2">
<ul class="org-ul">
<li>lambda-prolog <a href="http://www.lix.polytechnique.fr/~dale/lProlog/">http://www.lix.polytechnique.fr/~dale/lProlog/</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org8864f0c" class="outline-3">
<h3 id="org8864f0c"><span class="section-number-3">10.13</span> Resources</h3>
<div class="outline-text-3" id="text-10-13">
</div>
<div id="outline-container-org3358571" class="outline-4">
<h4 id="org3358571"><span class="section-number-4">10.13.1</span> For beginners</h4>
</div>
<div id="outline-container-orge83f5ba" class="outline-4">
<h4 id="orge83f5ba"><span class="section-number-4">10.13.2</span> Not for beginners</h4>
<div class="outline-text-4" id="text-10-13-2">
<ul class="org-ul">
<li>1990 book "The craft of Prolog" by Richard A. O'Keefe
<ul class="org-ul">
<li>from the preface:
"There are a lot of introductory Prolog books around.
This is not one of them.
Think of it as "second steps in Prolog".
If you have already read one of the introductory books, if you have taken an introductory course on Prolog, if you have written one or two Prolog programs, and if you are wondering why it is still hard to writegood Prolog programs, this book is meant to help you.
The purpose of the book is to show you how you can write Prolog programs that work, that don't take an unreasonable amount of time, and that are clean enough to show to your friends."</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5412738" class="outline-3">
<h3 id="org5412738"><span class="section-number-3">10.14</span> What?</h3>
<div class="outline-text-3" id="text-10-14">
</div>
<div id="outline-container-orge795ae4" class="outline-4">
<h4 id="orge795ae4"><span class="section-number-4">10.14.1</span> P# translates Prolog to C#.</h4>
<div class="outline-text-4" id="text-10-14-1">
<p>
<a href="https://pdfs.semanticscholar.org/12ec/568a6583d3d66b6821f28269f06937a9f2eb.pdf">https://pdfs.semanticscholar.org/12ec/568a6583d3d66b6821f28269f06937a9f2eb.pdf</a>
</p>
</div>
</div>
<div id="outline-container-org52d5d28" class="outline-4">
<h4 id="org52d5d28"><span class="section-number-4">10.14.2</span> "Real World Programming in SWI-Prolog"</h4>
<div class="outline-text-4" id="text-10-14-2">
<p>
<a href="http://www.pathwayslms.com/swipltuts/index.html">http://www.pathwayslms.com/swipltuts/index.html</a>
</p>
</div>
</div>
<div id="outline-container-org1975287" class="outline-4">
<h4 id="org1975287"><span class="section-number-4">10.14.3</span> "Frequently Asked Questions for ##Prolog"</h4>
<div class="outline-text-4" id="text-10-14-3">
<p>
<a href="http://www.pathwayslms.com/swipltuts/student/">http://www.pathwayslms.com/swipltuts/student/</a>
</p>
</div>
</div>
<div id="outline-container-org3a7676e" class="outline-4">
<h4 id="org3a7676e"><span class="section-number-4">10.14.4</span> What are these trying to say?</h4>
<div class="outline-text-4" id="text-10-14-4">
<ul class="org-ul">
<li>1991 article "Logic Programming, Functional Programming, and Inductive Definitions" <a href="https://www.cl.cam.ac.uk/techreports/UCAM-CL-TR-205.pdf">https://www.cl.cam.ac.uk/techreports/UCAM-CL-TR-205.pdf</a>
<ul class="org-ul">
<li>"The unification of logic and functional programming, like the Holy Grail, is sought by countless people"</li>
<li>"More generally, we suggest that the traditional paradigm — logic programming as first-order logic — is seriously out of step with practice.
We offer an alternative paradigm. We view the logic program as an <i>inductive definition</i> of sets and relations."</li>
<li>"To justify the Closed World Assumption, we propose that logic programs should be viewed as inductive definitions, not as first-order theories.
Some people refuse to abandon the dream of programming in first-order logic.
But we have to ask whether this dream is possible — even whether it is desirable.
The first-order paradigm does not deal adequately with negation in databases, and seems to be an unreliable guide in research on program correctness and language design.
Inductive definitions are more fundamental than first-order logic, and perhaps easier to understand."</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org4a50502" class="outline-4">
<h4 id="org4a50502"><span class="section-number-4">10.14.5</span> Books?</h4>
<div class="outline-text-4" id="text-10-14-5">
<ul class="org-ul">
<li>1995 book "Prolog Programming in Depth" <a href="http://www.lsv.fr/~reichert/Enseignement/2012/PPL/Prolog_Programming_In_Depth.pdf">http://www.lsv.fr/~reichert/Enseignement/2012/PPL/Prolog_Programming_In_Depth.pdf</a>
<ul class="org-ul">
<li>1.16 Styles of encoding knowledge, p. 28
<ul class="org-ul">
<li>parent, male, female vs. father, mother</li>
<li>"Which style is computationally more efficient depends on the kinds of queries to be answered."</li>
<li>"Unlike other knowledge representation languages, Prolog does not force the knowledge base builder to state information in a particular logical style.
Information can be entered in whatever form is most convenient, and then appropriate rules can be added to retrieve the information in a different form."</li>
<li>"We could use a 'data-record' format to encode the family tree like [person(Name,Sex,Father,Mother)]"
<ul class="org-ul">
<li>"The only advantage of this style is that the multi-argument facts are often easy to generate from conventional databases,
by simply printing out the data in a format that conforms to Prolog syntax."</li>
</ul></li>
</ul></li>
<li>5.12 Grand Finale: Reading a Lotus Spreadsheet, p. 148</li>
<li>5.13 Language and Metalanguage, p. 153
<ul class="org-ul">
<li>"A Prolog program can extend and modify the inference engine that controls program execution.
Thus, the language can change itself in ways that go beyond superficial syntax."
<ul class="org-ul">
<li>Really? How?</li>
</ul></li>
</ul></li>
<li>5.17 Intensional and Extensional Queries, p. 159</li>
<li>5.19 Giving Meaning to Operators, p. 163
<ul class="org-ul">
<li>"How to make the ampersand mean 'and' in Prolog"</li>
</ul></li>
<li>5.20 Prolog in Prolog, p. 165
<ul class="org-ul">
<li>"Meta-interpreter for Prolog"</li>
</ul></li>
<li>5.21 Extending the inference engine, p. 167
<ul class="org-ul">
<li>biconditionals</li>
</ul></li>
<li>11 Defeasible Prolog, p. 347
<ul class="org-ul">
<li>11.1 Nonmonotonic reasoning and Prolog, p. 347
<ul class="org-ul">
<li>"If our reasoning is monotonic, the set of conclusions we draw from the information we have only gets larger as we get more and more information.
Once we reach a conclusion, no additional information will cause us to reject it.
When our reasoning is nonmonotonic, we may reject an earlier conclusion on the basis of new information."</li>
<li>"Human reasoning is notoriously nonmonotonic. We make plans based on what we expect to happen,
but we constantly revise our expectations, and our plans, as events unfold."</li>
<li>"The Prolog inference engine is nonmonotonic because of the way it handles negation."</li>
<li>Why is "defeasible" not spelled "defeatable"?</li>
</ul></li>
<li>11.2 New syntax for defeasible reasoning, p. 348
<ul class="org-ul">
<li>"Although Prolog can perform some kinds of nonmonotonic reasoning, Prolog rules are not defeasible."</li>
<li>"Some instances of defeasible reasoning cannot be reproduced in ordinary Prolog."</li>
<li>"What we need is a new way to represent defeasible rules and presumptions and
an inference engine that knows how to use them. We also need a negation operator
that is different from negation-as-failure so we can represent rules that tell us
when something is positively not the case rather than just that we cannot <i>prove</i> that it is the case.
These negative rules are needed to tell us when we have an exception to a defeasible rule, but they are desirable in their own right as well."
<ul class="org-ul">
<li>The second sentence is too long.</li>
</ul></li>
</ul></li>
<li>(I haven't read it.)</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org8991268" class="outline-3">
<h3 id="org8991268"><span class="section-number-3">10.15</span> <span class="todo TODO">TODO</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-11-30&gt; </span></span> Prolog needs static checking like Erlang Dialyzer.</h3>
<div class="outline-text-3" id="text-10-15">
<p>
SWI-Prolog has check library?
</p>

<p>
Is there a Prolog totality/determinism checker?
</p>

<p>
Prolog typechecking is vital to prevent stupid mistakes in a large knowledge base?
</p>

<p>
1997 inconclusive discussion "Prolog Type Checker"
<a href="https://dtai.cs.kuleuven.be/projects/ALP/newsletter/archive_93_96/net/typing/types.html">https://dtai.cs.kuleuven.be/projects/ALP/newsletter/archive_93_96/net/typing/types.html</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgd82689a" class="outline-2">
<h2 id="orgd82689a"><span class="section-number-2">11</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-05&gt; </span></span> How to present Prolog to newcomers</h2>
<div class="outline-text-2" id="text-11">
<p>
This is a draft.
These are slides.
Assume that one section is one slide.
</p>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0f768fc">11.1. The coolest thing about Prolog: relational/multidirectional programming</a></li>
<li><a href="#org86cae08">11.2. Write once, run in several directions</a></li>
<li><a href="#org042249b">11.3. Another declarative example: palindromes</a></li>
<li><a href="#org46dc745">11.4. What</a></li>
</ul>
</div>
</div>
<div id="outline-container-org0f768fc" class="outline-3">
<h3 id="org0f768fc"><span class="section-number-3">11.1</span> The coolest thing about Prolog: relational/multidirectional programming</h3>
<div class="outline-text-3" id="text-11-1">
<p>
The Prolog phrase "append(A, B, C)" means the English clause "appending list A and list B produces list C".
</p>

<p>
Here we show some ways of calling append/3.
Here we show how to read Prolog fragments in English.
</p>

<p>
"Prolog, does appending [1] and [2,3] produce [1,2,3]?"
</p>
<pre class="example">
?- append([1], [2,3], [1,2,3]).
true.
</pre>

<p>
"Prolog, what does appending [1] and [2,3] produce?"
</p>
<pre class="example">
?- append([1], [2,3], C).
C = [1,2,3].
</pre>

<p>
"Prolog, what list do I have to append to [1] in order to produce [1,2,3]?"
</p>
<pre class="example">
?- append([1], B, [1,2,3]).
B = [2,3].
</pre>

<p>
"Prolog, what list produces [1,2,3] when appended with [2,3]?"
</p>
<pre class="example">
?- append(A, [2,3], [1,2,3]).
A = [1] ;
false.
</pre>

<p>
"Prolog, does appending [1] and [2] produce [1,2,3]?"
</p>
<pre class="example">
?- append([1], [2], [1,2,3]).
false.
</pre>

<p>
We press ";" to ask Prolog to find another solution.
Prolog prints "false" when it doesn't find any more solutions.
</p>

<p>
"Prolog, what list produces [1] when appended with itself?"
</p>
<pre class="example">
?- append(A, A, [1]).
false.
</pre>

<p>
"Prolog, what list produces [1,2,1,2] when appended with itself?"
</p>

<p>
"[1,2]."
</p>

<p>
"Is there any other such list?"
</p>

<p>
"No."
</p>
<pre class="example">
?- append(A, A, [1,2,1,2]).
A = [1,2] ;
false.
</pre>

<p>
"Prolog, what two lists A and B produce [1,2,3] when appended?"
</p>
<pre class="example">
append(A, B, [1,2,3]).
A = [], B = [1,2,3] ;
A = [1], B = [2,3] ;
A = [1,2], B = [3] ;
A = [1,2,3], B = [] ;
false.
</pre>
</div>
</div>
<div id="outline-container-org86cae08" class="outline-3">
<h3 id="org86cae08"><span class="section-number-3">11.2</span> Write once, run in several directions</h3>
<div class="outline-text-3" id="text-11-2">
<p>
The Prolog code for append/3 seems simple.
We can see in SWI-Prolog library/lists.pl <a href="http://www.swi-prolog.org/pldoc/doc/_SWI_/library/lists.pl?show=src#append/3">append/3</a> (I renamed some variables to improve readability):
</p>
<pre class="example">
append([], B, B).
append([H|A], B, [H|C]) :- append(A, B, C).
</pre>

<p>
Haskell seems simpler:
</p>
<pre class="example">
append [] b = b
append (h : a) b = h : append a b
</pre>

<p>
But those fragments differ.
Prolog gives us the ability to run the code in other directions.
There are 3 parameters; each parameter is either bound or unbound; thus there are 2^3 = 8 possible directions.
If we don't use a logic programming library in Haskell,
the Prolog predicate translates to at least 5 Haskell functions,
for the 5 ways of using append/3 we saw earlier.
If we use a logic programming library in Haskell, the definition wouldn't be as concise as the Prolog definition.
</p>

<p>
We write append/3 once, and we get at least five ways of calling it.
</p>

<p>
But this beautiful dream crumbles outside <i>pure</i> logic programming.
</p>
</div>
</div>
<div id="outline-container-org042249b" class="outline-3">
<h3 id="org042249b"><span class="section-number-3">11.3</span> Another declarative example: palindromes</h3>
<div class="outline-text-3" id="text-11-3">
<p>
"A list L is a palindrome iff L is its own reverse."
</p>
<pre class="example">
palindrome(L) :- reverse(L, L).
</pre>
</div>
</div>
<div id="outline-container-org46dc745" class="outline-3">
<h3 id="org46dc745"><span class="section-number-3">11.4</span> What</h3>
<div class="outline-text-3" id="text-11-4">
<p>
2015
Approaches for Learning Prolog Programming
<a href="https://www.tandfonline.com/doi/full/10.11120/ital.2007.06040088">https://www.tandfonline.com/doi/full/10.11120/ital.2007.06040088</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgc47dbd3" class="outline-2">
<h2 id="orgc47dbd3"><span class="section-number-2">12</span> Prolog community</h2>
<div class="outline-text-2" id="text-12">
<p>
Where is the community?
</p>
<ul class="org-ul">
<li>IRC requires login.
Where is the chat log?</li>
<li>SWI-Prolog Google Groups (web-browsable mailing list) <a href="https://groups.google.com/forum/#!forum/swi-prolog">https://groups.google.com/forum/#!forum/swi-prolog</a></li>
<li>comp.lang.prolog <a href="https://groups.google.com/forum/#!forum/comp.lang.prolog">https://groups.google.com/forum/#!forum/comp.lang.prolog</a></li>
<li>StackOverflow tag swi-prolog <a href="https://stackoverflow.com/questions/tagged/swi-prolog">https://stackoverflow.com/questions/tagged/swi-prolog</a></li>
<li>SWI-Prolog roadmap <a href="https://github.com/SWI-Prolog/roadmap">https://github.com/SWI-Prolog/roadmap</a></li>
<li><a href="http://www.swi-prolog.org/Links.html">http://www.swi-prolog.org/Links.html</a></li>
<li><a href="https://www.reddit.com/r/prolog/">https://www.reddit.com/r/prolog/</a></li>
<li><a href="http://prolog-commons.org">http://prolog-commons.org</a></li>
</ul>

<p>
SWI-Prolog packs need curation/vetting/testimony/promotion.
</p>
</div>
</div>
<div id="outline-container-org75682ec" class="outline-2">
<h2 id="org75682ec"><span class="section-number-2">13</span> <span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-10&gt; </span></span> Smart editors are dangerous! Arbitrary code execution!</h2>
<div class="outline-text-2" id="text-13">
<p>
I use the VSCode extension VSC-Prolog, but I disabled its linter after I realize that it may execute arbitrary code.
I only use its syntax highlighting and documentation popup feature.
Fortunately the plugin is still very useful without the linter.
</p>

<p>
Imagine this file:
</p>
<pre class="example">
% doom.pro
:- shell('touch ~/doomed').
</pre>

<p>
I loaded that file into VSCode, and a file named <code>doomed</code> appeared in my home directory.
I'd be really doomed if someone replaced that command with 'rm -rf /'.
</p>

<p>
Perhaps we should make a whitelist of allowed directives?
</p>

<p>
Vim suffers the same thing with its modelines. I think it's now disabled by default?
</p>

<p>
However, this doesn't affect you if you only open what you write yourself, and never open a criminal's Prolog code.
But this is an accident waiting to happen!
</p>

<p>
I reported this:
</p>
<ul class="org-ul">
<li><a href="https://github.com/arthwang/vsc-prolog/issues/31">https://github.com/arthwang/vsc-prolog/issues/31</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgddba27b" class="outline-2">
<h2 id="orgddba27b"><span class="section-number-2">14</span> Ramble</h2>
<div class="outline-text-2" id="text-14">
</div>
<div id="outline-container-orgc32225a" class="outline-3">
<h3 id="orgc32225a"><span class="section-number-3">14.1</span> Dense?</h3>
<div class="outline-text-3" id="text-14-1">
<p>
When writing Prolog code, I write much more documentation than code.
Is this bad?
Are self-describing programs possible?
</p>
</div>
</div>
<div id="outline-container-orgffedd9f" class="outline-3">
<h3 id="orgffedd9f"><span class="section-number-3">14.2</span> Purifying Prolog?</h3>
<div class="outline-text-3" id="text-14-2">
<ul class="org-ul">
<li>assert/2 can be replaced with two parameters (state and next-state).</li>
</ul>
</div>
</div>
<div id="outline-container-orga503e60" class="outline-3">
<h3 id="orga503e60"><span class="section-number-3">14.3</span> Ramble: Translating Prolog to native code?</h3>
<div class="outline-text-3" id="text-14-3">
<p>
The idea is to relate a Prolog predicate and a C routine.
</p>

<p>
Every disjunct translates into one routine / basic block.
</p>

<p>
The current goal relates to the instruction pointer.
</p>

<p>
Proving a goal ~ calling a routine
Conjunction of phrase ~ sequence of call
Disjunction of clause ~ speculative parallel execution, for pure predicates only
</p>

<p>
p(A),q(A) can be optimized from O(PQ) time to O(max(P,Q)) time if we order the storage.
</p>

<p>
Intermediate language
Compile by abstract interpretation
unify(Var1,Var2)
frame(Instrs)
prove((A,B)) :- prove(A), prove(B).
</p>

<p>
A variable in clause head is implicitly universally quantified.
A free variable in clause body is implicitly existentially quantified.
</p>

<p>
What is the relationship between logic programming, relational programming, logic, Horn clauses, theorem proving, searching, and backtracking?
</p>


<p>
Prolog just-in-time compilation
compile(GoalAst, Fragment)
call(Fragment)
Execute?
</p>

<p>
Compile prolog predicates, limited to u32 parameters.
Normalize p(a). to p(A) :- A=a.
If first arg is bound, use index.
Else sequential scan.
Subset of prolog.
Focus on translation for performance.
No dynamic predicates.
Generate a c func for some predicate direction.
plus_bbb
plus_bbu
&#x2026;
plus_uuu
Add a state parameter for nondet predicate. (Next clause index to try). Initial value 0.
p(A,B) :- B is A + 1.
</p>

<p>
Libjit vs llvm?
mmap and mprotect
</p>

<p>
father_child(F,C)
</p>

<p>
bool father_child(termref F, termref C) {
}
</p>
</div>
</div>
<div id="outline-container-orgbf0261b" class="outline-3">
<h3 id="orgbf0261b"><span class="section-number-3">14.4</span> Prolog should use three-valued logic?</h3>
<div class="outline-text-3" id="text-14-4">
<p>
Suppose that both A and B are unbound variables.
Then:
</p>
<ul class="org-ul">
<li><code>A =</code> B= is unknown, but it's false in Prolog.</li>
<li><code>A \</code> B= is unknown, not it's false in Prolog.</li>
</ul>

<p>
In that case, it is better for Prolog to throw an instantiation_error instead of failing.
</p>

<p>
Three-valued logic would simplify and elegantize constraint logic programming?
</p>
</div>
</div>
<div id="outline-container-orgf1b949e" class="outline-3">
<h3 id="orgf1b949e"><span class="section-number-3">14.5</span> Equalities and equivalences?</h3>
<div class="outline-text-3" id="text-14-5">
<p>
What is the difference: <code>, ~==~, ~</code>:=~, is
</p>
</div>
</div>
<div id="outline-container-org4c7e9cf" class="outline-3">
<h3 id="org4c7e9cf"><span class="section-number-3">14.6</span> Implicit state language?</h3>
<div class="outline-text-3" id="text-14-6">
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">interpret</span>(state(<span style="color: #a0522d;">S</span>), <span style="color: #a0522d;">S</span>, <span style="color: #a0522d;">S</span>).
<span style="color: #0000ff;">interpret</span>(state_set(<span style="color: #a0522d;">S</span>), <span style="color: #a0522d;">_</span>, <span style="color: #a0522d;">S</span>).
<span style="color: #0000ff;">interpret</span>((<span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>),<span style="color: #a0522d;">S0</span>,<span style="color: #a0522d;">S2</span>) :- interpret(<span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">S0</span>,<span style="color: #a0522d;">S1</span>), interpret(<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">S1</span>,<span style="color: #a0522d;">S2</span>).
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb9488a6" class="outline-3">
<h3 id="orgb9488a6"><span class="section-number-3">14.7</span> Devops, dependency, build system?</h3>
<div class="outline-text-3" id="text-14-7">
<p>
Prolog marelle, Haskell shake, build system?
</p>

<ul class="org-ul">
<li><a href="http://quietlyamused.org/blog/2013/11/09/marelle-for-devops/">http://quietlyamused.org/blog/2013/11/09/marelle-for-devops/</a></li>
<li>"there is already a configuration management language that is strongly influenced by Prolog and logic programming - Puppet - and the results are not that great"
<a href="https://news.ycombinator.com/item?id=6701362">https://news.ycombinator.com/item?id=6701362</a>
<ul class="org-ul">
<li>really?</li>
<li>The computer can't read your mind.
You lie to the computer, it does what you told it to do.
Don't blame the computer for your failing to tell the computer everything it needs to do the job.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org36b560b" class="outline-3">
<h3 id="org36b560b"><span class="section-number-3">14.8</span> Modules?</h3>
<div class="outline-text-3" id="text-14-8">
<p>
Prolog syntax for use_module is documented in <a href="http://www.swi-prolog.org/FAQ/LoadLibrary.html">LoadLibrary FAQ</a>, not in the documentation for use_module/1.
The <code>library</code> alias is defined in file_search_path/2.
</p>

<p>
swipl: use <code>-s</code> instead of <code>-l</code>
<a href="http://www.swi-prolog.org/pldoc/man?section=cmdline">http://www.swi-prolog.org/pldoc/man?section=cmdline</a>
</p>
</div>
</div>
<div id="outline-container-orge5fb495" class="outline-3">
<h3 id="orge5fb495"><span class="section-number-3">14.9</span> Prolog revival attempt</h3>
<div class="outline-text-3" id="text-14-9">
<ul class="org-ul">
<li><a href="https://github.com/Web-Prolog/swi-web-prolog">https://github.com/Web-Prolog/swi-web-prolog</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgc87bbd4" class="outline-3">
<h3 id="orgc87bbd4"><span class="section-number-3">14.10</span> Declarative programming? Function arguments?</h3>
<div class="outline-text-3" id="text-14-10">
<p>
The idea:
A relation's parameter can be a unifiable logic variable or a beta-reducible lambda expression.
</p>
<pre class="example">
is_one(A : exp(integer)) :- A = 1.
?- is_one(0+1).
true.

f(A : var(integer)) :- A = 1.
?- f(0+1).
false.
</pre>

<p>
TODO
Compare various approaches such as LambdaProlog, Mercury, and Curry.
</p>
</div>
</div>
<div id="outline-container-org3c20b91" class="outline-3">
<h3 id="org3c20b91"><span class="section-number-3">14.11</span> What</h3>
<div class="outline-text-3" id="text-14-11">
<p>
Writing a Prolog knowledge base is an exercise in philosophy, especially ontology.
We ask these all the time:
</p>
<ul class="org-ul">
<li>What exist?</li>
<li>How do they relate?</li>
<li>How do we model all those entities and relationships in Prolog for not-too-slow computation?</li>
</ul>

<p>
Gerrit has prolog?
<a href="https://gerrit-review.googlesource.com/Documentation/prolog-cookbook.html">https://gerrit-review.googlesource.com/Documentation/prolog-cookbook.html</a>
</p>

<p>
Prolog web browser, prolog gui, prolog operating system, prolog system f, normal-order lambda calculus, Haskell in prolog
</p>

<p>
Prolog to glue Haskell, racket, typescript
</p>

<p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2018-12-06&gt;</span></span>
Prolog is the most ideal metalanguage I have found so far.
</p>

<p>
"adding a search Path in SWI prolog"
<a href="https://stackoverflow.com/questions/6334050/adding-a-search-path-in-swi-prolog">https://stackoverflow.com/questions/6334050/adding-a-search-path-in-swi-prolog</a>
</p>

<p>
Prolog in JavaScript/browser
<a href="http://tau-prolog.org/">http://tau-prolog.org/</a>
</p>

<p>
Alternative Prolog syntax?
Curry/ML-like syntax for Prolog?
</p>

<pre class="example">
append([],B,B).
append([H|A], B, [H|C]) :- append(A,B,C).

append [] B B.
append [H|A] B [H|C] :- append A B C.
</pre>

<p>
If everyone could be 20x more productive using Prolog, then it is a sin to let them use Java or C++.
It is a massive waste of human life.
</p>

<p>
"Syntactic integration of external languages in Prolog"
<a href="https://pdfs.semanticscholar.org/35eb/0b9d6edc27dd4564d98b107fec08e45e36cd.pdf">https://pdfs.semanticscholar.org/35eb/0b9d6edc27dd4564d98b107fec08e45e36cd.pdf</a>
SQL-Prolog
Draxler [2]
NED [5]
</p>


<p>
"The Mess We're In" by Joe Armstrong"
<a href="https://www.youtube.com/watch?v=lKXe3HUG2l4">https://www.youtube.com/watch?v=lKXe3HUG2l4</a>
43:20
We assume that two files A and B are similar if size(compress(A)) is similar to size(compress(A++B)).
</p>

<p>
"Goal: Adapting the Warren abstract machine to the LLVM IR machine model for later compilation."
"Hassan Aït-Kaci's WAM book"
2018
<a href="https://www.researchgate.net/project/Compiling-Prolog">https://www.researchgate.net/project/Compiling-Prolog</a>
</p>


<p>
decompilation
"J.P. Bowen, From Programs to Object Code and Back Again Using Logic Programming: Compilation and Decompilation, Journal of Software Maintenance: Research and Practice, Vol. 5, No. 4, pp.205-234, December, 1993"
<a href="https://dtai.cs.kuleuven.be/projects/ALP/newsletter/archive_93_96/net/grammars/compiler2.html">https://dtai.cs.kuleuven.be/projects/ALP/newsletter/archive_93_96/net/grammars/compiler2.html</a>
</p>


<p>
Prolog parser in Prolog
<a href="https://dtai.cs.kuleuven.be/projects/ALP/newsletter/archive_93_96/net/grammars/parser.html">https://dtai.cs.kuleuven.be/projects/ALP/newsletter/archive_93_96/net/grammars/parser.html</a>
</p>

<p>
XPCE may have been considered deprecated since 2015
<a href="https://github.com/SWI-Prolog/roadmap/issues/29">https://github.com/SWI-Prolog/roadmap/issues/29</a>
</p>



<p>
"What is Wrong with Logic Programming?"
"A Deductive Solution to Mutable State and I/O"
<a href="https://pdfs.semanticscholar.org/ca08/dcb9eddc1e7651509daac7fa02eddb7f675b.pdf">https://pdfs.semanticscholar.org/ca08/dcb9eddc1e7651509daac7fa02eddb7f675b.pdf</a>
</p>

<p>
<a href="http://www.swi-prolog.org/pldoc/doc_for?object=section">http://www.swi-prolog.org/pldoc/doc_for?object=section</a>(%27packages/cql.html%27)
Draxler 1991 relates database table and Prolog predicate.
CQL models SQL query in Prolog terms.
</p>
</div>
</div>
<div id="outline-container-orgbd703eb" class="outline-3">
<h3 id="orgbd703eb"><span class="section-number-3">14.12</span> miniKanren?</h3>
<div class="outline-text-3" id="text-14-12">
<p>
Relational programming, microKanren
<a href="http://matt.might.net/articles/microkanren/">http://matt.might.net/articles/microkanren/</a>
</p>

<p>
2017
A Unified Approach to Solving Seven Programming Problems (Functional Pearl)
<a href="http://io.livecode.ch/learn/gregr/icfp2017-artifact-auas7pp">http://io.livecode.ch/learn/gregr/icfp2017-artifact-auas7pp</a>
</p>

<p>
2013
rKanren - Guided Search in miniKanren, Part I
<a href="http://cgswords.github.io/rkanren/">http://cgswords.github.io/rkanren/</a>
</p>

<p>
Schelog vs minikanren?
</p>
</div>
</div>
<div id="outline-container-orga2c2da3" class="outline-3">
<h3 id="orga2c2da3"><span class="section-number-3">14.13</span> what</h3>
<div class="outline-text-3" id="text-14-13">
<p>
!!
<a href="https://www.cambridge.org/core/journals/theory-and-practice-of-logic-programming/article/structured-alternative-to-prolog-with-simple-compositional-semantics/3E4B4198D74D6A2EC92DF4D6DC78DDE3">https://www.cambridge.org/core/journals/theory-and-practice-of-logic-programming/article/structured-alternative-to-prolog-with-simple-compositional-semantics/3E4B4198D74D6A2EC92DF4D6DC78DDE3</a>
</p>

<p>
Prolog clpq documentation doesn't mention multivariate optimization?
<a href="https://stackoverflow.com/questions/27716598/constraint-values-on-local-variable">https://stackoverflow.com/questions/27716598/constraint-values-on-local-variable</a>
</p>

<p>
<a href="http://www.amzi.com/manuals/amzi/pro/ref_execution.htm">http://www.amzi.com/manuals/amzi/pro/ref_execution.htm</a>
</p>

<p>
<a href="http://users.cs.cf.ac.uk/O.F.Rana/prolog/lectureP5/node3.html">http://users.cs.cf.ac.uk/O.F.Rana/prolog/lectureP5/node3.html</a>
</p>

<p>
<a href="https://coderwall.com/p/laduzw/how-to-measure-execution-time-in-swi-prolog">https://coderwall.com/p/laduzw/how-to-measure-execution-time-in-swi-prolog</a>
</p>

<p>
<a href="https://www.reddit.com/r/prolog/comments/9mxhbw/the_art_of_prolog_second_edition_is_available_as/">https://www.reddit.com/r/prolog/comments/9mxhbw/the_art_of_prolog_second_edition_is_available_as/</a>
</p>

<p>
<a href="https://github.com/klauscfhq/awesome-prolog/blob/master/readme.md">https://github.com/klauscfhq/awesome-prolog/blob/master/readme.md</a>
</p>

<p>
<a href="http://www.swi-prolog.org/pldoc/man?section=modes">http://www.swi-prolog.org/pldoc/man?section=modes</a>
</p>

<p>
Twitter LOPSTR:
Logic Based Program Synthesis and Transformation: 13th International&#x2026;
</p>

<p>
<a href="https://www.ajibot.com/blog/overview-of-logic-languages">https://www.ajibot.com/blog/overview-of-logic-languages</a>
</p>

<p>
<a href="https://stackoverflow.com/questions/1817010/embedded-prolog-interpreter-compiler-for-java">https://stackoverflow.com/questions/1817010/embedded-prolog-interpreter-compiler-for-java</a>
</p>

<p>
<a href="https://github.com/raydac/java-prolog-parser">https://github.com/raydac/java-prolog-parser</a>
</p>

<p>
<a href="http://dbs.informatik.uni-halle.de/Lehre/LP09/c3_purep.pdf">http://dbs.informatik.uni-halle.de/Lehre/LP09/c3_purep.pdf</a>
</p>

<p>
<a href="http://fsl.cs.illinois.edu/images/9/9c/PrologStandard.pdf">http://fsl.cs.illinois.edu/images/9/9c/PrologStandard.pdf</a>
</p>

<p>
prolog headless clause
<a href="https://stackoverflow.com/questions/14168363/what-does-a-clause-without-a-head-mean-in-prolog">https://stackoverflow.com/questions/14168363/what-does-a-clause-without-a-head-mean-in-prolog</a>
</p>

<p>
Read "The art of Prolog", second-order programming,
</p>

<p>
<a href="https://stackoverflow.com/questions/32835086/prolog-how-to-avoid-backtracking-without-cuts">https://stackoverflow.com/questions/32835086/prolog-how-to-avoid-backtracking-without-cuts</a>
</p>

<p>
Now I know this is false:
</p>
<ul class="org-ul">
<li>Relational programming subsumes functional programming.
<ul class="org-ul">
<li>Functional programming is a special case of relational programming.</li>
<li>Every function is a relation.</li>
</ul></li>
</ul>

<p>
Functional programming is more concise and readable than logic (relational?) programming when we are describing functions:
</p>
<div class="org-src-container">
<pre class="src src-haskell">fib 0 = 1
fib 1 = 1
fib n = fib (n-1) + fib (n-2)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">fib</span>(0,1).
<span style="color: #0000ff;">fib</span>(1,1).
<span style="color: #0000ff;">fib</span>(<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">F</span>) :- <span style="color: #a0522d;">N1</span> is <span style="color: #a0522d;">N</span>-1, <span style="color: #a0522d;">N2</span> is <span style="color: #a0522d;">N</span>-2, fib(<span style="color: #a0522d;">N1</span>,<span style="color: #a0522d;">F1</span>), fib(<span style="color: #a0522d;">N2</span>,<span style="color: #a0522d;">F2</span>), <span style="color: #a0522d;">F</span> is <span style="color: #a0522d;">F1</span>+<span style="color: #a0522d;">F2</span>.
</pre>
</div>

<p>
But we can translate a function to a deterministic (det) predicate in Prolog.
</p>
</div>
</div>
<div id="outline-container-org5b72103" class="outline-3">
<h3 id="org5b72103"><span class="section-number-3">14.14</span> whaaat</h3>
<div class="outline-text-3" id="text-14-14">
<p>
This marshallp guy is&#x2026; inhuman?
He uses Prolog for note taking!
<a href="https://news.ycombinator.com/item?id=1142292">https://news.ycombinator.com/item?id=1142292</a>
</p>
</div>
</div>
<div id="outline-container-org0538010" class="outline-3">
<h3 id="org0538010"><span class="section-number-3">14.15</span> Search engine?</h3>
<div class="outline-text-3" id="text-14-15">
<p>
AntRank
<a href="http://www.ijettcs.org/Volume3Issue2/IJETTCS-2014-04-23-113.pdf">http://www.ijettcs.org/Volume3Issue2/IJETTCS-2014-04-23-113.pdf</a>
</p>
</div>
</div>
<div id="outline-container-orgd43c3fd" class="outline-3">
<h3 id="orgd43c3fd"><span class="section-number-3">14.16</span> Reverse engineering?</h3>
<div class="outline-text-3" id="text-14-16">
<ul class="org-ul">
<li>1992 "A Logic-Based Approach to Reverse Engineering Tools Production"</li>
</ul>
<p>
<a href="https://pdfs.semanticscholar.org/4882/9fd716349ff586e21e9277890989daa0e916.pdf">https://pdfs.semanticscholar.org/4882/9fd716349ff586e21e9277890989daa0e916.pdf</a>
</p>

<p>
Prolog-COBOL stuff
</p>

<ul class="org-ul">
<li>1991, Using Prolog for Reverse-Engineering and Validation</li>
</ul>
<p>
<a href="http://www.academia.edu/2493008/Using_Prolog_for_reverse-engineering_and_validation">http://www.academia.edu/2493008/Using_Prolog_for_reverse-engineering_and_validation</a>
</p>
<ul class="org-ul">
<li>1994, "Reverse Engineering of COBOL Programs into Prolog Programs"</li>
</ul>
<p>
<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.38.5073&amp;rep=rep1&amp;type=pdf">http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.38.5073&amp;rep=rep1&amp;type=pdf</a>
</p>
<ul class="org-ul">
<li>1992, "The Art of Computer Un-Programming: Reverse Engineering in Prolog"</li>
</ul>
<p>
<a href="http://www.academia.edu/1413561/The_art_of_computer_un-programming_Reverse_engineering_in_Prolog">http://www.academia.edu/1413561/The_art_of_computer_un-programming_Reverse_engineering_in_Prolog</a>
</p>
<ul class="org-ul">
<li><a href="https://link.springer.com/chapter/10.1007/3-540-55930-2_20">https://link.springer.com/chapter/10.1007/3-540-55930-2_20</a></li>
</ul>

<p>
<a href="http://www.academia.edu/1413561/The_art_of_computer_un-programming_Reverse_engineering_in_Prolog">http://www.academia.edu/1413561/The_art_of_computer_un-programming_Reverse_engineering_in_Prolog</a>
</p>
</div>
</div>
<div id="outline-container-org62fda0d" class="outline-3">
<h3 id="org62fda0d"><span class="section-number-3">14.17</span> Idea: Write an SQL database explorer in Prolog.</h3>
<div class="outline-text-3" id="text-14-17">
<p>
CLI interface without ncurses without pager.
Imagine printing to paper like early Fortran/Unix/ed.
Paper user interface.
</p>
<ul class="org-ul">
<li>menu(KeyActionPairs).</li>
<li>select database</li>
<li>select schema</li>
<li>show 10 rows of table, 15 chars per column, truncating long strings with "&gt;"
<ul class="org-ul">
<li>tput <a href="https://stackoverflow.com/questions/263890/how-do-i-find-the-width-height-of-a-terminal-window">https://stackoverflow.com/questions/263890/how-do-i-find-the-width-height-of-a-terminal-window</a></li>
<li>My 1920x1080 terminal has 191 columns and 53 lines.</li>
</ul></li>
<li>go up / back to previous menu.</li>
</ul>
</div>
</div>
<div id="outline-container-orga6ddf7e" class="outline-3">
<h3 id="orga6ddf7e"><span class="section-number-3">14.18</span> Use Prolog for formal software requirement capture / modeling.?</h3>
<div class="outline-text-3" id="text-14-18">
<p>
"Are there any standard Prolog knowledge bases available anywhere that have the same purpose as Cyc, namely to encode generally accepted common sense and human knowledge?"
<a href="https://cs.stackexchange.com/questions/35237/open-standard-prolog-knowledge-bases">https://cs.stackexchange.com/questions/35237/open-standard-prolog-knowledge-bases</a>
</p>

<p>
2004 "SweetProlog: A System to Integrate Ontologies and Rules"
<a href="https://pdfs.semanticscholar.org/03c2/a0048a5845bb1f52462c4f26d7be0a929d7a.pdf">https://pdfs.semanticscholar.org/03c2/a0048a5845bb1f52462c4f26d7be0a929d7a.pdf</a>
</p>

<p>
Prolog is better than Turtle.
<a href="http://sujitpal.blogspot.com/2009/06/ontology-rules-with-prolog.html">http://sujitpal.blogspot.com/2009/06/ontology-rules-with-prolog.html</a>
"I actually set out to learn Jena Rules using the Semantic Web Programming book as a guide. Midway through that exercise, it occurred to me that Prolog would be a cleaner and almost drop-in replacement to the rather verbose Turtle syntax. Apparently the Semantic Web community thinks otherwise, since Turtle stands for Terse RDF Triple language. I haven't actually used Prolog before this, although I've read code snippets in articles once or twice (but not recently), so the realization was almost like an epiphany."
</p>

<p>
<a href="http://collaboration.cmc.ec.gc.ca/science/rpn/biblio/ddj/Website/articles/DDJ/1989/8910/8910f/8910f.htm">http://collaboration.cmc.ec.gc.ca/science/rpn/biblio/ddj/Website/articles/DDJ/1989/8910/8910f/8910f.htm</a>
</p>

<p>
<a href="https://www.cs.auckland.ac.nz/~j-hamer/07.363/prolog-for-se.html">https://www.cs.auckland.ac.nz/~j-hamer/07.363/prolog-for-se.html</a>
</p>

<p>
<a href="http://ceur-ws.org/Vol-274/paper6.pdf">http://ceur-ws.org/Vol-274/paper6.pdf</a>
</p>
</div>
</div>
<div id="outline-container-org42dc27b" class="outline-3">
<h3 id="org42dc27b"><span class="section-number-3">14.19</span> Prolog, somewhat object-oriented, mapping from Java to Prolog</h3>
<div class="outline-text-3" id="text-14-19">
<p>
Prior arts:
2017 "Mapping Objects to Persistent Predicates"
<a href="https://pdfs.semanticscholar.org/f1ec/9e0e24faa1332d0cb60149e1d633b8d2509e.pdf">https://pdfs.semanticscholar.org/f1ec/9e0e24faa1332d0cb60149e1d633b8d2509e.pdf</a>
</p>

<p>
<a href="http://ceur-ws.org/Vol-274/paper6.pdf">http://ceur-ws.org/Vol-274/paper6.pdf</a>
</p>

<p>
Every Java class instantiation expression becomes a Prolog compound.
</p>

<pre class="example">
% From Java expression: new Class_name(field_1, field_n)
class_name(Field_1, ..., Field_N)
</pre>

<p>
Every Java class instantiation statement becomes a Prolog fact.
</p>

<pre class="example">
% From Java statement: Class_name instance_name = new Class_name(field_1, field_n)
Class_name(Instance_name, Field_1, ..., Field_N).
</pre>

<p>
Example
2010 "Simulating BPMN Models with Prolog"
</p>

<pre class="example">
final class Car {
    final String brand;
    final int year;
    // constructor omitted
}

Car a_car = new Car("Toyota", 2000);
</pre>

<p>
becomes
</p>

<pre class="example">
car(a_car, [brand('Toyota'), year(2000)]).
% or
car(a_car, 'Toyota', 2000).
% or
car(a_car, car('Toyota', 2000)).
</pre>

<p>
Large-scale Prolog?
1991 "Efficient Access To Large Prolog Knowledge Bases"
<a href="https://link.springer.com/chapter/10.1007/978-3-7091-7555-2_26">https://link.springer.com/chapter/10.1007/978-3-7091-7555-2_26</a>
</p>
</div>
</div>
</div>

  </div>

</article>

      </div>
    </main>

    
    
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
var disqus_config = function () {
    this.page.url = "https://edom.github.io/prolog.html";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "https://edom.github.io/prolog.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://edom-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    

    <footer class="site-footer h-card">
    <data class="u-url" href="/"></data>

    <div class="wrapper">
        <p>This page was created on 2018-04-11 00:00 +0700.</p>
        <p class="rss-subscribe">There is an <a href="/feed.xml">RSS feed</a>,
        but it's unused because this site is a wiki, not a blog.</p>
        <p>Stop writing books, papers, and blogs! Write a personal wiki instead! Or, even better, contribute to a community wiki.</p>
    </div>

</footer>


  </body>

</html>
