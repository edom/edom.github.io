<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Deploying web applications</title>
  <meta name="description" content="Personal website">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://edom.github.io/deploy.html">
  <link rel="alternate" type="application/rss+xml" title="Erik Dominikus&#39;s wiki" href="/feed.xml">

  

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12628443-6', 'auto');
  ga('send', 'pageview');

</script>
  

  

  
</head>


  <body>

    <header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">Erik Dominikus&#39;s wiki</a>
  </div>
</header>


    

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Deploying web applications</h1>
  </header>

  <div class="post-content">
    <ul id="markdown-toc">
  <li><a href="#formalizing-deployment-requirements" id="markdown-toc-formalizing-deployment-requirements">Formalizing deployment requirements</a></li>
  <li><a href="#design" id="markdown-toc-design">Design</a></li>
  <li><a href="#continuous-something" id="markdown-toc-continuous-something">Continuous something</a></li>
  <li><a href="#fabric-vs-ansible" id="markdown-toc-fabric-vs-ansible">Fabric vs Ansible</a></li>
  <li><a href="#what-is-devops" id="markdown-toc-what-is-devops">What is DevOps?</a></li>
  <li><a href="#haskell-for-devops" id="markdown-toc-haskell-for-devops">Haskell for devops?</a></li>
  <li><a href="#migrating-running-processes" id="markdown-toc-migrating-running-processes">Migrating running processes</a></li>
  <li><a href="#troubleshooting-dashboard-what-metrics-you-should-monitor-and-why" id="markdown-toc-troubleshooting-dashboard-what-metrics-you-should-monitor-and-why">Troubleshooting Dashboard: What metrics you should monitor and why?</a></li>
</ul>

<h2 id="formalizing-deployment-requirements">Formalizing deployment requirements</h2>

<p>What is the way to deploy web applications?</p>

<ul>
  <li>General information
    <ul>
      <li>I have a Java web application.</li>
      <li>It compiles by <code class="highlighter-rouge">mvn package</code>.</li>
      <li>Its main class is <code class="highlighter-rouge">blah</code>.</li>
    </ul>
  </li>
  <li>Network
    <ul>
      <li>It listens on port 1234.</li>
      <li>Its URL should be <code class="highlighter-rouge">https://blah/</code>.</li>
      <li>It is HTTPS only. HTTP port shouldn’t be open at all.</li>
    </ul>
  </li>
  <li>Resource requirements and burst characteristics
    <ul>
      <li>It needs 4 GB of RAM for acceptable garbage collection overhead.</li>
      <li>It is mostly idle, but when it bursts, it requires 4 cores.</li>
      <li>Ops is free to horizontally scale the stateless application server.</li>
    </ul>
  </li>
</ul>

<p>Assuming that I’m on either Amazon Web Services or Google Cloud Platform, how do I formalize my ops requirements in a cloud-agnostic way?
The 2016 article “On Formalizing and Identifying Patterns in Cloud Workload Specifications” <a href="https://ieeexplore.ieee.org/document/7516840/">paywall</a> suggests an answer:</p>

<ul>
  <li>“Approaches include orchestration specifications CAMP [1], [2], Open-CSA, SOA-ML and USDL,
and on the industrial side solutions such as Amazon CloudFormation, OpenStack Heat, Cloudify and Alien4Cloud.
To consolidate and enable interoperability within this variety of approaches, a technical committee by OASIS [3]
defined a standard for the Topology and Orchestration Specification of Cloud Applications (TOSCA) [4], [5],
which defines guidelines and facilities for the complete specification, orchestration and configuration of complex workloads,
addressing portability in heterogeneous clouds.”</li>
</ul>

<p>I assume that it suggests TOSCA.</p>

<p>Problem: The average person won’t read a specification.</p>

<p>Who uses TOSCA?
Who implements that?
Why do I never see it on AWS or GCP?
Why would they follow your standard if they are the de facto standard?</p>

<p>Do we need more than one cloud providers?</p>

<p>Tools?</p>

<ul>
  <li>kubernetes</li>
  <li>keter, pm2</li>
  <li><a href="https://developers.redhat.com/blog/2018/06/28/why-kubernetes-is-the-new-application-server/">Why Kubernetes is The New Application Server - RHD Blog</a></li>
</ul>

<p>Why I don’t use NixOS:</p>

<ul>
  <li>NixOS is insane.
Patching every software on Earth is not sustainable.
NixOS is only sustainable if the upstream developers use NixOS.</li>
  <li>2018-08-31: Ubuntu has <a href="http://old-releases.ubuntu.com/">old-releases.ubuntu.com</a>.
It archives things back to 2006.
Ubuntu has money to host 12 years of archive.
NixOS doesn’t have that much money.
NixOS can only afford to host 1-2 years of archive.</li>
  <li>NixOS (or anything else indeed) would be heaven if library writers valued backward compatibility.
I want my library writers to worship backward compatibility like sysadmins worship uptime.
I want them to never break things that depend on them.
But my experience invalidates this hope.
I’ve seen too many breakages.</li>
</ul>

<p>Who uses this?</p>

<ul>
  <li>2013 “Towards a Formal Model for Cloud Computing” <a href="https://link.springer.com/chapter/10.1007/978-3-319-06859-6_34">paywall</a></li>
</ul>

<h2 id="design">Design</h2>

<ul>
  <li>2018-08-30</li>
  <li><a href="https://blog.chef.io/2015/04/23/ontology-infrastructure-classification-and-the-design-of-chef/">Ontology, Infrastructure Classification, and the Design of Chef - Chef Blog</a></li>
</ul>

<p>I agree that 2018 devops ontologies suck, but I think we shouldn’t avoid ontology-based systems.
The solution is not to avoid ontologies.
The solution is to craft a proper ontology that is timeless and essential.
This is a hard philosophical problem.</p>

<p>For example, the relationship between “application” and “entry point” is timeless.
“Entry point” is an essential property of “application”.
By definition, every application has an entry point.</p>

<p>Every software has an implicit ontology, like it or not.</p>

<p>Every ontology systems that captures accident instead of essence is bound to fail.
Every computer ontology system that avoids philosophical ontology (What is X? What is the timeless essence of X?) is bound to fail.</p>

<p>Are these related?</p>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Existence_precedes_essence">WP:Existence precedes essence</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Essence">WP:Essence</a> (probably unrelated to above)</li>
  <li>2011 article “On doing ontology without metaphysics” <a href="https://www.jstor.org/stable/41329478?seq=1#page_scan_tab_contents">paywall</a></li>
  <li>2012 article “Philosophies without ontology” <a href="https://www.journals.uchicago.edu/doi/pdfplus/10.14318/hau3.1.015">pdf</a></li>
  <li><a href="https://webhome.phy.duke.edu/~rgb/Beowulf/axioms/axioms/node4.html">Philosophy is Bullshit: David Hume</a>
    <ul>
      <li>What are pseudoquestions?</li>
    </ul>
  </li>
</ul>

<p>How do we answer “What is X?”?</p>

<p>There is an easy answer for mathematics.
Mathematics is unique in that its ontology is mostly a priori / by fiat: we say it exists; therefore it exists.
However, would it still be the case if we didn’t have languages to express it?</p>

<p>For the real world it’s hard.</p>

<p>Sometimes when we ask “What is X?”, we are really asking “What is X for?” instead.</p>

<p>How do answer “What is X?” such that the correctness/truth/relevance of the answer does not depend on time/circumstances?
We don’t know how to predict the far future.</p>

<h2 id="continuous-something">Continuous something</h2>

<ul>
  <li>Continuous integration
    <ul>
      <li><a href="https://jenkins.io/">Jenkins</a></li>
    </ul>
  </li>
  <li>Continuous delivery
    <ul>
      <li><a href="https://www.spinnaker.io/">Spinnaker</a></li>
    </ul>
  </li>
  <li>The ideal workflow: Git push triggers deployment?</li>
</ul>

<p>These pages may be outdated:</p>

<ul>
  <li><a href="/ansible.html">Ansible</a></li>
  <li><a href="/logging.html">Logging</a></li>
</ul>

<h2 id="fabric-vs-ansible">Fabric vs Ansible</h2>

<p>From the user’s point of view, Fabric is a python library, whereas Ansible is YAML-driven framework.</p>

<h2 id="what-is-devops">What is DevOps?</h2>

<p>XML is not suitable for declarative DevOps.
See comments in <a href="https://github.com/edom/work/blob/master/devops/example.xml">devops/example.xml</a>.
We want the declaration site of some bindings to be as close as possible to their use sites.</p>

<p>I’m thinking about using <a href="https://github.com/dhall-lang/dhall-lang">Dhall</a>.</p>

<p>Separating Dev and Ops doesn’t make sense.</p>

<p>Ops can’t fix shitty Dev.
No amount of Ops will fix stupid programming.
Ops is impossible without decent Dev.</p>

<p>What is Google search result for “devops tools”?</p>

<ul>
  <li>API description language, application description language: WADL vs Swagger vs what else?
    <ul>
      <li>https://www.w3.org/Submission/wadl/</li>
      <li>2010 article “DADL: Distributed Application Description Language” <a href="https://www.isi.edu/~mirkovic/publications/dadlsubmit.pdf">pdf</a></li>
    </ul>
  </li>
  <li>ontology?
    <ul>
      <li>https://devops.stackexchange.com/questions/1361/what-are-known-efforts-to-establish-devops-ontology-model</li>
      <li>2016 article “Application of Ontologies in Cloud Computing: The State-Of-The-Art” <a href="https://arxiv.org/abs/1610.02333">pdf available</a></li>
      <li>2015 article “Composable DevOps” <a href="https://dl.acm.org/citation.cfm?id=2867125">paywall</a></li>
      <li>2012 article “Towards an Ontology for Cloud Services” <a href="https://ieeexplore.ieee.org/document/6245776/">paywall</a></li>
      <li>2012 article “Cloud Computing Ontologies: A Systematic Review” <a href="https://pdfs.semanticscholar.org/cd5f/e6edb6284fcbcb470239464bb0c8e3ee2d50.pdf">pdf</a></li>
      <li>2008 article “Toward a Unified Ontology of Cloud Computing” <a href="https://www.researchgate.net/publication/224367196_Toward_a_Unified_Ontology_of_Cloud_Computing">pdf available</a></li>
      <li>https://www.skytap.com/blog/cloud-ontology/</li>
      <li>OASIS TOSCA; too ad-hoc?</li>
    </ul>
  </li>
  <li>what
    <ul>
      <li>2015 article “Composable DevOps: Automated Ontology Based DevOps Maturity Analysis” <a href="https://ieeexplore.ieee.org/document/7207405/">paywall</a></li>
    </ul>
  </li>
</ul>

<h2 id="haskell-for-devops">Haskell for devops?</h2>

<ul>
  <li>https://www.reddit.com/r/haskell/comments/31vnos/neil_mitchell_devops_with_haskell/</li>
  <li>https://github.com/commercialhaskell/commercialhaskell/blob/master/taskforce/devops.md</li>
  <li><a href="http://hackage.haskell.org/package/azubi">azubi: A simple DevOps tool which will never “reach” enterprice level.</a></li>
</ul>

<h2 id="migrating-running-processes">Migrating running processes</h2>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Process_migration">WP:Process migration</a></li>
</ul>

<h2 id="troubleshooting-dashboard-what-metrics-you-should-monitor-and-why">Troubleshooting Dashboard: What metrics you should monitor and why?</h2>

<ul>
  <li>We want to minimize what we need to see.
we want the metric that predicts the most problems.
    <ul>
      <li>Rising maximum latency is a sign that something is overloaded.</li>
      <li>Rising resource usage (CPU, memory, disk, disk queue depth) predicts rising latency.</li>
    </ul>
  </li>
  <li>We want the metric to help us locate problems.</li>
</ul>

<p>When such metric deviates from baseline, we know there is problem, but where?</p>

<p>What other metrics should we monitor?</p>

<ul>
  <li>HTTP 4xx and 5xx status codes and connection failures?</li>
</ul>

  </div>

</article>

      </div>
    </main>

    
    
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
var disqus_config = function () {
    this.page.url = "https://edom.github.io/deploy.html";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "https://edom.github.io/deploy.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://edom-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    

    <footer class="site-footer h-card">
    <data class="u-url" href="/"></data>

    <div class="wrapper">
        <p>This page was created on 2018-08-29 19:09 +0700.</p>
        <p class="rss-subscribe">There is an <a href="/feed.xml">RSS feed</a>,
        but it's unused because this site is a wiki, not a blog.</p>
        <p>Stop writing books, papers, and blogs! Write a personal wiki instead! Or, even better, contribute to a community wiki.</p>
    </div>

</footer>


  </body>

</html>
