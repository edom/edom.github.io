<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Using computers</title>
  <meta name="description" content="Personal website">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://edom.github.io/usecom.html">
  <link rel="alternate" type="application/rss+xml" title="Erik Dominikus&#39;s wiki" href="/feed.xml">

  

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12628443-6', 'auto');
  ga('send', 'pageview');

</script>
  

  

  
</head>


  <body>

    <header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">Erik Dominikus&#39;s wiki</a>
  </div>
</header>


    

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Using computers</h1>
  </header>

  <div class="post-content">
    <div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#using-computers">1. Using computers</a></li>
<li><a href="#ansible">2. Ansible</a></li>
<li><a href="#autotools">3. Autotools</a></li>
<li><a href="#amazon-web-services">4. Amazon Web Services</a></li>
<li><a href="#bash-shell-programming">5. Bash shell programming</a></li>
<li><a href="#orgf9210ce">6. Moving to clouds, for old-school sysadmins</a></li>
<li><a href="#deploying-web-applications">7. Deploying web applications</a></li>
<li><a href="#running-x-client-applications-on-docker-on-linux">8. Running X client applications on Docker on Linux</a></li>
<li><a href="#using-git">9. Using Git</a></li>
<li><a href="#speeding-up-git">10. Speeding up Git</a></li>
<li><a href="#using-gradle">11. Using Gradle</a></li>
<li><a href="#using-java">12. Using Java</a></li>
<li><a href="#using-maven">13. Using Maven</a></li>
<li><a href="#removing-nag-screens">14. Removing nag screens</a></li>
<li><a href="#using-python">15. Using Python</a></li>
<li><a href="#security">16. Security</a></li>
<li><a href="#software">17. Software</a></li>
<li><a href="#administering-a-computer">18. Administering a computer</a></li>
<li><a href="#using-cabal">19. Using Cabal</a></li>
<li><a href="#org661a9ea">20. Using Haskell</a></li>
<li><a href="#using-kubernetes">21. Using Kubernetes</a></li>
<li><a href="#making-a-personal-wiki">22. Making a personal wiki</a></li>
<li><a href="#searching-the-internet">23. Searching the Internet</a></li>
<li><a href="#using-trello">24. Using Trello</a></li>
<li><a href="#contributing-to-wikipedia">25. Contributing to Wikipedia</a></li>
<li><a href="#using-xml">26. Using XML</a></li>
<li><a href="#orgf0e5225">27. Using PostgreSQL</a></li>
</ul>
</div>
</div>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#using-computers">1. Using computers</a></li>
<li><a href="#ansible">2. Ansible</a></li>
<li><a href="#autotools">3. Autotools</a></li>
<li><a href="#amazon-web-services">4. Amazon Web Services</a></li>
<li><a href="#bash-shell-programming">5. Bash shell programming</a>
<ul>
<li><a href="#articles">5.1. Articles</a></li>
<li><a href="#error-handling">5.2. Error handling</a></li>
<li><a href="#bash-pitfalls">5.3. Bash pitfalls</a>
<ul>
<li><a href="#local-variable-definition-ignores-command-substitution-result">5.3.1. Local variable definition ignores command substitution result</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf9210ce">6. Moving to clouds, for old-school sysadmins</a></li>
<li><a href="#deploying-web-applications">7. Deploying web applications</a>
<ul>
<li><a href="#formalizing-deployment-requirements">7.1. Formalizing deployment requirements</a></li>
<li><a href="#design">7.2. Design</a></li>
<li><a href="#continuous-something">7.3. Continuous something</a></li>
<li><a href="#fabric-vs-ansible">7.4. Fabric vs Ansible</a></li>
<li><a href="#what-is-devops">7.5. What is DevOps?</a></li>
<li><a href="#haskell-for-devops">7.6. Haskell for devops?</a></li>
<li><a href="#migrating-running-processes">7.7. Migrating running processes</a></li>
<li><a href="#troubleshooting-dashboard-what-metrics-you-should-monitor-and-why">7.8. Troubleshooting Dashboard: What metrics you should monitor and why?</a></li>
</ul>
</li>
<li><a href="#running-x-client-applications-on-docker-on-linux">8. Running X client applications on Docker on Linux</a></li>
<li><a href="#using-git">9. Using Git</a>
<ul>
<li><a href="#mental-model">9.1. Mental model</a></li>
<li><a href="#more-information">9.2. More information</a></li>
<li><a href="#things-to-write">9.3. Things to write?</a></li>
<li><a href="#git-hash-collisions">9.4. Git hash collisions</a></li>
<li><a href="#related-tools">9.5. Related tools</a></li>
</ul>
</li>
<li><a href="#speeding-up-git">10. Speeding up Git</a>
<ul>
<li><a href="#the-problem">10.1. The problem</a></li>
<li><a href="#hypothesis-how-git-rebase-works">10.2. Hypothesis: How git rebase works</a></li>
<li><a href="#the-plan">10.3. The plan</a></li>
<li><a href="#plan-make-a-rebase-that-uses-only-trees-and-not-indexes">10.4. Plan: Make a rebase that uses only trees and not indexes</a></li>
<li><a href="#plan-just-use-subtrees-and-keep-the-repository-small">10.5. Plan: Just use subtrees and keep the repository small</a></li>
</ul>
</li>
<li><a href="#using-gradle">11. Using Gradle</a></li>
<li><a href="#using-java">12. Using Java</a></li>
<li><a href="#using-maven">13. Using Maven</a></li>
<li><a href="#removing-nag-screens">14. Removing nag screens</a>
<ul>
<li><a href="#make-www.webtoon.com-fast">14.1. Make www.webtoon.com fast</a>
<ul>
<li><a href="#usage">14.1.1. Usage</a></li>
<li><a href="#notes">14.1.2. Notes</a></li>
</ul>
</li>
<li><a href="#remove-quora-nag-screen">14.2. Remove Quora nag screen</a></li>
<li><a href="#remove-pinterest-nag-screen">14.3. Remove Pinterest nag screen</a></li>
<li><a href="#group-gmail-mails-by-sender-email">14.4. Group Gmail mails by sender email</a></li>
<li><a href="#chrome-bookmarklet-make-markdown-link-for-page">14.5. Chrome bookmarklet: Make Markdown link for page</a></li>
</ul>
</li>
<li><a href="#using-python">15. Using Python</a></li>
<li><a href="#security">16. Security</a></li>
<li><a href="#software">17. Software</a></li>
<li><a href="#administering-a-computer">18. Administering a computer</a>
<ul>
<li><a href="#sudo-security-hole-mitigation-dont-reuse-the-terminal-you-use-for-sudo.">18.1. sudo security hole mitigation: Don't reuse the terminal you use for sudo.</a></li>
<li><a href="#probably-relevant-twitters">18.2. Probably relevant Twitters</a></li>
<li><a href="#building-software-for-old-ubuntu">18.3. Building software for old Ubuntu</a></li>
<li><a href="#what">18.4. what</a></li>
</ul>
</li>
<li><a href="#using-cabal">19. Using Cabal</a></li>
<li><a href="#org661a9ea">20. Using Haskell</a>
<ul>
<li><a href="#org9e2ce21">20.1. Setting up development environment</a>
<ul>
<li><a href="#orge36688e">20.1.1. My incoherent rambling</a></li>
</ul>
</li>
<li><a href="#org29c96eb">20.2. Hackage outages</a></li>
<li><a href="#org9f6543a">20.3. Haskell in 2018</a></li>
<li><a href="#orgc70ea0d">20.4. Using GHC</a></li>
<li><a href="#orgf157ae5">20.5. what</a></li>
<li><a href="#org4c08059">20.6. Finding a Haskell IDE</a></li>
<li><a href="#org8ba929f">20.7. what</a></li>
<li><a href="#org4f67e0d">20.8. what</a></li>
<li><a href="#org49ccaa7">20.9. Curating libraries</a></li>
<li><a href="#org90b949d">20.10. what</a></li>
<li><a href="#org651fa7b">20.11. Haskell woes</a></li>
<li><a href="#org500515e">20.12. GHC woes</a>
<ul>
<li><a href="#orgaf6894e">20.12.1. Working on GHC</a></li>
</ul>
</li>
<li><a href="#orge74c5c8">20.13. People who have too much time</a></li>
<li><a href="#org15c4a4d">20.14. What's hampering Haskell adoption?</a></li>
</ul>
</li>
<li><a href="#using-kubernetes">21. Using Kubernetes</a></li>
<li><a href="#making-a-personal-wiki">22. Making a personal wiki</a></li>
<li><a href="#searching-the-internet">23. Searching the Internet</a></li>
<li><a href="#using-trello">24. Using Trello</a></li>
<li><a href="#contributing-to-wikipedia">25. Contributing to Wikipedia</a>
<ul>
<li><a href="#beginning-contributing-to-wikipedia">25.1. Beginning contributing to Wikipedia</a></li>
<li><a href="#what-should-be-in-user-page">25.2. What should be in user page?</a></li>
</ul>
</li>
<li><a href="#using-xml">26. Using XML</a>
<ul>
<li><a href="#finding-the-editor">26.1. Finding the editor</a></li>
<li><a href="#using-schemas">26.2. Using schemas</a></li>
<li><a href="#toward-markup-language-agnosticity">26.3. Toward markup language agnosticity</a></li>
</ul>
</li>
<li><a href="#orgf0e5225">27. Using PostgreSQL</a>
<ul>
<li><a href="#org5c4f6b7">27.1. Traps, pitfalls, gotchas</a>
<ul>
<li><a href="#org379069c">27.1.1. PostgreSQL ALTER TABLE DROP COLUMN doesn't actually remove the column from disk</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgb2e56ee" class="outline-2">
<h2 id="using-computers"><a id="orgb2e56ee"></a><span class="section-number-2">1</span> Using computers</h2>
<div class="outline-text-2" id="text-using-computers">
<ul class="org-ul">
<li>Habits learned the hard way

<ul class="org-ul">
<li>I check the time at <a href="https://time.gov/">time.gov</a> because Ubuntu 14.04 NTP once betrayed me.

<ul class="org-ul">
<li>2018-01-16: I had always thought that it was dependable, but it betrayed me:
It showed 2 a.m. while the actual time was 4 a.m..
I missed some hours of sleep.</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org30aa478" class="outline-2">
<h2 id="ansible"><a id="org30aa478"></a><span class="section-number-2">2</span> Ansible</h2>
<div class="outline-text-2" id="text-ansible">
<p>
An <a href="http://docs.ansible.com/ansible/intro_inventory.html">inventory</a> is a map from host alias to host address.
We use those aliases to select the machines to mutate.
</p>

<p>
Ansible has two executables: <code>ansible</code> and <code>ansible-playbook</code>.
</p>

<p>
The <code>ansible-playbook</code> takes a YAML configuration.
</p>

<p>
The <code>ansible</code> executable executes one command.
</p>

<p>
The <code>ansible</code> command is like a "single-task playbook".
</p>

<p>
See also <code>man ansible</code> ("run a task on target hosts") and <code>man ansible-playbook</code>.
</p>

<p>
A machine can have many roles.
</p>

<p>
An Ansible role should be a noun phrase (<code>web-server</code>), not a verb phrase (<code>install-web-server</code>).
</p>
</div>
</div>
<div id="outline-container-org0b3cf75" class="outline-2">
<h2 id="autotools"><a id="org0b3cf75"></a><span class="section-number-2">3</span> Autotools</h2>
<div class="outline-text-2" id="text-autotools">
<ul class="org-ul">
<li>Cargo-cult programming

<ul class="org-ul">
<li>Sometimes fixes things

<ul class="org-ul">
<li>Add <code>-I /usr/share/aclocal</code> to <code>ACLOCAL_AMFLAGS</code> in <code>Makefile.am</code>.</li>
</ul></li>
</ul></li>

<li><a href="http://voices.canonical.com/jussi.pakkanen/2011/09/13/autotools/">Why GNU Autotools is not my favorite build system | Jussi Pakkanen's development blog</a></li>
</ul>
</div>
</div>
<div id="outline-container-orge99fabd" class="outline-2">
<h2 id="amazon-web-services"><a id="orge99fabd"></a><span class="section-number-2">4</span> Amazon Web Services</h2>
<div class="outline-text-2" id="text-amazon-web-services">
<ul class="org-ul">
<li>How do we detect if we're running on AWS?

<ul class="org-ul">
<li><a href="https://forums.aws.amazon.com/message.jspa?messageID=122425">Question on AWS forum</a></li>
<li>Some choices:

<ul class="org-ul">
<li>on instance launch time: set an environment variable in the AMI used to launch instances.
This seems to be the most reliable way.</li>
<li>on application runtime:

<ul class="org-ul">
<li>HTTP server at 169.254.169.254</li>
<li>Reverse DNS lookup</li>
<li><code>/proc/xen</code> (if your development machine doesn't use xen)</li>
</ul></li>
</ul></li>
</ul></li>

<li>How do we get EC2 instance metadata?

<ul class="org-ul">
<li><a href="http://stackoverflow.com/questions/625644/find-out-the-instance-id-from-within-an-ec2-machine">http://stackoverflow.com/questions/625644/find-out-the-instance-id-from-within-an-ec2-machine</a></li>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html</a></li>
</ul></li>

<li>Amazon RDS is not for scaling.
It is designed to simplify operation of relational databases.
<a href="https://www.quora.com/Does-Amazon-RDS-solve-the-MySQL-scaling-issue">It is not designed to scale relational databases horizontally</a>.</li>
<li>The write capacity does not raise in proportion to the number of machines.</li>
<li>Deployment with Amazon Machine Images

<ul class="org-ul">
<li>We assume that the code scales horizontally.</li>
<li>Install everything you need to that instance.</li>
<li>Snapshot an AMI from an instance.</li>
</ul></li>

<li>EC2 security notes:

<ul class="org-ul">
<li>Because all instances are launched from the same image,
they have the same SSH host keys.
Compromising any of them will also compromise all other instances sharing the key.</li>
<li>See also <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/building-shared-amis.html">Amazon's notes on building shared AMIs</a>.</li>
</ul></li>

<li>How do I install AWS CLI on Ubuntu 14.04?

<ul class="org-ul">
<li><code>sudo apt-get install awscli</code></li>
</ul></li>

<li>RDS

<ul class="org-ul">
<li>In Amazon RDS PostgreSQL, slow queries are not logged by default.
See <a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_LogAccess.Concepts.PostgreSQL.html">RDS user guide</a>.</li>
<li><a href="http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-rds-db.html">Using Route 53 for aliasing your RDS instances</a></li>
<li><a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_BestPractices.html">RDS best practices</a></li>
</ul></li>

<li>Shit did happen.

<ul class="org-ul">
<li>A busy RDS instance got CPU-throttled (ran out of CPU credits).

<ul class="org-ul">
<li><i>CPU credit doesn't have to reach zero</i> in order for the instance to be throttled.
Don't use CloudWatch alarm condition <code>CpuCredit = 0</code>.</li>
</ul></li>

<li>A busy RDS instance got IOPS-throttled (ran out of IOPS credits).

<ul class="org-ul">
<li>2018 CloudWatch doesn't have IOPS credit metric.
Can't make alarm.</li>
</ul></li>
</ul></li>

<li><a href="https://aws.amazon.com/blogs/aws/aws-device-farm-update-remote-access-to-devices-for-interactive-testing/">AWS Device Farm</a>: interactive testing on real devices.</li>
</ul>
</div>
</div>
<div id="outline-container-org01d5559" class="outline-2">
<h2 id="bash-shell-programming"><a id="org01d5559"></a><span class="section-number-2">5</span> Bash shell programming</h2>
<div class="outline-text-2" id="text-bash-shell-programming">
</div>

<div id="outline-container-org9b9d9f3" class="outline-3">
<h3 id="articles"><a id="org9b9d9f3"></a><span class="section-number-3">5.1</span> Articles</h3>
<div class="outline-text-3" id="text-articles">
<ul class="org-ul">
<li>Bash has associative arrays

<ul class="org-ul">
<li><a href="https://www.artificialworlds.net/blog/2012/10/17/bash-associative-array-examples/">https://www.artificialworlds.net/blog/2012/10/17/bash-associative-array-examples/</a></li>
</ul></li>

<li><a href="https://github.com/SierraSoftworks/bash-cli">SierraSoftworks/bash-cli: A command line framework built using nothing but Bash and compatible with anything</a></li>
<li><a href="http://wiki.bash-hackers.org/syntax/pe">parameter expansion</a></li>
<li><a href="https://github.com/dylanaraps/pure-bash-bible">pure bash bible</a></li>
</ul>
</div>
</div>

<div id="outline-container-org12df4bd" class="outline-3">
<h3 id="error-handling"><a id="org12df4bd"></a><span class="section-number-3">5.2</span> Error handling</h3>
<div class="outline-text-3" id="text-error-handling">
<p>
I set these bash options in my script to make it fail fast:
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">set</span> -o errexit
<span style="color: #483d8b;">set</span> -o nounset
<span style="color: #483d8b;">set</span> -o pipefail
</pre>
</div>
</div>
</div>

<div id="outline-container-org0cad334" class="outline-3">
<h3 id="bash-pitfalls"><a id="org0cad334"></a><span class="section-number-3">5.3</span> Bash pitfalls</h3>
<div class="outline-text-3" id="text-bash-pitfalls">
<p>
This is bash version <code>GNU bash, version 4.3.11(1)-release (x86_64-pc-linux-gnu)</code> that comes with Ubuntu 14.04.
</p>
</div>

<div id="outline-container-org3e86af0" class="outline-4">
<h4 id="local-variable-definition-ignores-command-substitution-result"><a id="org3e86af0"></a><span class="section-number-4">5.3.1</span> Local variable definition ignores command substitution result</h4>
<div class="outline-text-4" id="text-local-variable-definition-ignores-command-substitution-result">
<p>
At first this seems like an unexpected interaction between function, <code>local</code> variable, <code>set -e (set -o errexit)</code>, and command substitution <code>$(cmd)</code>.
</p>

<p>
The word <code>local</code> is a shell command that has an exit status, not a keyword like <code>var</code> in JavaScript.
Bash is behaving as documented.
See the documentation for <code>local</code> in <code>man bash</code>.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #0000ff;">fun_0</span>() {
    <span style="color: #483d8b;">local</span> var
    <span style="color: #a0522d;">var</span>=$(<span style="color: #ff00ff;">false</span>)
    <span style="color: #483d8b;">echo</span> fun_0
}

<span style="color: #0000ff;">fun_1</span>() {
    <span style="color: #483d8b;">local</span> <span style="color: #a0522d;">var</span>=$(<span style="color: #ff00ff;">false</span>)
    <span style="color: #483d8b;">echo</span> fun_1
}

<span style="color: #0000ff;">fun_2</span>() {
    <span style="color: #483d8b;">local</span> <span style="color: #a0522d;">var</span>=$<span style="color: #a0522d;">1</span>
    <span style="color: #483d8b;">echo</span> fun_2
}

<span style="color: #483d8b;">echo</span> $(<span style="color: #ff00ff;">set</span> -o errexit; fun_0) <span style="color: #b22222;"># </span><span style="color: #b22222;">Expected: This doesn't print fun_0.</span>
<span style="color: #483d8b;">echo</span> $(<span style="color: #ff00ff;">set</span> -o errexit; fun_1) <span style="color: #b22222;"># </span><span style="color: #b22222;">PITFALL: This prints fun_1 !!!</span>
<span style="color: #483d8b;">echo</span> $(<span style="color: #ff00ff;">set</span> -o nounset; fun_2) <span style="color: #b22222;"># </span><span style="color: #b22222;">Pitfall: This doesn't print fun_2, and aborts with "bash: $1: unbound variable".</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf9210ce" class="outline-2">
<h2 id="orgf9210ce"><span class="section-number-2">6</span> Moving to clouds, for old-school sysadmins</h2>
<div class="outline-text-2" id="text-6">
<p>
The most important pages on the <a href="https://aws.amazon.com/">AWS website</a>
are the pricing pages and the technical documentation.
That website has much content, but not much information,
perhaps because they are not selling to sysadmins.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Amazonese</th>
<th scope="col" class="org-left">Old-school</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Route 53</td>
<td class="org-left">managed DNS server</td>
</tr>

<tr>
<td class="org-left">VPC (virtual private cluster)</td>
<td class="org-left">managed LAN (local area network)</td>
</tr>

<tr>
<td class="org-left">EC2 (elastic compute cloud) instance</td>
<td class="org-left">managed virtual machine</td>
</tr>

<tr>
<td class="org-left">security group</td>
<td class="org-left">managed iptables/firewall</td>
</tr>

<tr>
<td class="org-left">RDS (relational database service)</td>
<td class="org-left">managed SQL server</td>
</tr>

<tr>
<td class="org-left">EBS (elastic block store)</td>
<td class="org-left">managed NAS (network-attached storage)</td>
</tr>

<tr>
<td class="org-left">ELB (elastic load balancer)</td>
<td class="org-left">managed HAProxy</td>
</tr>

<tr>
<td class="org-left">ElastiCache</td>
<td class="org-left">managed Memcached/Redis</td>
</tr>

<tr>
<td class="org-left">Lambda</td>
<td class="org-left">automatically turn on machines to run a piece of code, and turn off idle machines</td>
</tr>
</tbody>
</table>

<p>
AWS, GCE, and Azure do the same thing you used to do.
The difference is they do it on a much larger scale,
and they make an API on top of it,
so you can <i>automate</i> it,
but this also mean that <i>you</i> can be automated away,
so beware!
</p>

<p>
With this cloud stuff, you can't buy a machine and bring it to the data center.
You start a machine from your computer.
The machine is now virtual;
it doesn't correspond to a motherboard anymore.
Procuring a machine is just a few clicks on the website,
or a few keystrokes on the terminal,
and your machine will be running in a few minutes.
What you used to do in days, now you can do in minutes.
</p>

<p>
With this cloud stuff, you can't visit the data center to restart a stuck machine.
You restart it from your computer.
</p>

<p>
You're billed per hour.
What was infrastructure (like roads) is now utility (like electricity).
</p>

<p>
The cloud is cheaper for bursty load with low average load.
If your average load is high, old-school is cheaper.
</p>

<p>
One thing doesn't change: you still need to back up data to a safe place <i>outside</i> the cloud.
(I'm a hypocrite; I say that but I don't do that.)
</p>
</div>
</div>
<div id="outline-container-org4240be6" class="outline-2">
<h2 id="deploying-web-applications"><a id="org4240be6"></a><span class="section-number-2">7</span> Deploying web applications</h2>
<div class="outline-text-2" id="text-deploying-web-applications">
</div>

<div id="outline-container-orga4840b1" class="outline-3">
<h3 id="formalizing-deployment-requirements"><a id="orga4840b1"></a><span class="section-number-3">7.1</span> Formalizing deployment requirements</h3>
<div class="outline-text-3" id="text-formalizing-deployment-requirements">
<p>
What is the way to deploy web applications?
</p>

<ul class="org-ul">
<li>General information

<ul class="org-ul">
<li>I have a Java web application.</li>
<li>It compiles by <code>mvn package</code>.</li>
<li>Its main class is <code>blah</code>.</li>
</ul></li>

<li>Network

<ul class="org-ul">
<li>It listens on port 1234.</li>
<li>Its URL should be <code>https://blah/</code>.</li>
<li>It is HTTPS only. HTTP port shouldn't be open at all.</li>
</ul></li>

<li>Resource requirements and burst characteristics

<ul class="org-ul">
<li>It needs 4 GB of RAM for acceptable garbage collection overhead.</li>
<li>It is mostly idle, but when it bursts, it requires 4 cores.</li>
<li>Ops is free to horizontally scale the stateless application server.</li>
</ul></li>
</ul>

<p>
Assuming that I'm on either Amazon Web Services or Google Cloud Platform, how do I formalize my ops requirements in a cloud-agnostic way?
The 2016 article "On Formalizing and Identifying Patterns in Cloud Workload Specifications" <a href="https://ieeexplore.ieee.org/document/7516840/">paywall</a> suggests an answer:
</p>

<ul class="org-ul">
<li>"Approaches include orchestration specifications CAMP [1], [2], Open-CSA, SOA-ML and USDL,
and on the industrial side solutions such as Amazon CloudFormation, OpenStack Heat, Cloudify and Alien4Cloud.
To consolidate and enable interoperability within this variety of approaches, a technical committee by OASIS [3]
defined a standard for the Topology and Orchestration Specification of Cloud Applications (TOSCA) [4], [5],
which defines guidelines and facilities for the complete specification, orchestration and configuration of complex workloads,
addressing portability in heterogeneous clouds."</li>
</ul>

<p>
I assume that it suggests TOSCA.
</p>

<p>
Problem: The average person won't read a specification.
</p>

<p>
Who uses TOSCA?
Who implements that?
Why do I never see it on AWS or GCP?
Why would they follow your standard if they are the de facto standard?
</p>

<p>
Do we need more than one cloud providers?
</p>

<p>
Tools?
</p>

<ul class="org-ul">
<li>kubernetes</li>
<li>keter, pm2</li>
<li><a href="https://developers.redhat.com/blog/2018/06/28/why-kubernetes-is-the-new-application-server/">Why Kubernetes is The New Application Server - RHD Blog</a></li>
</ul>

<p>
Why I don't use NixOS:
</p>

<ul class="org-ul">
<li>NixOS is insane.
Patching every software on Earth is not sustainable.
NixOS is only sustainable if the upstream developers use NixOS.</li>
<li>2018-08-31: Ubuntu has <a href="http://old-releases.ubuntu.com/">old-releases.ubuntu.com</a>.
It archives things back to 2006.
Ubuntu has money to host 12 years of archive.
NixOS doesn't have that much money.
NixOS can only afford to host 1-2 years of archive.</li>
<li>NixOS (or anything else indeed) would be heaven if library writers valued backward compatibility.
I want my library writers to worship backward compatibility like sysadmins worship uptime.
I want them to never break things that depend on them.
But my experience invalidates this hope.
I've seen too many breakages.</li>
</ul>

<p>
Who uses this?
</p>

<ul class="org-ul">
<li>2013 "Towards a Formal Model for Cloud Computing" <a href="https://link.springer.com/chapter/10.1007/978-3-319-06859-6_34">paywall</a></li>
</ul>
</div>
</div>

<div id="outline-container-orge09f588" class="outline-3">
<h3 id="design"><a id="orge09f588"></a><span class="section-number-3">7.2</span> Design</h3>
<div class="outline-text-3" id="text-design">
<ul class="org-ul">
<li>2018-08-30</li>
<li><a href="https://blog.chef.io/2015/04/23/ontology-infrastructure-classification-and-the-design-of-chef/">Ontology, Infrastructure Classification, and the Design of Chef - Chef Blog</a></li>
</ul>

<p>
I agree that 2018 devops ontologies suck, but I think we shouldn't avoid ontology-based systems.
The solution is not to avoid ontologies.
The solution is to craft a proper ontology that is timeless and essential.
This is a hard philosophical problem.
</p>

<p>
For example, the relationship between "application" and "entry point" is timeless.
"Entry point" is an essential property of "application".
By definition, every application has an entry point.
</p>

<p>
Every software has an implicit ontology, like it or not.
</p>

<p>
Every ontology systems that captures accident instead of essence is bound to fail.
Every computer ontology system that avoids philosophical ontology (What is X? What is the timeless essence of X?) is bound to fail.
</p>

<p>
Are these related?
</p>

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Existence_precedes_essence">WP:Existence precedes essence</a></li>
<li><a href="https://en.wikipedia.org/wiki/Essence">WP:Essence</a> (probably unrelated to above)</li>
<li>2011 article "On doing ontology without metaphysics" <a href="https://www.jstor.org/stable/41329478?seq=1#page_scan_tab_contents">paywall</a></li>
<li>2012 article "Philosophies without ontology" <a href="https://www.journals.uchicago.edu/doi/pdfplus/10.14318/hau3.1.015">pdf</a></li>
<li><a href="https://webhome.phy.duke.edu/~rgb/Beowulf/axioms/axioms/node4.html">Philosophy is Bullshit: David Hume</a>

<ul class="org-ul">
<li>What are pseudoquestions?</li>
</ul></li>
</ul>

<p>
How do we answer "What is X?"?
</p>

<p>
There is an easy answer for mathematics.
Mathematics is unique in that its ontology is mostly a priori / by fiat: we say it exists; therefore it exists.
However, would it still be the case if we didn't have languages to express it?
</p>

<p>
For the real world it's hard.
</p>

<p>
Sometimes when we ask "What is X?", we are really asking "What is X for?" instead.
</p>

<p>
How do answer "What is X?" such that the correctness/truth/relevance of the answer does not depend on time/circumstances?
We don't know how to predict the far future.
</p>
</div>
</div>

<div id="outline-container-orge5c3bbb" class="outline-3">
<h3 id="continuous-something"><a id="orge5c3bbb"></a><span class="section-number-3">7.3</span> Continuous something</h3>
<div class="outline-text-3" id="text-continuous-something">
<ul class="org-ul">
<li>Continuous integration

<ul class="org-ul">
<li><a href="https://jenkins.io/">Jenkins</a></li>
</ul></li>

<li>Continuous delivery

<ul class="org-ul">
<li><a href="https://www.spinnaker.io/">Spinnaker</a></li>
</ul></li>

<li>The ideal workflow: Git push triggers deployment?</li>
</ul>

<p>
These pages may be outdated:
</p>

<ul class="org-ul">
<li><a href="%7B%%20link%20ansible.md%20%%7D">Ansible</a></li>
<li><a href="%7B%%20link%20logging.md%20%%7D">Logging</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgcf744a6" class="outline-3">
<h3 id="fabric-vs-ansible"><a id="orgcf744a6"></a><span class="section-number-3">7.4</span> Fabric vs Ansible</h3>
<div class="outline-text-3" id="text-fabric-vs-ansible">
<p>
From the user's point of view, Fabric is a python library, whereas Ansible is YAML-driven framework.
</p>
</div>
</div>

<div id="outline-container-orga9b26f2" class="outline-3">
<h3 id="what-is-devops"><a id="orga9b26f2"></a><span class="section-number-3">7.5</span> What is DevOps?</h3>
<div class="outline-text-3" id="text-what-is-devops">
<p>
XML is not suitable for declarative DevOps.
See comments in <a href="https://github.com/edom/work/blob/master/devops/example.xml">devops/example.xml</a>.
We want the declaration site of some bindings to be as close as possible to their use sites.
</p>

<p>
I'm thinking about using <a href="https://github.com/dhall-lang/dhall-lang">Dhall</a>.
</p>

<p>
Separating Dev and Ops doesn't make sense.
</p>

<p>
Ops can't fix shitty Dev.
No amount of Ops will fix stupid programming.
Ops is impossible without decent Dev.
</p>

<p>
What is Google search result for "devops tools"?
</p>

<ul class="org-ul">
<li>API description language, application description language: WADL vs Swagger vs what else?

<ul class="org-ul">
<li><a href="https://www.w3.org/Submission/wadl/">https://www.w3.org/Submission/wadl/</a></li>
<li>2010 article "DADL: Distributed Application Description Language" <a href="https://www.isi.edu/~mirkovic/publications/dadlsubmit.pdf">pdf</a></li>
</ul></li>

<li>ontology?

<ul class="org-ul">
<li><a href="https://devops.stackexchange.com/questions/1361/what-are-known-efforts-to-establish-devops-ontology-model">https://devops.stackexchange.com/questions/1361/what-are-known-efforts-to-establish-devops-ontology-model</a></li>
<li>2016 article "Application of Ontologies in Cloud Computing: The State-Of-The-Art" <a href="https://arxiv.org/abs/1610.02333">pdf available</a></li>
<li>2015 article "Composable DevOps" <a href="https://dl.acm.org/citation.cfm?id=2867125">paywall</a></li>
<li>2012 article "Towards an Ontology for Cloud Services" <a href="https://ieeexplore.ieee.org/document/6245776/">paywall</a></li>
<li>2012 article "Cloud Computing Ontologies: A Systematic Review" <a href="https://pdfs.semanticscholar.org/cd5f/e6edb6284fcbcb470239464bb0c8e3ee2d50.pdf">pdf</a></li>
<li>2008 article "Toward a Unified Ontology of Cloud Computing" <a href="https://www.researchgate.net/publication/224367196_Toward_a_Unified_Ontology_of_Cloud_Computing">pdf available</a></li>
<li><a href="https://www.skytap.com/blog/cloud-ontology/">https://www.skytap.com/blog/cloud-ontology/</a></li>
<li>OASIS TOSCA; too ad-hoc?</li>
</ul></li>

<li>what

<ul class="org-ul">
<li>2015 article "Composable DevOps: Automated Ontology Based DevOps Maturity Analysis" <a href="https://ieeexplore.ieee.org/document/7207405/">paywall</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org7100c28" class="outline-3">
<h3 id="haskell-for-devops"><a id="org7100c28"></a><span class="section-number-3">7.6</span> Haskell for devops?</h3>
<div class="outline-text-3" id="text-haskell-for-devops">
<ul class="org-ul">
<li><a href="https://www.reddit.com/r/haskell/comments/31vnos/neil_mitchell_devops_with_haskell/">https://www.reddit.com/r/haskell/comments/31vnos/neil_mitchell_devops_with_haskell/</a></li>
<li><a href="https://github.com/commercialhaskell/commercialhaskell/blob/master/taskforce/devops.md">https://github.com/commercialhaskell/commercialhaskell/blob/master/taskforce/devops.md</a></li>
<li><a href="http://hackage.haskell.org/package/azubi">azubi: A simple DevOps tool which will never "reach" enterprice level.</a></li>
</ul>
</div>
</div>

<div id="outline-container-org21f3882" class="outline-3">
<h3 id="migrating-running-processes"><a id="org21f3882"></a><span class="section-number-3">7.7</span> Migrating running processes</h3>
<div class="outline-text-3" id="text-migrating-running-processes">
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Process_migration">WP:Process migration</a></li>
</ul>
</div>
</div>

<div id="outline-container-org0d06b32" class="outline-3">
<h3 id="troubleshooting-dashboard-what-metrics-you-should-monitor-and-why"><a id="org0d06b32"></a><span class="section-number-3">7.8</span> Troubleshooting Dashboard: What metrics you should monitor and why?</h3>
<div class="outline-text-3" id="text-troubleshooting-dashboard-what-metrics-you-should-monitor-and-why">
<ul class="org-ul">
<li>We want to minimize what we need to see.
we want the metric that predicts the most problems.

<ul class="org-ul">
<li>Rising maximum latency is a sign that something is overloaded.</li>
<li>Rising resource usage (CPU, memory, disk, disk queue depth) predicts rising latency.</li>
</ul></li>

<li>We want the metric to help us locate problems.</li>
</ul>

<p>
When such metric deviates from baseline, we know there is problem, but where?
</p>

<p>
What other metrics should we monitor?
</p>

<ul class="org-ul">
<li>HTTP 4xx and 5xx status codes and connection failures?</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org21e2ccf" class="outline-2">
<h2 id="running-x-client-applications-on-docker-on-linux"><a id="org21e2ccf"></a><span class="section-number-2">8</span> Running X client applications on Docker on Linux</h2>
<div class="outline-text-2" id="text-running-x-client-applications-on-docker-on-linux">
<pre class="example">
docker \
    -e DISPLAY \
    -v /tmp/.X11-unix:/tmp/.X11-unix:ro \
    -u &lt;user&gt; &lt;image&gt; &lt;command&gt;
</pre>

<p>
Replace <code>&lt;user&gt;</code> with a non-root user.
You need a non-root user because the X server rejects connection from the root user by default.
You can change this with <code>xhost</code>, but it's better to connect with a non-root user.
</p>

<p>
The <code>&lt;command&gt;</code> argument is optional.
</p>

<p>
The <code>-e DISPLAY</code> parameter reexports the <code>DISPLAY</code> environment variable to the application inside the container.
X client applications will read from this environment variable to determine which server to connect to.
</p>

<p>
The <code>-v HOST:CONT:ro</code> option mounts <code>HOST</code> directory to <code>CONT</code> directory read-only.
This is so that the application in the container can connect to the host X server's Unix socket.
</p>

<p>
On Linux, display <code>:0</code> corresponds to the Unix socket <code>/tmp/.X11-unix/X0</code>.
Everyone who can connect to that Unix socket will
be able to run X client applications on the machine;
it is not specific to Docker.
</p>

<p>
If X complains about shared memory, try:
</p>

<pre class="example">
docker \
    -e DISPLAY=unix$DISPLAY \
    -v /tmp/.X11-unix:/tmp/.X11-unix:ro \
    -u &lt;user&gt; &lt;image&gt; &lt;command&gt;
</pre>
</div>
</div>
<div id="outline-container-org6374e8b" class="outline-2">
<h2 id="using-git"><a id="org6374e8b"></a><span class="section-number-2">9</span> Using Git</h2>
<div class="outline-text-2" id="text-using-git">
</div>

<div id="outline-container-orgd7dab51" class="outline-3">
<h3 id="mental-model"><a id="orgd7dab51"></a><span class="section-number-3">9.1</span> Mental model</h3>
<div class="outline-text-3" id="text-mental-model">
<p>
A <i>commit</i> is a snapshot of the working tree.
</p>

<p>
A <i>reference</i> names a commit so that you can write <code>master</code>
instead of <code>da39a3e</code>.
</p>

<p>
If you are a visual person,
you can think about how git commands change
the picture shown by <code>gitk</code>
(a tool for visualizing Git repositories).
</p>

<p>
In gitk, a blue circle is a commit,
a green box is a <i>reference</i>,
and the bold green box is the <i>head</i>.
</p>

<p>
The head points to the commit that will be the parent of the next commit.
</p>

<p>
When you <code>git init</code>, Git creates a <code>.git</code> directory.
</p>

<p>
When you <code>git status</code>, it prints <code>On branch master</code>.
It means that the head points to the same commit pointed by the reference named <code>master</code>.
</p>

<p>
When you <code>git commit</code>, you make a new commit (blue circle),
and move the current branch (bold green box) to that new commit.
</p>

<p>
When you <code>git reset Target</code>,
you move the head (bold green box) to <code>Target</code>.
</p>

<p>
If you are not yet comfortable with Git,
back up your data by copying the <code>.git</code> directory.
It can get corrupted.
Things will go wrong.
You may accidentally do something and don't know how to recover.
Computers don't understand what you mean.
They do what you say, not what you mean.
</p>
</div>
</div>

<div id="outline-container-org0f83124" class="outline-3">
<h3 id="more-information"><a id="org0f83124"></a><span class="section-number-3">9.2</span> More information</h3>
<div class="outline-text-3" id="text-more-information">
<p>
A Git <i>object</i>:
</p>

<ul class="org-ul">
<li>is identified by a SHA-1 hash;</li>
<li>is either a blob, tree, or commit;</li>
<li>is stored as a file somewhere in the <code>.git</code> folder.</li>
</ul>

<p>
A <i>commit</i> has zero or more parents.
It also refers to a tree.
</p>

<p>
A <i>tree</i> is a list of references.
Every reference points to either a tree or a blob.
</p>

<p>
For more information, read the <a href="https://git-scm.com/book">Pro Git</a> book
or the <a href="https://git-scm.com/docs">manpages</a> (<code>man git</code>).
</p>
</div>
</div>

<div id="outline-container-orgb234124" class="outline-3">
<h3 id="things-to-write"><a id="orgb234124"></a><span class="section-number-3">9.3</span> Things to write?</h3>
<div class="outline-text-3" id="text-things-to-write">
<ul class="org-ul">
<li>Git fundamentals:

<ul class="org-ul">
<li>Git store things in the <code>.git</code> directory.</li>
<li>Why merge conflicts? How to resolve them? How to use <code>meld</code>? How to do a three-way merge?</li>
<li>Avoid changing spaces. Avoid using your IDE to reformat files that are already commited.</li>
</ul></li>

<li>Workaround for bad user experience

<ul class="org-ul">
<li>Disable git-gui GC warning:

<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/1106529/how-to-skip-loose-object-popup-when-running-git-gui">https://stackoverflow.com/questions/1106529/how-to-skip-loose-object-popup-when-running-git-gui</a></li>
</ul></li>
</ul></li>

<li><a href="https://manishearth.github.io/blog/2017/03/05/understanding-git-filter-branch/">Understanding Git Filter-branch and the Git Storage Model</a></li>
</ul>
</div>
</div>

<div id="outline-container-org567d0c2" class="outline-3">
<h3 id="git-hash-collisions"><a id="org567d0c2"></a><span class="section-number-3">9.4</span> Git hash collisions</h3>
<div class="outline-text-3" id="text-git-hash-collisions">
<p>
Git hash collision may occur albeit extremely unlikely.
Git assumes that if two objects have the same hash, then they are the same object.
This is false; the converse is true: if two objects are the same, then they have the same hash.
When hash collision occur, Git may silently lose data.
Git is an example of software that is incorrect but works for the use cases it was designed for (source code versioning).
Git is not meant to be used as an arbitrary database.
</p>

<p>
Other softwares are incorrect as well.
We routinely make software that assumes that there will never be more than 2<sup>64</sup> rows in a database table.
</p>

<p>
Is it even possible to write correct software at all?
</p>
</div>
</div>

<div id="outline-container-org1ceab09" class="outline-3">
<h3 id="related-tools"><a id="org1ceab09"></a><span class="section-number-3">9.5</span> Related tools</h3>
<div class="outline-text-3" id="text-related-tools">
<ul class="org-ul">
<li>git-gui, for making commits</li>
<li>gitk, for showing history</li>
<li>meld, for three-way diff/merge</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org679450f" class="outline-2">
<h2 id="speeding-up-git"><a id="org679450f"></a><span class="section-number-2">10</span> Speeding up Git</h2>
<div class="outline-text-2" id="text-speeding-up-git">
</div>

<div id="outline-container-org803771d" class="outline-3">
<h3 id="the-problem"><a id="org803771d"></a><span class="section-number-3">10.1</span> The problem</h3>
<div class="outline-text-3" id="text-the-problem">
<p>
I have a repository with 100,000 files and 1,000,000 objects.
Git rebase is slow.
Git interactive rebase is even slower.
</p>
</div>
</div>

<div id="outline-container-org943e881" class="outline-3">
<h3 id="hypothesis-how-git-rebase-works"><a id="org943e881"></a><span class="section-number-3">10.2</span> Hypothesis: How git rebase works</h3>
<div class="outline-text-3" id="text-hypothesis-how-git-rebase-works">
<p>
I guess <code>git rebase --onto TARGET BASE MOVE</code> works like this:
</p>

<pre class="example">
git checkout --orphan TARGET --
git cherry-pick &lt;all commits from BASE to MOVE, excluding BASE, including MOVE&gt;
git checkout -B MOVE
</pre>

<p>
Cherry-pick is also slow.
I guess that speeding up cherry-pick will also speed up rebase.
</p>

<p>
Checkout is also slow.
I guess that speeding up checkout will also speed up cherry-pick.
</p>

<p>
It seems that <code>commit</code> and <code>write-tree</code> are slow.
</p>

<ul class="org-ul">
<li><a href="https://git-scm.com/book/en/v2/Git-Internals-Environment-Variables">Git - Environment Variables</a>

<ul class="org-ul">
<li><code>GIT_TRACE_PERFORMANCE=true</code> has no effect.
Which git version is it for?</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org2fd73f0" class="outline-3">
<h3 id="the-plan"><a id="org2fd73f0"></a><span class="section-number-3">10.3</span> The plan</h3>
<div class="outline-text-3" id="text-the-plan">
<ul class="org-ul">
<li><a href="https://www.atlassian.com/blog/git/handle-big-repositories-git">atlassian.com: How to manage big Git repositories</a>

<ul class="org-ul">
<li>Try git sparse checkout?
It seems that sparse-checkout and rebase doesn't mix.</li>
</ul></li>

<li>Not recommended: <code>git gc --aggressive</code> (doesn't do what we think it would do).</li>
</ul>
</div>
</div>

<div id="outline-container-org36959e1" class="outline-3">
<h3 id="plan-make-a-rebase-that-uses-only-trees-and-not-indexes"><a id="org36959e1"></a><span class="section-number-3">10.4</span> Plan: Make a rebase that uses only trees and not indexes</h3>
<div class="outline-text-3" id="text-plan-make-a-rebase-that-uses-only-trees-and-not-indexes">
<p>
If a tree changes, all its ancestors have to be rewritten.
</p>
</div>
</div>

<div id="outline-container-orgac96d05" class="outline-3">
<h3 id="plan-just-use-subtrees-and-keep-the-repository-small"><a id="orgac96d05"></a><span class="section-number-3">10.5</span> Plan: Just use subtrees and keep the repository small</h3>
<div class="outline-text-3" id="text-plan-just-use-subtrees-and-keep-the-repository-small">
<p>
I think this is the least-effort solution that solves (works around) the problem.
</p>
</div>
</div>
</div>
<div id="outline-container-org043cc18" class="outline-2">
<h2 id="using-gradle"><a id="org043cc18"></a><span class="section-number-2">11</span> Using Gradle</h2>
<div class="outline-text-2" id="text-using-gradle">
<ul class="org-ul">
<li>Conclusion:

<ul class="org-ul">
<li>I still haven't found any reason to switch from Maven to Gradle
(other than "because this project is already using it").</li>
</ul></li>

<li>Which version of Gradle are we talking about?

<ul class="org-ul">
<li>Gradle 2.9.</li>
</ul></li>

<li>What problems does Gradle solve?

<ul class="org-ul">
<li>Dependency management (picking the libraries' versions and downloading the corresponding JAR files) for Java.</li>
</ul></li>

<li>Do we have those problems?

<ul class="org-ul">
<li>Yes. Software has external dependencies.</li>
</ul></li>

<li>Does Gradle 2.9 solve those problems well?

<ul class="org-ul">
<li>No.Â Gradle 2.9's dependency resolution algorithm doesn't compute the intersection of version ranges. (Maybe now it does.)

<ul class="org-ul">
<li>Why does it have this defect? Maybe Gradle developers had different priorities, or they didn't know how to do it.</li>
<li><a href="https://danysk.github.io/information%20technology/gradle-dependency-resolution-is-insane/">Danilo Pianini: Version ranges resolution in Gradle is insane</a></li>
</ul></li>

<li>However, there are times we want exact versions instead of version ranges. You want deterministic builds.
In this case, there's no need to compute intersections.

<ul class="org-ul">
<li><a href="http://blog.danlew.net/2015/09/09/dont-use-dynamic-versions-for-your-dependencies/">Dan Lew: Don't use dynamic versions for your dependencies</a></li>
</ul></li>

<li>On the other hand, we want to benefit from library updates. Maybe there are security fixes.
So we want version ranges?

<ul class="org-ul">
<li>But this assumes that the library maintainer obeys Semantic Versioning.</li>
</ul></li>
</ul></li>

<li>Why are we using Gradle instead of Maven? What Maven annoyances does Gradle hide from us?

<ul class="org-ul">
<li>Gradle build scripts are shorter (but IDEA autocompletes Maven pom.xml).</li>
</ul></li>

<li>Why <i>not</i> Gradle?

<ul class="org-ul">
<li>Why Maven instead of Gradle?

<ul class="org-ul">
<li>IDEA integrates better with Maven because pom.xml is configuration, not program.
(But IDEA can also open build.gradle?)

<ul class="org-ul">
<li>Opening a pom.xml just works in IDEA.</li>
</ul></li>
</ul></li>
</ul></li>

<li>How does Gradle 2.9 annoy us?

<ul class="org-ul">
<li>We often have to explicitly tell Gradle 2.9 the exact versions of the libraries we want because it doesn't compute intersections properly.
Maven computes intersections.</li>
<li>Gradle doesn't download dependencies in parallel. (But neither does Maven.)</li>
<li>Gradle 2.9 doesn't generate a useful Maven POM, only a minimally valid POM.</li>
</ul></li>

<li>When should I split a Gradle subproject or a Maven module?

<ul class="org-ul">
<li>When we need to reuse one subproject without the others.</li>
<li>If they don't make sense separately, don't split them; it'll just slow down the build for nothing.</li>
<li>The same goes for Maven modules.</li>
</ul></li>

<li>Woes

<ul class="org-ul">
<li>ShadowJar doesn't work with Gradle 2.13.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org672ef1e" class="outline-2">
<h2 id="using-java"><a id="org672ef1e"></a><span class="section-number-2">12</span> Using Java</h2>
<div class="outline-text-2" id="text-using-java">
<ul class="org-ul">
<li>How to profile a Java application startup?

<ul class="org-ul">
<li>How to make a Java application wait for a debugger to attach on startup?</li>
</ul></li>

<li>Speeding up Java startup

<ul class="org-ul">
<li>Hypothesis: IntelliJ IDEA startup is slow because it decompresses JAR.
Java startup would be faster if the JARs were decompressed (created using <code>jar c0</code>).

<ul class="org-ul">
<li>How do we test this?
Profile IntelliJ IDEA startup.</li>
</ul></li>

<li>Hypothesis: The IDE would be faster if it's compiled ahead-of-time.

<ul class="org-ul">
<li>Can we cache the just-in-time compilation result?</li>
</ul></li>

<li>Does supercompiling the IDE affect speed?</li>
</ul></li>

<li>We can use the JVM without the Java language.

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/List_of_JVM_languages">https://en.wikipedia.org/wiki/List_of_JVM_languages</a></li>
</ul></li>

<li>Profiling

<ul class="org-ul">
<li>Install NetBeans.</li>
<li>Choose 'Profile' in the menu, and then 'Attach to External Process'.</li>
<li>Click the down-pointing triangle on the right of the Attach button.</li>
<li>Choose 'Setup Attach to Process&#x2026;'.</li>
<li>Select 'Manually started remote Java process'.</li>
<li>Choose the remote operating system.</li>
<li>Follow further instructions in NetBeans.

<ul class="org-ul">
<li>If you need <code>JAVA_HOME</code> on Oracle JRE 8 on Ubuntu 14.04, use <code>/usr/lib/jvm/java-8-oracle/jre</code>.</li>
</ul></li>
</ul></li>

<li>How do I start the JVM with a profiling agent?</li>
<li>Let the compiler help you.

<ul class="org-ul">
<li>If you make your the fields of your Java class final, you will never forget to set it.

<ul class="org-ul">
<li>You don't need to remember anything.</li>
<li>It just won't compile.</li>
</ul></li>

<li>You can have dependency injection without dependency injection container/framework.

<ul class="org-ul">
<li><a href="https://sites.google.com/site/unclebobconsultingllc/blogs-by-robert-martin/dependency-injection-inversion">https://sites.google.com/site/unclebobconsultingllc/blogs-by-robert-martin/dependency-injection-inversion</a></li>
<li>If you have so many classes that instantiating them hurts, don't create so many classes in the first place.</li>
<li>Neutral article <a href="http://fabien.potencier.org/do-you-need-a-dependency-injection-container.html">http://fabien.potencier.org/do-you-need-a-dependency-injection-container.html</a></li>
<li>Very opinionated article, borderline fanatical <a href="http://www.yegor256.com/2014/10/03/di-containers-are-evil.html">http://www.yegor256.com/2014/10/03/di-containers-are-evil.html</a></li>
<li><a href="http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/">http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/</a>

<ul class="org-ul">
<li>"In short, the problem with Service Locator is that it hides a class' dependencies, causing run-time errors instead of compile-time errors [&#x2026;]"</li>
</ul></li>
</ul></li>
</ul></li>

<li>Package by feature, not by layer: <a href="http://www.javapractices.com/topic/TopicAction.do?Id=205">http://www.javapractices.com/topic/TopicAction.do?Id=205</a>

<ul class="org-ul">
<li>Dont separate model, data, entity, accessor, and service packages; package by feature not layer</li>
</ul></li>

<li>IntelliJ IDEA can open a Maven project whose POM XML file name is not pom.xml.</li>
<li>JVM memory usage problem

<ul class="org-ul">
<li>Tuning JVM memory usage

<ul class="org-ul">
<li><a href="https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/tune_footprint.html">https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/tune_footprint.html</a></li>
<li><a href="https://www.javacodegeeks.com/2017/11/minimize-java-memory-usage-right-garbage-collector.html">https://www.javacodegeeks.com/2017/11/minimize-java-memory-usage-right-garbage-collector.html</a></li>
</ul></li>

<li>"Make JVM respect CPU and RAM limits" <a href="https://hub.docker.com/_/openjdk/">https://hub.docker.com/_/openjdk/</a></li>
<li><a href="https://blogs.oracle.com/java-platform-group/java-se-support-for-docker-cpu-and-memory-limits">https://blogs.oracle.com/java-platform-group/java-se-support-for-docker-cpu-and-memory-limits</a></li>
</ul></li>

<li>2017-02-21

<ul class="org-ul">
<li><a href="https://github.com/javaparser/javaparser">https://github.com/javaparser/javaparser</a></li>
<li><a href="https://github.com/javaparser/javasymbolsolver">https://github.com/javaparser/javasymbolsolver</a></li>
</ul></li>

<li><a href="https://github.com/java-deobfuscator/deobfuscator">https://github.com/java-deobfuscator/deobfuscator</a></li>
<li>2017-05-20

<ul class="org-ul">
<li>Generating Java code

<ul class="org-ul">
<li>Alternatives

<ul class="org-ul">
<li>Use Python to generate Java code?
Python comes installed with Ubuntu.</li>
<li>Use Java CodeModel to generate Java code.
<a href="https://github.com/javaee/jaxb-codemodel">https://github.com/javaee/jaxb-codemodel</a></li>
<li>Use the Haskell package <code>language-java</code>
to generate Java code.</li>
<li>Read table metadata from DataSource,
generate Java source file for Entity and DAO.</li>
</ul></li>
</ul></li>
</ul></li>

<li>2017-05-18

<ul class="org-ul">
<li>Java is procedural.</li>
<li><code>object.method(argument)</code> is a syntactic sugar for <code>method(object, argument)</code>.</li>
<li>Where should the method <code>m</code> be defined?
It can be defined in both <code>a</code> and <code>b</code>.
<code>a.m(b)</code> or <code>b.m(a)</code> or <code>C.m(a,b)</code>?
If you have to ask this, your design is wrong.</li>
<li>Antipattern: two classes A and B with conversion from A to B and B to A?

<ul class="org-ul">
<li>Solution: Delete one of them?</li>
</ul></li>
</ul></li>

<li><a href="http://blog.sokolenko.me/2014/11/javavm-options-production.html">http://blog.sokolenko.me/2014/11/javavm-options-production.html</a></li>
<li><a href="http://maintainj.com/index.html">MaintainJ: "We simplify the complexity of maintaining Java code"</a>

<ul class="org-ul">
<li>Watch the demo.</li>
<li>What does it do, as seen by programmers, in non-marketing tech-speak?

<ul class="org-ul">
<li>Start/stop dumping call trace of a running JVM into a file.</li>
<li>Open the dump as a sequence diagram in Eclipse.</li>
<li>Some filtering.</li>
</ul></li>
</ul></li>

<li><a href="https://www.jethrocarr.com/2013/11/30/jconsole-to-remote-servers-easily/">Jconsole to remote servers, easily | Jethro Carr</a></li>
</ul>
</div>
</div>
<div id="outline-container-orga1e4cc0" class="outline-2">
<h2 id="using-maven"><a id="orga1e4cc0"></a><span class="section-number-2">13</span> Using Maven</h2>
<div class="outline-text-2" id="text-using-maven">
<p>
The strength of Maven is its ecosystem.
Network effect.
</p>

<p>
Maven is rigid.
All projects build in the same way.
If you want Maven to do something, but you can't find an example on the Internet, you should assume that it can't be done.
</p>

<p>
To compile your project, run <code>mvn compile</code>.
</p>

<p>
To package your project, run <code>mvn package</code>.
</p>

<p>
Maven output directory is <code>target</code>.
</p>
</div>
</div>
<div id="outline-container-org2e92a8a" class="outline-2">
<h2 id="removing-nag-screens"><a id="org2e92a8a"></a><span class="section-number-2">14</span> Removing nag screens</h2>
<div class="outline-text-2" id="text-removing-nag-screens">
<p>
Copy the respective fragments to your browser's JavaScript Console (Ctrl+Shift+J on Chromium).
</p>

<p>
Don't run codes you don't trust.
</p>
</div>

<div id="outline-container-org6fba892" class="outline-3">
<h3 id="make-www.webtoon.com-fast"><a id="org6fba892"></a><span class="section-number-3">14.1</span> Make <a href="http://www.webtoon.com/">www.webtoon.com</a> fast</h3>
<div class="outline-text-3" id="text-make-www.webtoon.com-fast">
<p>
That website has an unacceptably slow scrolling.
This script makes it fast.
</p>
</div>

<div id="outline-container-org12ede15" class="outline-4">
<h4 id="usage"><a id="org12ede15"></a><span class="section-number-4">14.1.1</span> Usage</h4>
<div class="outline-text-4" id="text-usage">
<p>
Open the comic episode you want to read.
</p>

<p>
Paste this fragment into your browser's JavaScript console.
</p>

<pre class="example">
// Retain big images. Discard everything else.
var images = [];
document.querySelectorAll("img").forEach(function (element) {
    images.push(element);
});
document.head.innerHTML = "";
document.body.innerHTML = "";
images.forEach(function (element) {
    const big = 256;
    const url = element.dataset.url;
    if (url &amp;&amp; element.width &gt;= big) {
        element.src = url;
        element.style.display = "block";
        document.body.appendChild(element);
    }
});
</pre>

<p>
To go the the next episode, increment the <code>episode_no</code> parameter in the address bar.
</p>
</div>
</div>

<div id="outline-container-org9e1653e" class="outline-4">
<h4 id="notes"><a id="org9e1653e"></a><span class="section-number-4">14.1.2</span> Notes</h4>
<div class="outline-text-4" id="text-notes">
<p>
I tried <code>getEventListeners</code> and <code>removeEventListener</code> but they don't work.
</p>
</div>
</div>
</div>

<div id="outline-container-org5fc6f68" class="outline-3">
<h3 id="remove-quora-nag-screen"><a id="org5fc6f68"></a><span class="section-number-3">14.2</span> Remove Quora nag screen</h3>
<div class="outline-text-3" id="text-remove-quora-nag-screen">
<p>
Tested on 2017-07-08.
</p>

<p>
Not only does Quora put up a nag screen, it also disables scrolling.
</p>

<pre class="example">
document.querySelectorAll("div[id]").forEach(function (x) {
    if (x.id.indexOf("signup_wall_wrapper") &gt;= 0) { x.remove(); }
});
document.body.classList.remove("signup_wall_prevent_scroll");
</pre>
</div>
</div>

<div id="outline-container-orgf955613" class="outline-3">
<h3 id="remove-pinterest-nag-screen"><a id="orgf955613"></a><span class="section-number-3">14.3</span> Remove Pinterest nag screen</h3>
<div class="outline-text-3" id="text-remove-pinterest-nag-screen">
<p>
Tested on 2018-05-13.
</p>

<p>
Type 1.
</p>

<pre class="example">
document.querySelector("[data-test-giftwrap]").remove();
</pre>

<p>
Type 2.
</p>

<pre class="example">
document.querySelector("#desktopWrapper").style.position = "static";
document.querySelector("body style").remove();
document.querySelector(".FullPageModal__scroller").parentNode.remove();
</pre>
</div>
</div>

<div id="outline-container-org1242969" class="outline-3">
<h3 id="group-gmail-mails-by-sender-email"><a id="org1242969"></a><span class="section-number-3">14.4</span> Group Gmail mails by sender email</h3>
<div class="outline-text-3" id="text-group-gmail-mails-by-sender-email">
<pre class="example">
(function () {
    var group = {};
    document.querySelectorAll("[email]").forEach(function (elem) {
        var sender = elem.getAttribute("email");
        group[sender] = 1 + (group[sender] || 0);
    });
    var list = [];
    var sender;
    var count;
    for (sender in group) {
        count = group[sender];
        list.push([count, sender]);
    }
    list.sort(function (a, b) {
        return -Math.sign(a[0] - b[0]);
    })
    return list;
})();
</pre>
</div>
</div>

<div id="outline-container-org49751fa" class="outline-3">
<h3 id="chrome-bookmarklet-make-markdown-link-for-page"><a id="org49751fa"></a><span class="section-number-3">14.5</span> Chrome bookmarklet: Make Markdown link for page</h3>
<div class="outline-text-3" id="text-chrome-bookmarklet-make-markdown-link-for-page">
<p>
This may produce invalid Markdown.
Check before you copy.
</p>

<pre class="example">
javascript:window.prompt("Copy to clipboard: Ctrl+C, Enter", "- [" + document.title + "](" + document.URL + ")");
</pre>
</div>
</div>
</div>
<div id="outline-container-org94ef6ee" class="outline-2">
<h2 id="using-python"><a id="org94ef6ee"></a><span class="section-number-2">15</span> Using Python</h2>
<div class="outline-text-2" id="text-using-python">
<p>
Python virtualenv is relatively forward-compatible.
Don't waste time installing Python from source.
Use the Python packaged with your distro, and use virtualenv.
The Pip that comes with Python 3.7.0 fails because Ubuntu 14.04 OpenSSL is too old (or Python doesn't bother to maintain backward compatibility).
</p>

<pre class="example">
sudo apt-get install python-virtualenv
</pre>

<p>
Create a virtualenv directory using <code>virtualenv PATH</code>
Note: After the directory is created, it can't be renamed.
</p>

<p>
<a href="https://leemendelowitz.github.io/blog/how-does-python-find-packages.html">How does python find packages?</a>
</p>
</div>
</div>
<div id="outline-container-org8b82e36" class="outline-2">
<h2 id="security"><a id="org8b82e36"></a><span class="section-number-2">16</span> Security</h2>
<div class="outline-text-2" id="text-security">
<ul class="org-ul">
<li>Bastion hosts, aka jump boxes

<ul class="org-ul">
<li>Does a jump box add any security?

<ul class="org-ul">
<li><a href="http://cloudacademy.com/blog/aws-bastion-host-nat-instances-vpc-peering-security/">http://cloudacademy.com/blog/aws-bastion-host-nat-instances-vpc-peering-security/</a></li>
<li><a href="http://www.infoworld.com/article/2612700/security/-jump-boxes--improve-security--if-you-set-them-up-right.html">http://www.infoworld.com/article/2612700/security/-jump-boxes--improve-security--if-you-set-them-up-right.html</a></li>
</ul></li>
</ul></li>

<li>Check your HTTPS

<ul class="org-ul">
<li><a href="https://www.ssllabs.com/ssltest/">Test your HTTPS implementation</a>; it's too easy to do security wrong.</li>
</ul></li>

<li><a href="https://www.vaultproject.io/">HashiCorp Vault</a>

<ul class="org-ul">
<li><a href="https://github.com/hashicorp/vault">source code</a>, language Go, license MPL 2.0</li>
<li>What is Vault? "Vault is a tool for securely accessing <i>secrets</i>." (<a href="https://www.vaultproject.io/intro/index.html">Introduction</a>)</li>
<li>What can it do?</li>
<li>How do I install it?</li>
<li>How do I run it?</li>
<li>How do I interact with it?</li>
<li><a href="https://www.hashicorp.com/">HashiCorp</a></li>
</ul></li>

<li><a href="https://stackoverflow.com/questions/5930529/how-is-revocation-of-a-root-certificate-handled">SE 5930529: How is revocation of a root certificate handled?</a></li>
<li><a href="https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol">WP: Online Certificate Status Protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/OCSP_stapling">WP: OCSP Stapling</a> moves the cost from client to server.</li>
<li>Zero trust security model (ZTSM)

<ul class="org-ul">
<li>"How would I design my system without any firewalls?"</li>
<li><a href="https://www.scaleft.com/beyondcorp/">https://www.scaleft.com/beyondcorp/</a>

<ul class="org-ul">
<li>old approach: perimeter security, medieval castle, weak core, strong perimeter</li>
<li><a href="https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43231.pdf">https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43231.pdf</a>

<ul class="org-ul">
<li>"The perimeter security model works well enough when all employees work exclusively in buildings owned by an enterprise."</li>
<li>"access depends solely on device and user credentials, regardless of a user's network location"</li>
<li>"All access to enterprise resources is fully authenticated, fully authorized, and fully encrypted based upon device state and user credentials."</li>
<li>ZTSM obviates VPN (virtual private network).</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org7bd9bcd" class="outline-2">
<h2 id="software"><a id="org7bd9bcd"></a><span class="section-number-2">17</span> Software</h2>
<div class="outline-text-2" id="text-software">
<ul class="org-ul">
<li>Web development

<ul class="org-ul">
<li><a href="https://webpack.js.org/guides/typescript/">Set up Webpack to transpile and bundle TypeScript sources</a></li>
<li>HTML DOM, web, browser, JavaScript

<ul class="org-ul">
<li><a href="https://gist.github.com/paulirish/5d52fb081b3570c81e3a">What forces layout / reflow</a></li>
</ul></li>
</ul></li>

<li>Software for scientists

<ul class="org-ul">
<li><a href="https://gist.github.com/stared/9130888">stared github gist</a></li>
<li><a href="https://www.quora.com/What-wiki-blog-software-do-PhD-students-use-to-maintain-personal-notes-of-their-daily-reading-research">https://www.quora.com/What-wiki-blog-software-do-PhD-students-use-to-maintain-personal-notes-of-their-daily-reading-research</a></li>
</ul></li>

<li>Legality of software

<ul class="org-ul">
<li>Why doesn't Facebook just keep using Apache Software License version 2.0 for React?
Why does it roll out its own patent license?

<ul class="org-ul">
<li>Update: Facebook has switched back to Apache-2.0.</li>
</ul></li>
</ul></li>

<li><a href="%7B%%20link%20autotools.md%20%%7D">Autotools</a></li>
<li>Functional programming

<ul class="org-ul">
<li>Haskell

<ul class="org-ul">
<li><a href="https://github.com/sellout/recursion-scheme-talk/blob/master/recursion-scheme-talk.org">https://github.com/sellout/recursion-scheme-talk/blob/master/recursion-scheme-talk.org</a></li>
<li><a href="https://github.com/krispo/awesome-haskell">https://github.com/krispo/awesome-haskell</a></li>
<li>Cabal is the key to Haskell usability and adoption?

<ul class="org-ul">
<li><a href="https://www.haskell.org/cabal/">https://www.haskell.org/cabal/</a></li>
<li>Haskell lacks something like ruby gem, python pypi, or nodejs npm.

<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/5138881/how-are-ghc-pkg-and-cabal-programs-related-haskell">https://stackoverflow.com/questions/5138881/how-are-ghc-pkg-and-cabal-programs-related-haskell</a></li>
<li><a href="https://stackoverflow.com/questions/2706667/what-is-the-relationship-between-ghc-pkg-and-cabal">https://stackoverflow.com/questions/2706667/what-is-the-relationship-between-ghc-pkg-and-cabal</a></li>
</ul></li>
</ul></li>
</ul></li>

<li>Pure-lang

<ul class="org-ul">
<li><a href="https://puredocs.bitbucket.io/pure.html#lazy-evaluation-and-streams">https://puredocs.bitbucket.io/pure.html#lazy-evaluation-and-streams</a></li>
<li><a href="https://bitbucket.org/purelang/pure-lang/wiki/Rewriting">https://bitbucket.org/purelang/pure-lang/wiki/Rewriting</a></li>
<li><a href="https://agraef.github.io/pure-docs/#language-and-standard-library">https://agraef.github.io/pure-docs/#language-and-standard-library</a></li>
<li><a href="https://agraef.github.io/pure-docs/pure.html#pure-overview">https://agraef.github.io/pure-docs/pure.html#pure-overview</a></li>
<li><a href="https://wiki.haskell.org/Applications_and_libraries/Music_and_sound">https://wiki.haskell.org/Applications_and_libraries/Music_and_sound</a></li>
</ul></li>
</ul></li>

<li>Ungrouped

<ul class="org-ul">
<li><a href="https://github.com/plasma-umass/doppio">doppio</a>, a JVM written in TypeScript, with a POSIX-compatible runtime system

<ul class="org-ul">
<li>from <a href="https://www.reddit.com/r/programming/comments/3xkn75/nashorn_javascript_on_the_jvm_ftw/">https://www.reddit.com/r/programming/comments/3xkn75/nashorn_javascript_on_the_jvm_ftw/</a></li>
</ul></li>
</ul></li>

<li>My abandoned software

<ul class="org-ul">
<li>These are not usable.</li>
<li><a href="https://github.com/edom/pragmatic">Pragmatic Haskell library</a>
tries to standardize the ways of doing things.</li>
<li><a href="https://github.com/edom/try-phabricator">Try Phabricator</a>
uses Docker Compose and is bundled with Apache, PHP, and MariaDB.
It worked out of the box, but it was not designed for production.</li>
<li><a href="https://github.com/edom/apt-manual-mirror">APT manual mirror</a> copies selected Debian packages
into local directory while preserving the layout.
It allows you to mirror only the packages you want.</li>
<li><a href="https://github.com/edom/haji">Haji</a> tries to be a Java bytecode interpreter written in Haskell.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org85973c3" class="outline-2">
<h2 id="administering-a-computer"><a id="org85973c3"></a><span class="section-number-2">18</span> Administering a computer</h2>
<div class="outline-text-2" id="text-administering-a-computer">
<ul class="org-ul">
<li>Why use swap partitions and not swap files?

<ul class="org-ul">
<li>Defragmenting swap files might have undesirable effects.

<ul class="org-ul">
<li><a href="https://lwn.net/Articles/317787/">https://lwn.net/Articles/317787/</a></li>
</ul></li>
</ul></li>

<li>ext4 defragmentation tools

<ul class="org-ul">
<li><a href="https://askubuntu.com/questions/221079/how-to-defrag-an-ext4-filesystem">https://askubuntu.com/questions/221079/how-to-defrag-an-ext4-filesystem</a>

<ul class="org-ul">
<li>e2freefrag DEV, e4defrag -c FILE</li>
</ul></li>
</ul></li>

<li>SATA 3 Gbps controller problem?

<ul class="org-ul">
<li><a href="https://github.com/zfsonlinux/zfs/issues/4873">https://github.com/zfsonlinux/zfs/issues/4873</a></li>
</ul></li>

<li>Security

<ul class="org-ul">
<li>Isolating (sandboxing) an application

<ul class="org-ul">
<li>Creating a dedicated limited user for an application

<ul class="org-ul">
<li><code>adduser --system</code>, or just use the <code>nobody</code> user?</li>
</ul></li>
</ul></li>

<li>Many methods of isolation

<ul class="org-ul">
<li><a href="https://unix.stackexchange.com/questions/384117/linux-isolate-process-without-containers">https://unix.stackexchange.com/questions/384117/linux-isolate-process-without-containers</a></li>
<li><a href="https://www.engineyard.com/blog/linux-containers-isolation">https://www.engineyard.com/blog/linux-containers-isolation</a></li>
<li><a href="https://opensourceforu.com/2016/07/many-approaches-sandboxing-linux/">https://opensourceforu.com/2016/07/many-approaches-sandboxing-linux/</a></li>
</ul></li>
</ul></li>

<li>Why isn't ssh fail2ban the default?
Why is security not the default?</li>
<li>2014, "Is there any solution to make OpenVPN authentication with Google ID?", <a href="https://serverfault.com/questions/597833/is-there-any-solution-to-make-openvpn-authentication-with-google-id">SF 597833</a></li>
<li>man page usability, terminal usability, reducing cognitive load

<ul class="org-ul">
<li><a href="https://tldr.sh/">tldr.sh</a>: "The TLDR pages are a community effort to simplify the beloved man pages with practical examples."</li>
</ul></li>

<li><a href="https://stackoverflow.com/questions/22697049/what-is-the-difference-between-google-app-engine-and-google-compute-engine">SO 22697049: difference between Google App Engine and Google Compute Engine</a></li>
<li>A good OS (operating system) is invisible like a good design.

<ul class="org-ul">
<li>The user can't tell whether an OS is good.
If the OS is good, everything runs smoothly.</li>
<li>But the user can tell whether an OS is bad.
Crashes due to non-hardware problems.
Things that don't just work.</li>
</ul></li>

<li><a href="https://felipec.wordpress.com/2011/06/16/after-two-weeks-of-using-gnome-3-i-officially-hate-it/">https://felipec.wordpress.com/2011/06/16/after-two-weeks-of-using-gnome-3-i-officially-hate-it/</a>

<ul class="org-ul">
<li>Why does the author disapprove of GNOME 3?</li>
</ul></li>

<li><a href="https://libcloud.apache.org/">https://libcloud.apache.org/</a>

<ul class="org-ul">
<li>"One Interface To Rule Them All: Python library for interacting with many of the popular cloud service providers using a unified API."</li>
</ul></li>

<li>Systems should be secure by default.

<ul class="org-ul">
<li>UNIX/Linux woes

<ul class="org-ul">
<li>Why is SSH fail2ban not installed by default?</li>
<li>Why does an application run as the user?

<ul class="org-ul">
<li>I think this is a design flaw.
It's a big gaping security hole.
It allows an application to access all your files.
But how do we fix this without sacrificing convenience?</li>
<li>Why is sandboxing not the default?</li>
</ul></li>

<li>How do we understand SELinux?

<ul class="org-ul">
<li><a href="https://www.computernetworkingnotes.com/rhce-study-guide/selinux-explained-with-examples-in-easy-language.html">SELinux Explained with Examples in Easy Language</a></li>
<li>NSA made SELinux. How trustworthy is it? Does it have NSA backdoors?

<ul class="org-ul">
<li><a href="https://security.stackexchange.com/questions/42383/how-trustworthy-is-selinux">linux - How trustworthy is SELinux? - Information Security Stack Exchange</a></li>
<li>2017, <a href="https://www.reddit.com/r/linux/comments/54in5s/the_nsa_has_tried_to_backdoor_linux_three_times/">The NSA has tried to backdoor linux three times : linux</a></li>
</ul></li>
</ul></li>

<li>What is the relationship/difference between MAC (mandatory access control) and DAC (discretionary access control)?
Are they antonyms? Complements?

<ul class="org-ul">
<li><a href="https://security.stackexchange.com/questions/63518/mac-vs-dac-vs-rbac">access control - MAC vs DAC vs RBAC - Information Security Stack Exchange</a></li>
</ul></li>
</ul></li>

<li>The only real secure way to run an untrusted application is on a different machine with no network connection.</li>
</ul></li>

<li><a href="https://linux.die.net/man/1/pv">pv(1): monitor progress of data through pipe - Linux man page</a></li>
<li><a href="https://stedolan.github.io/jq/">jq</a>, <a href="https://en.wikipedia.org/wiki/Jq_(programming_language)">WP:jq (programming language)</a></li>
</ul>
</div>

<div id="outline-container-org2bc28cc" class="outline-3">
<h3 id="sudo-security-hole-mitigation-dont-reuse-the-terminal-you-use-for-sudo."><a id="org2bc28cc"></a><span class="section-number-3">18.1</span> sudo security hole mitigation: Don't reuse the terminal you use for sudo.</h3>
<div class="outline-text-3" id="text-sudo-security-hole-mitigation-dont-reuse-the-terminal-you-use-for-sudo.">
<p>
The problem:
If you run sudo in a terminal,
then every program you run in the same terminal shortly after can become root without asking for your password,
(You may not have this problem if your system disables credential caching.)
</p>

<p>
To see how, save this into <code>evil.sh</code>, and then <code>chmod 755 evil.sh</code>, and then <code>sudo echo login</code>, and then <code>./evil.sh</code>.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #b22222;">#</span><span style="color: #b22222;">!/bin/</span><span style="color: #a020f0;">bash</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">If you run this script not long after sudoing in the same terminal,</span>
<span style="color: #b22222;"># </span><span style="color: #b22222;">then this script can become root without prompting for your password.</span>
sudo echo PWNED <span style="color: #b22222;"># </span><span style="color: #b22222;">could be a malicious program</span>
</pre>
</div>

<p>
The security hole is by design for convenience because people don't like typing their passwords.
This hole is not fatal; the user can control this.
It seems that this hole won't be closed;
there doesn't seem to be any way of closing this hole without annoying the user.
</p>

<p>
The mitigation is simple disciplined behavior:
</p>

<ul class="org-ul">
<li>Do as few things as necessary in an elevated terminal.</li>
<li>Run only trusted programs and scripts.</li>
<li>Close the terminal as soon as possible.
Alternatively, you can also run <code>sudo -K</code> to remove the cache.</li>
</ul>
</div>
</div>

<div id="outline-container-org2152466" class="outline-3">
<h3 id="probably-relevant-twitters"><a id="org2152466"></a><span class="section-number-3">18.2</span> Probably relevant Twitters</h3>
<div class="outline-text-3" id="text-probably-relevant-twitters">
<ul class="org-ul">
<li><a href="https://twitter.com/nixcraft">nixcraft</a>: some humor, some important</li>
</ul>
</div>
</div>

<div id="outline-container-orga2976bd" class="outline-3">
<h3 id="building-software-for-old-ubuntu"><a id="orga2976bd"></a><span class="section-number-3">18.3</span> Building software for old Ubuntu</h3>
<div class="outline-text-3" id="text-building-software-for-old-ubuntu">
<p>
Suppose:
</p>

<ul class="org-ul">
<li>You are using Ubuntu 14.04.</li>
<li>Ubuntu 14.04 comes with Emacs 24.</li>
<li>You want to build Emacs 26 (because you want Spacemacs).</li>
</ul>

<p>
You may be able to do that.
Install the build dependencies, and hope that emacs 26 doesn't get too edgy with its libraries.
</p>

<pre class="example">
sudo apt-get build-dep emacs24
</pre>

<p>
That is from <a href="http://ergoemacs.org/emacs/building_emacs_on_linux.html">How to Build Emacs on Linux</a>.
</p>

<p>
You can do that for other software, as long as they don't require dependencies that are too recent.
</p>
</div>
</div>

<div id="outline-container-orga8319d0" class="outline-3">
<h3 id="what"><a id="orga8319d0"></a><span class="section-number-3">18.4</span> what</h3>
<div class="outline-text-3" id="text-what">
<ul class="org-ul">
<li><a href="https://medium.com/netflix-techblog/linux-performance-analysis-in-60-000-milliseconds-accc10403c55">https://medium.com/netflix-techblog/linux-performance-analysis-in-60-000-milliseconds-accc10403c55</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd87e75c" class="outline-2">
<h2 id="using-cabal"><a id="orgd87e75c"></a><span class="section-number-2">19</span> Using Cabal</h2>
<div class="outline-text-2" id="text-using-cabal">
<ul class="org-ul">
<li>Every package used by Setup.hs must have a vanilla version.

<ul class="org-ul">
<li>Why I encountered this error:

<ul class="org-ul">
<li>I set <code>library-vanilla</code> to <code>False</code> due to <a href="https://rybczak.net/2016/03/26/how-to-reduce-compilation-times-of-haskell-projects/">https://rybczak.net/2016/03/26/how-to-reduce-compilation-times-of-haskell-projects/</a></li>
</ul></li>

<li>How I encountered this error:

<ul class="org-ul">
<li>HDBC-postgresql-2.3.2.5 <code>Setup.hs</code> build fails due to linking error with <code>shared: True</code>.

<ul class="org-ul">
<li>The offending packages are <code>old-time</code> and <code>old-locale</code>.

<ul class="org-ul">
<li>It's OK if we build them as shared library, but we must also build their vanilla version.</li>
</ul></li>

<li>It's not the library content that fails to build. It's the Cabal Setup of the library that fails to link.</li>
<li>GHC expects that <code>old-time</code> and <code>old-locale</code> are system libraries?</li>
<li>GHC passes '-lHSold-time-VERSION-HASH.so'. It passes that in the -l switch to GCC.</li>
<li>Cabal writes 'libHSold-time-VERSION-HASH-ghc-8.2.2.so'.

<ul class="org-ul">
<li>Note the <code>ghc-8.2.2</code> part isn't in the string passed by GHC to GCC.</li>
</ul></li>

<li>Can we solve this by <code>cabal install old-time old-locale</code>?</li>
<li><a href="https://github.com/haskell/cabal/issues/1720">https://github.com/haskell/cabal/issues/1720</a>

<ul class="org-ul">
<li>Workaround: Add <code>--ghc-options</code>-dynamic= to cabal new-install</li>
</ul></li>

<li>How do we tell Cabal to use the version we installed with new-install?</li>
<li>Where should we fix this? Cabal? GHC? HDBC-postgresql?</li>
<li>Should we find another library? Hackage has a low-level libpgsql wrapper.</li>
<li>Should we just disable HDBC-postgresql on meta?</li>
</ul></li>
</ul></li>

<li><p>
How I diagnosed it:
</p>

<ul class="org-ul">
<li>Pass <code>-v</code> to GHC (create a bash script named <code>ghc</code> that calls <code>SOMEWHERE/ghc -v "$@"</code>, and put its directory in front of <code>PATH</code>).</li>
<li>Add <code>-v</code> to <code>cabal</code>. Then look at this fragment. It's suspicious that <code>old-time</code> is the only package with a hash.</li>
</ul>

<pre class="example">
package flags [-package-id Cabal-2.0.1.0{unit Cabal-2.0.1.0 True ([])},
     -package-id array-0.5.2.0{unit array-0.5.2.0 True ([])},
     -package-id base-4.10.1.0{unit base-4.10.1.0 True ([])},
     -package-id binary-0.8.5.1{unit binary-0.8.5.1 True ([])},
     -package-id bytestring-0.10.8.2{unit bytestring-0.10.8.2 True ([])},
     -package-id containers-0.5.10.2{unit containers-0.5.10.2 True ([])},
     -package-id deepseq-1.4.3.0{unit deepseq-1.4.3.0 True ([])},
     -package-id directory-1.3.0.2{unit directory-1.3.0.2 True ([])},
     -package-id filepath-1.4.1.2{unit filepath-1.4.1.2 True ([])},
     -package-id ghc-prim-0.5.1.1{unit ghc-prim-0.5.1.1 True ([])},
     -package-id old-time-1.1.0.3-8c2cc8e5fb3b424e71501141225064c5d9ee4eeba7f40b702227ad1c3ea2c5b7{unit old-time-1.1.0.3-8c2cc8e5fb3b424e71501141225064c5d9ee4eeba7f40b702227ad1c3ea2c5b7 True ([])},
     -package-id pretty-1.1.3.3{unit pretty-1.1.3.3 True ([])},
     -package-id process-1.6.1.0{unit process-1.6.1.0 True ([])},
     -package-id template-haskell-2.12.0.0{unit template-haskell-2.12.0.0 True ([])},
     -package-id time-1.8.0.2{unit time-1.8.0.2 True ([])},
     -package-id transformers-0.5.2.0{unit transformers-0.5.2.0 True ([])},
     -package-id unix-2.7.2.2{unit unix-2.7.2.2 True ([])}]
</pre></li>

<li>How I solved it:

<ul class="org-ul">
<li><p>
I added this fragment to <code>cabal.project</code>:
</p>
<pre class="example">

package old-time
library-vanilla: True

package old-locale
library-vanilla: True
</pre></li>

<li>Related
<ul class="org-ul">
<li><a href="https://github.com/haskell/cabal/issues/4748">https://github.com/haskell/cabal/issues/4748</a></li>
<li>[#3409 Can't use system GHC without static libraries at all](<a href="https://github.com/commercialhaskell/stack/issues/3409">https://github.com/commercialhaskell/stack/issues/3409</a>)</li>
<li>[#1720 `executable-dynamic: True` should apply to `build-type: Custom` setup](<a href="https://github.com/haskell/cabal/issues/1720">https://github.com/haskell/cabal/issues/1720</a>)</li>
</ul></li>
</ul></li>
</ul></li>

<li><a href="https://github.com/haskell/cabal/issues/4506">#4506 <code>new-haddock</code>'s file monitoring broken</a>

<ul class="org-ul">
<li><code>new-haddock</code> doesn't work after <code>new-build</code>.</li>
</ul></li>

<li><a href="https://github.com/haskell/cabal/issues/5290">#5290 new-build runs into internal error after deleting from store</a>

<ul class="org-ul">
<li>Solution: nuke the entire store: <code>rm -r ~/.cabal/store</code>.</li>
</ul></li>

<li>Non-problems

<ul class="org-ul">
<li><code>cabal new-build --disable-optimization</code> doesn't disable optimization of transitive dependencies.

<ul class="org-ul">
<li>Cannot reproduce this in cabal 2.3. Is this a 2.0.0.1 bug?</li>
<li><code>$HOME/.cabal/config</code> has <code>optimization: False</code>.</li>
<li>Is this a regression? Oversight? It works with <code>cabal install</code>.</li>
<li>What I'm trying to do:

<ul class="org-ul">
<li>Build transitive dependencies with optimization disabled, for faster development.</li>
</ul></li>

<li>My guess:

<ul class="org-ul">
<li>There seems to be a problem in how the new code path plumbs down arguments.</li>
<li><code>"Using internal setup method with build-type"</code> always gets argument <code>--enable-optimization</code>.

<ul class="org-ul">
<li>That message is printed by <code>./Distribution/Client/SetupWrapper.hs:418</code> <code>internalSetupMethod</code> if <code>cabal new-repl</code> is run with <code>--verbose</code>.</li>
<li>Where does that <code>--enable-optimization</code> come from?</li>
<li>Why isn't the <code>--disable-optimization</code> passed down?</li>
</ul></li>
</ul></li>

<li>Related issues:

<ul class="org-ul">
<li><a href="https://github.com/haskell/cabal/issues/3720">#3720 Tracking bug for cabal.project semantics</a></li>
<li><a href="https://github.com/haskell/cabal/issues/5353">#5353 cabal new-configure &#x2013;disable-optimization has no effect if ghc-options in cabal file contain optimization flag</a></li>
</ul></li>
</ul></li>
</ul></li>

<li>Cabal codebase

<ul class="org-ul">
<li>Seemingly minor codebase maintenance problems

<ul class="org-ul">
<li>Code duplication

<ul class="org-ul">
<li><code>CmdRepl.hs</code> seems to be copied from <code>CmdBuild.hs</code>.</li>
</ul></li>

<li><code>CmdBuild.hs</code> imports <code>...Orchestration</code> unqualified without explicit import list</li>
</ul></li>
</ul></li>

<li>Cabal description field pitfall

<ul class="org-ul">
<li><a href="http://michael.orlitzky.com/articles/using_haddock_markup_in_a_cabal_file.xhtml">http://michael.orlitzky.com/articles/using_haddock_markup_in_a_cabal_file.xhtml</a></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org661a9ea" class="outline-2">
<h2 id="org661a9ea"><span class="section-number-2">20</span> Using Haskell</h2>
<div class="outline-text-2" id="text-20">
</div>
<div id="outline-container-org9e2ce21" class="outline-3">
<h3 id="org9e2ce21"><span class="section-number-3">20.1</span> Setting up development environment</h3>
<div class="outline-text-3" id="text-20-1">
<ul class="org-ul">
<li>Duplicate intersecting efforts?
Too many choices?

<ul class="org-ul">
<li>Why is there Haskell Platform and Haskell Stack?</li>
<li>Which should we use?</li>
<li>Why is there haskell-lang.org and haskell.org?

<ul class="org-ul">
<li><a href="https://news.ycombinator.com/item?id=12054690">https://news.ycombinator.com/item?id=12054690</a></li>
</ul></li>

<li>Why should I use Platform if there is Stack?</li>
<li>Why should I use Stack if there is Cabal new-style?</li>
<li>Why Stack?

<ul class="org-ul">
<li>Vetted packages?</li>
</ul></li>

<li><a href="http://www.haskellforall.com/2018/05/how-i-evaluate-haskell-packages.html">http://www.haskellforall.com/2018/05/how-i-evaluate-haskell-packages.html</a></li>
</ul></li>

<li>cabal new-build obviates stack?

<ul class="org-ul">
<li><a href="http://coldwa.st/e/blog/2017-09-09-Cabal-2-0.html">http://coldwa.st/e/blog/2017-09-09-Cabal-2-0.html</a></li>
</ul></li>
</ul>
</div>

<div id="outline-container-orge36688e" class="outline-4">
<h4 id="orge36688e"><span class="section-number-4">20.1.1</span> My incoherent rambling</h4>
<div class="outline-text-4" id="text-20-1-1">
<p>
My old way: stack.
My new way: cabal new-style.
It may change again.
</p>

<ul class="org-ul">
<li>Install the Haskell <code>stack</code> tool.

<ul class="org-ul">
<li>I use the <a href="https://docs.haskellstack.org/en/stable/install_and_upgrade/#linux">manual download</a>.

<ul class="org-ul">
<li>If you want to make sure that the download isn't corrupted, check the corresponding sha256sum from <a href="https://github.com/commercialhaskell/stack/releases/">GitHub releases page</a>.</li>
<li>If you don't mind sudoing, use the installer script in the <a href="https://docs.haskellstack.org/en/stable/README/">documentation</a>.</li>
</ul></li>

<li>Then I check the archive contents using <code>tar tzf</code>.</li>
<li>If there's no weird paths, I extract the archive with <code>tar xzf</code>.</li>
<li>Then I make the symbolic link <code>~/.local/bin/stack</code>.</li>
<li>If you use the manual download, you may have to install some operating system packages.

<ul class="org-ul">
<li>The list is on the <a href="https://get.haskellstack.org/">install script</a>.
Search for <code>install_dependencies</code> for your distro.</li>
</ul></li>
</ul></li>

<li>Choose a Stack solver.

<ul class="org-ul">
<li>Forget it. Just install GHC to home.

<ul class="org-ul">
<li><code>./configure --prefix ~/.local</code></li>
<li><code>make -j4 install</code></li>
</ul></li>
</ul></li>

<li>Which version of GHC should I use? - The one that is supported by
<a href="http://hackage.haskell.org/package/HaRe">HaRe</a> (Haskell refactoring tool) and
<a href="https://github.com/leksah/leksah">Leksah</a>. - On 2018-08-20, this is 8.0.2. - Leksah requires ghc &gt;= 8.0.2. - HaRe supports ghc &lt;= 8.0.2. - GHC 8.0 is unacceptably slow. - Forget HaRe. We'll go with Leksah. Use GHC 8.4.3.

<ul class="org-ul">
<li>The widely supported GHC version lags very much behind the latest stable GHC version.
I think this may be because the GHC team is rolling out lots of breaking changes in the parser because they are working on the "Trees that grow" proposal.</li>
<li>Which Stackage LTS version should I use?

<ul class="org-ul">
<li><a href="https://www.stackage.org/lts-6.35">LTS 6.35</a> if GHC 7.10.3?

<ul class="org-ul">
<li>It also hosts a hoogle search for searching Haskell program elements.</li>
</ul></li>
</ul></li>
</ul></li>

<li>How to get started?

<ul class="org-ul">
<li>Too many choices

<ul class="org-ul">
<li>install using the package manager that comes with your system

<ul class="org-ul">
<li>pros: least hassle</li>
<li>cons: outdated software</li>
</ul></li>

<li>Stack</li>
<li>Cabal</li>
<li>Nix</li>
<li>Haskell Platform</li>
</ul></li>
</ul></li>

<li>What is your preferred way of installing Haskell?

<ul class="org-ul">
<li>Install <code>cabal-install</code>

<ul class="org-ul">
<li>Download the suitable <code>cabal-install</code> binary package from <a href="https://www.haskell.org/cabal/download.html">https://www.haskell.org/cabal/download.html</a></li>
<li>Extract the <code>cabal</code> binary to <code>~/.local/bin</code></li>
</ul></li>

<li>Install current stable release of GHC

<ul class="org-ul">
<li>Download the current stable release of GHC from <a href="https://www.haskell.org/ghc/download.html">https://www.haskell.org/ghc/download.html</a></li>
<li>Extract it somewhere</li>
<li>Follow the instructions in INSTALL file:

<ul class="org-ul">
<li><code>./configure --prefix=$HOME/.local</code></li>
<li><code>make -j4 install</code></li>
</ul></li>
</ul></li>

<li>Modify <code>PATH</code> in <code>~/.basrhc</code>:

<ul class="org-ul">
<li>Ensure that the line <code>export PATH</code>"$PATH:$HOME/.local/bin"= is in <code>~/.bashrc</code>.</li>
</ul></li>

<li>For what is the hassle?

<ul class="org-ul">
<li>So that, if anything goes wrong, I can nuke it without nuking my whole operating system.</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org29c96eb" class="outline-3">
<h3 id="org29c96eb"><span class="section-number-3">20.2</span> Hackage outages</h3>
<div class="outline-text-3" id="text-20-2">
<p>
Hackage is Haskell package repository.
Sometimes it goes down.
</p>

<ul class="org-ul">
<li>How to tell Cabal to use a Hackage mirror?
An instruction is on the Internet; I forgot where.</li>
<li>2018-04-13: <a href="https://blog.hackage.haskell.org/posts/2018-04-26-downtime.html">Hackage goes down for about a day</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9f6543a" class="outline-3">
<h3 id="org9f6543a"><span class="section-number-3">20.3</span> Haskell in 2018</h3>
<div class="outline-text-3" id="text-20-3">
<ul class="org-ul">
<li>unread, Stephen Diehl

<ul class="org-ul">
<li><a href="http://www.stephendiehl.com/posts/vim_2016.html">http://www.stephendiehl.com/posts/vim_2016.html</a></li>
<li><a href="http://www.stephendiehl.com/posts/vim_haskell.html">http://www.stephendiehl.com/posts/vim_haskell.html</a></li>
<li><a href="http://www.stephendiehl.com/posts/haskell_2018.html">http://www.stephendiehl.com/posts/haskell_2018.html</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/7wmhyi/an_opinionated_guide_to_haskell_in_2018/">https://www.reddit.com/r/haskell/comments/7wmhyi/an_opinionated_guide_to_haskell_in_2018/</a></li>
<li><a href="https://github.com/Gabriel439/post-rfc/blob/master/sotu.md">https://github.com/Gabriel439/post-rfc/blob/master/sotu.md</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/54fv8b/what_is_the_state_of_haskell/">https://www.reddit.com/r/haskell/comments/54fv8b/what_is_the_state_of_haskell/</a></li>
<li><a href="https://lexi-lambda.github.io/blog/2018/02/10/an-opinionated-guide-to-haskell-in-2018/">https://lexi-lambda.github.io/blog/2018/02/10/an-opinionated-guide-to-haskell-in-2018/</a></li>
<li><a href="https://eta-lang.org/">Eta: Haskell on JVM</a></li>
</ul></li>

<li>Development workflow and tools

<ul class="org-ul">
<li>2018

<ul class="org-ul">
<li>IDE (integrated development environment)

<ul class="org-ul">
<li>Visual Studio Code</li>
<li>Leksah</li>
<li>others?</li>
<li><a href="https://github.com/haskell/haskell-ide-engine">https://github.com/haskell/haskell-ide-engine</a></li>
<li>wasted efforts?

<ul class="org-ul">
<li><a href="https://github.com/JPMoresmau/eclipsefp">EclipseFP</a>, no longer developed since 2015

<ul class="org-ul">
<li><a href="http://jpmoresmau.blogspot.com/2015/05/eclipsefp-end-of-life-from-me-at-least.html">http://jpmoresmau.blogspot.com/2015/05/eclipsefp-end-of-life-from-me-at-least.html</a>

<ul class="org-ul">
<li>He got tired of working alone.
He pointed us to <a href="https://www.fpcomplete.com/blog/2015/03/announce-ide-backend">FPComplete ide-backend</a>.

<ul class="org-ul">
<li><a href="https://github.com/fpco/ide-backend">ide-backend</a> seems dead; last activity is in 2016.</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>

<li>cabal new-style</li>
</ul></li>

<li>2016, <a href="http://www.stephendiehl.com/posts/vim_2016.html">http://www.stephendiehl.com/posts/vim_2016.html</a>

<ul class="org-ul">
<li>2015 (?), <a href="http://www.stephendiehl.com/posts/vim_haskell.html">http://www.stephendiehl.com/posts/vim_haskell.html</a></li>
</ul></li>
</ul></li>

<li>Companies using Haskell

<ul class="org-ul">
<li><a href="https://www.reddit.com/r/haskell/comments/4jo2da/fp_shops/">https://www.reddit.com/r/haskell/comments/4jo2da/fp_shops/</a></li>
</ul></li>

<li>things hot in 2018

<ul class="org-ul">
<li><a href="https://cardanofoundation.org/">Cardano</a>

<ul class="org-ul">
<li><a href="https://www.reddit.com/r/haskell/comments/73r861/cardano_next_generation_blockchain_platform/">https://www.reddit.com/r/haskell/comments/73r861/cardano_next_generation_blockchain_platform/</a></li>
<li><a href="https://www.reddit.com/r/cardano/comments/8d87hf/haskell_cryptocurrencies/">https://www.reddit.com/r/cardano/comments/8d87hf/haskell_cryptocurrencies/</a></li>
</ul></li>

<li>IOHK</li>
</ul></li>

<li>Unread

<ul class="org-ul">
<li><a href="https://github.com/dhall-lang/dhall-lang">https://github.com/dhall-lang/dhall-lang</a></li>
<li><a href="https://wiki.haskell.org/Haskell_Communities_and_Activities_Report">https://wiki.haskell.org/Haskell_Communities_and_Activities_Report</a></li>
<li><a href="https://haskellweekly.news/">https://haskellweekly.news/</a>

<ul class="org-ul">
<li><a href="https://github.com/haskellweekly/haskellweekly.github.io">https://github.com/haskellweekly/haskellweekly.github.io</a>

<ul class="org-ul">
<li><a href="https://wiki.haskell.org/Haskell_Weekly_News">https://wiki.haskell.org/Haskell_Weekly_News</a></li>
</ul></li>
</ul></li>

<li><a href="https://haskell.libhunt.com/newsletter/6">https://haskell.libhunt.com/newsletter/6</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgc70ea0d" class="outline-3">
<h3 id="orgc70ea0d"><span class="section-number-3">20.4</span> Using GHC</h3>
<div class="outline-text-3" id="text-20-4">
<ul class="org-ul">
<li>Using GHCI

<ul class="org-ul">
<li><a href="https://www.reddit.com/r/haskell/comments/5su9ag/reload_run_expressions_in_ghci_with_a_single/">https://www.reddit.com/r/haskell/comments/5su9ag/reload_run_expressions_in_ghci_with_a_single/</a></li>
</ul></li>

<li><a href="https://rybczak.net/2016/03/26/how-to-reduce-compilation-times-of-haskell-projects/">https://rybczak.net/2016/03/26/how-to-reduce-compilation-times-of-haskell-projects/</a></li>
<li><a href="https://stackoverflow.com/questions/15662984/speed-up-compilation-in-ghc?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa">https://stackoverflow.com/questions/15662984/speed-up-compilation-in-ghc?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/45q90s/is_anything_being_done_to_remedy_the_soul/">https://www.reddit.com/r/haskell/comments/45q90s/is_anything_being_done_to_remedy_the_soul/</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgf157ae5" class="outline-3">
<h3 id="orgf157ae5"><span class="section-number-3">20.5</span> what</h3>
<div class="outline-text-3" id="text-20-5">
<ul class="org-ul">
<li><a href="https://www.haskell.org/haddock/doc/html/ch03s08.html">Haddock markup syntax</a></li>
<li>metaprogramming from Haskell to Haskell

<ul class="org-ul">
<li><a href="https://personal.cis.strath.ac.uk/conor.mcbride/pub/she/">Strathclyde Haskell Enhancement</a></li>
<li>Template Haskell</li>
<li><a href="https://wiki.haskell.org/Generics">https://wiki.haskell.org/Generics</a>

<ul class="org-ul">
<li>SYB (Scrap Your Boilerplate), uniplate, etc.</li>
</ul></li>
</ul></li>

<li>What does "Avoid 'success at all costs'" mean?

<ul class="org-ul">
<li><a href="https://news.ycombinator.com/item?id=12056169">https://news.ycombinator.com/item?id=12056169</a></li>
</ul></li>

<li>Will Eta kill <a href="https://github.com/Frege/frege">Frege</a>?
It's sad to see works thrown away.</li>
</ul>
</div>
</div>

<div id="outline-container-org4c08059" class="outline-3">
<h3 id="org4c08059"><span class="section-number-3">20.6</span> Finding a Haskell IDE</h3>
<div class="outline-text-3" id="text-20-6">
<p>
I haven't found a convincing IDE for Haskell.
</p>

<ul class="org-ul">
<li><a href="https://www.reddit.com/r/haskell/comments/5lgtb1/what_ideeditor_do_you_use_for_haskell_development/">what IDE/editor do you use for Haskell development? : haskell</a></li>
<li><a href="https://www.quora.com/What-are-powerful-Haskell-IDEs">What are powerful Haskell IDEs? - Quora</a></li>
<li><a href="https://www.quora.com/What-is-the-best-IDE-for-programming-in-Haskell">What is the best IDE for programming in Haskell? - Quora</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/86bmpu/haskell_ides/">Haskell ides? : haskell</a></li>
<li>Leksah-nix fails to build on my machine (Ubuntu 14.04).
There are no prebuilt binaries.
Must compile from source from <a href="https://github.com/leksah/leksah/wiki/download">Hackage</a> using Cabal.</li>
</ul>
</div>
</div>

<div id="outline-container-org8ba929f" class="outline-3">
<h3 id="org8ba929f"><span class="section-number-3">20.7</span> what</h3>
<div class="outline-text-3" id="text-20-7">
<ul class="org-ul">
<li>Enterprise Haskell?

<ul class="org-ul">
<li><a href="https://wiki.haskell.org/Enterprise_Haskell">https://wiki.haskell.org/Enterprise_Haskell</a></li>
<li>DSH: Database Supported Haskell <a href="https://hackage.haskell.org/package/DSH">https://hackage.haskell.org/package/DSH</a></li>
</ul></li>

<li id="[[<a href="http://yager.io/Distributed/Distributed.html">http://yager.io/Distributed/Distributed.html</a>][Distributed Systems in Haskell">Will Yager]]</li>
<li>Alien technologies?

<ul class="org-ul">
<li><a href="https://github.com/transient-haskell/transient">https://github.com/transient-haskell/transient</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org4f67e0d" class="outline-3">
<h3 id="org4f67e0d"><span class="section-number-3">20.8</span> what</h3>
<div class="outline-text-3" id="text-20-8">
<ul class="org-ul">
<li>useful trick, especially helpful when abusing type classes: <a href="https://chrisdone.com/posts/haskell-constraint-trick">https://chrisdone.com/posts/haskell-constraint-trick</a></li>
<li><a href="https://chrisdone.com/posts/twitter-problem-loeb">https://chrisdone.com/posts/twitter-problem-loeb</a></li>
<li><a href="http://blog.sigfpe.com/2006/11/from-l-theorem-to-spreadsheet.html">http://blog.sigfpe.com/2006/11/from-l-theorem-to-spreadsheet.html</a></li>
<li><a href="http://blog.sigfpe.com/2007/02/comonads-and-reading-from-future.html">http://blog.sigfpe.com/2007/02/comonads-and-reading-from-future.html</a></li>
<li>Components for publish-subscribe in Haskell?

<ul class="org-ul">
<li><a href="https://www.stackage.org/lts-6.35/package/broadcast-chan-0.1.1">https://www.stackage.org/lts-6.35/package/broadcast-chan-0.1.1</a></li>
</ul></li>

<li>Lennart Augustsson's <a href="http://augustss.blogspot.com/2008/12/somewhat-failed-adventure-in-haskell.html">Things that amuse me</a>, Haskell module overloading</li>
<li><a href="http://hackage.haskell.org/package/lazy">lazy: Explicit laziness for Haskell</a>

<ul class="org-ul">
<li>"This library provides laziness as an abstraction with an explicit type-signature, and it so happens that this abstraction forms a monad!"</li>
<li><a href="https://nikita-volkov.github.io/if-haskell-were-strict/">If Haskell were strict, what would the laziness be like?</a></li>
<li>2014, article, <a href="https://pchiusano.github.io/2014-09-18/explicit-laziness.html">Paul Chiusano: An interesting variation on a strict by default language</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/36s0ii/how_do_we_all_feel_about_laziness/">How do we all feel about laziness? : haskell</a></li>
</ul></li>

<li>distributed functional programming?

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/MBrace">WP:MBrace</a>, F#</li>
<li><a href="https://haskell-distributed.github.io/">Cloud Haskell</a>

<ul class="org-ul">
<li>has some academic papers <a href="https://wiki.haskell.org/Cloud_Haskell">https://wiki.haskell.org/Cloud_Haskell</a></li>
</ul></li>

<li><a href="https://github.com/PatrickMaier/HdpH">PatrickMaier/HdpH: Haskell distributed parallel Haskell</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org49ccaa7" class="outline-3">
<h3 id="org49ccaa7"><span class="section-number-3">20.9</span> Curating libraries</h3>
<div class="outline-text-3" id="text-20-9">
<ul class="org-ul">
<li><a href="https://www.reddit.com/r/haskell/comments/4ggt05/best_underrated_haskell_libraries/">https://www.reddit.com/r/haskell/comments/4ggt05/best_underrated_haskell_libraries/</a></li>
<li><a href="https://wiki.haskell.org/Applications_and_libraries">https://wiki.haskell.org/Applications_and_libraries</a></li>
<li><a href="https://stackoverflow.com/questions/9286799/haskell-libraries-overview-and-their-quality">https://stackoverflow.com/questions/9286799/haskell-libraries-overview-and-their-quality</a></li>
</ul>
</div>
</div>

<div id="outline-container-org90b949d" class="outline-3">
<h3 id="org90b949d"><span class="section-number-3">20.10</span> what</h3>
<div class="outline-text-3" id="text-20-10">
<ul class="org-ul">
<li>unread

<ul class="org-ul">
<li>servant web framework</li>
<li>Salsa Haskell .NET bridge

<ul class="org-ul">
<li><a href="https://wiki.haskell.org/Salsa">https://wiki.haskell.org/Salsa</a></li>
</ul></li>

<li><a href="https://gist.github.com/puffnfresh/6222797">Haskell partiality monad</a></li>
</ul></li>

<li><a href="https://stackoverflow.com/questions/5770168/templating-packages-for-haskell">https://stackoverflow.com/questions/5770168/templating-packages-for-haskell</a></li>
<li>Hoogle vs Hayoo?

<ul class="org-ul">
<li>The hoogle on stackage.org top right text bar seems to be most complete

<ul class="org-ul">
<li><a href="https://www.stackage.org/">https://www.stackage.org/</a></li>
</ul></li>

<li><a href="https://mail.haskell.org/pipermail/haskell-cafe/2013-August/109945.html">https://mail.haskell.org/pipermail/haskell-cafe/2013-August/109945.html</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org651fa7b" class="outline-3">
<h3 id="org651fa7b"><span class="section-number-3">20.11</span> Haskell woes</h3>
<div class="outline-text-3" id="text-20-11">
<ul class="org-ul">
<li>Exceptions?

<ul class="org-ul">
<li><a href="http://hackage.haskell.org/package/safe-exceptions">http://hackage.haskell.org/package/safe-exceptions</a></li>
<li><a href="https://www.fpcomplete.com/blog/2016/11/exceptions-best-practices-haskell">https://www.fpcomplete.com/blog/2016/11/exceptions-best-practices-haskell</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/589fkg/haskell_and_the_no_runtime_exception_claim_95_of/">https://www.reddit.com/r/haskell/comments/589fkg/haskell_and_the_no_runtime_exception_claim_95_of/</a></li>
</ul></li>

<li>Module system</li>
<li><code>Read(read)</code> should be renamed to <code>CoShow(coshow)</code>.</li>
</ul>
</div>
</div>

<div id="outline-container-org500515e" class="outline-3">
<h3 id="org500515e"><span class="section-number-3">20.12</span> GHC woes</h3>
<div class="outline-text-3" id="text-20-12">
<ul class="org-ul">
<li>Profiling requires recompiling all transitive dependencies if they happen to be compiled without profiling.</li>
</ul>
</div>
<div id="outline-container-orgaf6894e" class="outline-4">
<h4 id="orgaf6894e"><span class="section-number-4">20.12.1</span> Working on GHC</h4>
<div class="outline-text-4" id="text-20-12-1">
<ul class="org-ul">
<li>Beginning to work on GHC

<ul class="org-ul">
<li>Please see the <a href="https://ghc.haskell.org/trac/ghc/wiki/Newcomers">newcomers guide</a> first.</li>
</ul></li>

<li>GHC TDNR (type-directed name resolution)

<ul class="org-ul">
<li><a href="https://ghc.haskell.org/trac/ghc/ticket/4479">https://ghc.haskell.org/trac/ghc/ticket/4479</a></li>
<li><a href="https://ghc.haskell.org/trac/ghc/wiki/Records/OverloadedRecordFields">https://ghc.haskell.org/trac/ghc/wiki/Records/OverloadedRecordFields</a></li>
<li><a href="https://stackoverflow.com/questions/22417063/current-state-of-record-types-and-subtyping-in-haskell">https://stackoverflow.com/questions/22417063/current-state-of-record-types-and-subtyping-in-haskell</a></li>
<li><a href="https://en.wikipedia.org/wiki/Subtyping#Record_types">https://en.wikipedia.org/wiki/Subtyping#Record_types</a>

<ul class="org-ul">
<li>Width and depth subtyping</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge74c5c8" class="outline-3">
<h3 id="orge74c5c8"><span class="section-number-3">20.13</span> People who have too much time</h3>
<div class="outline-text-3" id="text-20-13">
<ul class="org-ul">
<li><a href="https://hackage.haskell.org/package/ImperativeHaskell">https://hackage.haskell.org/package/ImperativeHaskell</a></li>
<li>just for curiosity <a href="https://github.com/edwinb/idris-php">https://github.com/edwinb/idris-php</a></li>
</ul>
</div>
</div>

<div id="outline-container-org15c4a4d" class="outline-3">
<h3 id="org15c4a4d"><span class="section-number-3">20.14</span> What's hampering Haskell adoption?</h3>
<div class="outline-text-3" id="text-20-14">
<ul class="org-ul">
<li>GHC's aggressive intermodule optimization precludes prebuilt binaries.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgcf00502" class="outline-2">
<h2 id="using-kubernetes"><a id="orgcf00502"></a><span class="section-number-2">21</span> Using Kubernetes</h2>
<div class="outline-text-2" id="text-using-kubernetes">
<ul class="org-ul">
<li><a href="https://kubernetes.io/">kubernetes.io</a>: "Production-Grade Container Orchestration"</li>
<li>How do we control access to Kubernetes?

<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/42170380/how-to-add-users-to-kubernetes-kubectl">https://stackoverflow.com/questions/42170380/how-to-add-users-to-kubernetes-kubectl</a></li>
<li><a href="https://kubernetes.io/docs/admin/authentication/">https://kubernetes.io/docs/admin/authentication/</a></li>
<li><a href="https://kubernetes.io/docs/admin/accessing-the-api/">https://kubernetes.io/docs/admin/accessing-the-api/</a></li>
<li>How do we add and remove users and roles to Kubernetes?</li>
<li>Which is the most hassle-free future-proof minimal-maintenance way?</li>
</ul></li>

<li>Kubernetes security

<ul class="org-ul">
<li><a href="https://kubernetes.io/blog/2016/08/security-best-practices-kubernetes-deployment/">https://kubernetes.io/blog/2016/08/security-best-practices-kubernetes-deployment/</a></li>
<li><a href="https://kubernetes.io/docs/tasks/administer-cluster/securing-a-cluster/">https://kubernetes.io/docs/tasks/administer-cluster/securing-a-cluster/</a></li>
<li>Which document should we read? Overlapping? Confusing?

<ul class="org-ul">
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/controlling-access/">https://kubernetes.io/docs/reference/access-authn-authz/controlling-access/</a></li>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/">https://kubernetes.io/docs/reference/access-authn-authz/authentication/</a></li>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/authorization/">https://kubernetes.io/docs/reference/access-authn-authz/authorization/</a></li>
</ul></li>

<li>What is Kubernetes's replacement of AWS security groups?

<ul class="org-ul">
<li>NetworkPolicy objects

<ul class="org-ul">
<li><a href="https://kubernetes.io/blog/2017/10/enforcing-network-policies-in-kubernetes/">https://kubernetes.io/blog/2017/10/enforcing-network-policies-in-kubernetes/</a></li>
<li><a href="https://kubernetes.io/blog/2016/04/kubernetes-network-policy-apis/">https://kubernetes.io/blog/2016/04/kubernetes-network-policy-apis/</a></li>
</ul></li>
</ul></li>
</ul></li>

<li>How I think Kubernetes fits in Google's strategy

<ul class="org-ul">
<li>Kubernetes commoditizes IaaS providers.

<ul class="org-ul">
<li>It lowers the barrier of switching from any other cloud providers to GCE.

<ul class="org-ul">
<li>Examples of other cloud providers:
Amazon Web Services (AWS), DigitalOcean, Alibaba Cloud (Aliyun), Microsoft Azure</li>
</ul></li>

<li>The same way Microsoft Windows commoditized PC hardware.</li>
</ul></li>

<li><a href="https://en.wikipedia.org/wiki/Commoditization">WP:Commoditization</a></li>
<li><a href="https://en.wikipedia.org/wiki/Infrastructure_as_a_service">WP:Infrastructure as a service</a></li>
</ul></li>

<li><a href="https://www.level-up.one/kubernetes-bible-beginners/">The Kubernetes Bible for Beginners &amp; Developers - Level UpLevel Up</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgcea789c" class="outline-2">
<h2 id="making-a-personal-wiki"><a id="orgcea789c"></a><span class="section-number-2">22</span> Making a personal wiki</h2>
<div class="outline-text-2" id="text-making-a-personal-wiki">
<ul class="org-ul">
<li>Selection criteria:

<ul class="org-ul">
<li>How many people are using it?</li>
<li>How big can it grow without slowing down?</li>
<li>How good is its markup?</li>
<li>How long will it last?
How long can it operate without being obsolete?
How fast do the software dependencies rot?

<ul class="org-ul">
<li>How long does Ubuntu maintain the repository archive of old Ubuntu versions?

<ul class="org-ul">
<li><a href="http://old-releases.ubuntu.com/">http://old-releases.ubuntu.com/</a>

<ul class="org-ul">
<li>2018-08-06: It seems that Ubuntu maintains the repositories to as far back as 2006.</li>
<li><a href="https://askubuntu.com/questions/91815/how-to-install-software-or-upgrade-from-an-old-unsupported-release">https://askubuntu.com/questions/91815/how-to-install-software-or-upgrade-from-an-old-unsupported-release</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>

<li>Too many choices.

<ul class="org-ul">
<li><a href="http://wiki.c2.com/?PersonalWiki">http://wiki.c2.com/?PersonalWiki</a></li>
<li><a href="http://wiki.c2.com/?WikiEngines">http://wiki.c2.com/?WikiEngines</a></li>
<li><a href="https://www.quora.com/Whats-the-best-way-to-create-a-personal-wiki">https://www.quora.com/Whats-the-best-way-to-create-a-personal-wiki</a></li>
<li><a href="https://www.wikimatrix.org/">wikimatrix.org: compare wiki softwares</a></li>
<li>safety in numbers?

<ul class="org-ul">
<li>many users

<ul class="org-ul">
<li>Jekyll</li>
<li><a href="http://moinmo.in/">http://moinmo.in/</a></li>
<li><a href="https://gohugo.io/">https://gohugo.io/</a></li>
</ul></li>

<li>few users

<ul class="org-ul">
<li><a href="https://github.com/lotabout/static-wiki">https://github.com/lotabout/static-wiki</a></li>
</ul></li>

<li>unknown

<ul class="org-ul">
<li><a href="http://dynalon.github.io/mdwiki/#!index.md">http://dynalon.github.io/mdwiki/#!index.md</a></li>
</ul></li>
</ul></li>
</ul></li>

<li>Avoid accidental publishing.

<ul class="org-ul">
<li>Don't put anything you don't want to publish inside your Jekyll directory, no matter how convenient.
Accidents happen.
Humans make mistakes.
Computer doesn't care.</li>
</ul></li>

<li><a href="https://www.labnol.org/internet/load-disqus-comments-on-click/28653/">How to Load Disqus Comments on Demand with JavaScript</a></li>
</ul>
</div>
</div>
<div id="outline-container-org523a9e6" class="outline-2">
<h2 id="searching-the-internet"><a id="org523a9e6"></a><span class="section-number-2">23</span> Searching the Internet</h2>
<div class="outline-text-2" id="text-searching-the-internet">
<ul class="org-ul">
<li>Example search: given a text description, find related images</li>
<li>Example reverse search: given an image, describe it, or find its copies on the Internet</li>
<li>Internet search tools in 2018

<ul class="org-ul">
<li><a href="https://duckduckgo.com/">duckduckgo.com</a>: privacy-focused search engine

<ul class="org-ul">
<li>less censored than Google</li>
<li>no reverse search (yet?)</li>
</ul></li>

<li><a href="https://google.com/">google.com</a>: biggest Internet search engine in 2018

<ul class="org-ul">
<li>censored</li>
<li>text search</li>
<li>image search</li>
<li>reverse image search</li>
<li>Problems

<ul class="org-ul">
<li>Google should rank down Pinterest.

<ul class="org-ul">
<li>In my experience, Pinterest is never an authoritative nor original source.</li>
<li>Google has ranked down Tumblr and Wikipedia.</li>
</ul></li>

<li>Example of Google censorship (compare with DuckDuckGo):

<ul class="org-ul">
<li>search terms related to pornography</li>
<li>search terms related to the darknet (the hidden wiki, Tor websites)</li>
<li>rhino poaching (Google favors contents against rhino poaching)</li>
</ul></li>

<li><a href="https://stallman.org/google.html">Richard Stallman's reasons not to use Google</a></li>
</ul></li>
</ul></li>

<li><a href="https://www.bing.com/">bing.com</a>: Microsoft's answer to Google

<ul class="org-ul">
<li>text search</li>
<li>reverse image search</li>
<li><a href="https://stallman.org/microsoft.html">Richard Stallman's reasons not to use Microsoft</a></li>
</ul></li>

<li>searx?</li>
<li>startpage?</li>
<li>reverse search tools

<ul class="org-ul">
<li>Google and Bing have reverse image search</li>
<li><a href="https://tineye.com/">tineye.com</a>: reverse image search</li>
<li><a href="http://www.mooma.sh">moomash</a> (was "audentifi"), YouTube reverse audio search

<ul class="org-ul">
<li>2018: only works with some video formats; doesn't work for old videos</li>
<li>2018-09-15: It have gone out of business, it seems.</li>
</ul></li>

<li>Shazam

<ul class="org-ul">
<li>Is there anything like Shazam that takes a YouTube URL, and doesn't require me to install anything?</li>
</ul></li>

<li><a href="http://whatpixel.com/original-source-image-search-tools/">http://whatpixel.com/original-source-image-search-tools/</a></li>
<li><a href="https://saucenao.com/">saucenao.com</a>: reverse image search; I use it to find images stolen from pixiv</li>
</ul></li>
</ul></li>

<li>The Internet is full of crap.

<ul class="org-ul">
<li>So are libraries.</li>
<li>So is the world.</li>
<li>So is this website.</li>
<li>Thus, you must think for yourself.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc3fc449" class="outline-2">
<h2 id="using-trello"><a id="orgc3fc449"></a><span class="section-number-2">24</span> Using Trello</h2>
<div class="outline-text-2" id="text-using-trello">
<ul class="org-ul">
<li>How should we best use Trello?

<ul class="org-ul">
<li>A card gathers people to help each other accomplish a common goal.</li>
<li>A card disseminates information from the people who have it to the people who need it.</li>
</ul></li>

<li>Traps

<ul class="org-ul">
<li>Because Trello cannot collaborative edit, we must not write too long before we save. Two people must not edit the card at the same time.</li>
</ul></li>

<li>What do we use Trello for?

<ul class="org-ul">
<li>Prioritize what to do, starting with the highest velocity (value per effort)</li>
<li>Give enough information for others to help us</li>
</ul></li>

<li>What Trello is not

<ul class="org-ul">
<li>A Trello column is not a mere to-do list.</li>
<li>Milestone lists are better than to-do lists.
Be declarative, not imperative. Describe what you want, not how you want to do it.</li>
<li>If you can do it in a few hours, you don't need to make a Trello card for it.</li>
<li>If you don't need help with something, don't write a Trello card for it.</li>
</ul></li>

<li>Our attitude towards Trello

<ul class="org-ul">
<li>We should consider the time spent on Trello as overhead.
We should minimize the time we are editing, moving, arranging Trello cards.

<ul class="org-ul">
<li>Human nature trap: It's fun to look busy (over-organizing).</li>
</ul></li>
</ul></li>

<li>When not Slack?

<ul class="org-ul">
<li>If you need to remember it later, use Trello or Confluence, not Slack.</li>
<li>If a problem will take some time, don't waste your time typing on Slack.
Put it in Trello, and assign it to the person who can fix it.</li>
</ul></li>

<li>What is in a card?

<ul class="org-ul">
<li>Write a card with the intention of helping everyone else help you.
The card must answer "What can I help? How can I help?".</li>
<li>A card contains information or will contain information.</li>
<li>A person should be in the card if:

<ul class="org-ul">
<li>he person needs that information, or</li>
<li>he can contribute that information (he may also contribute in a comment).</li>
</ul></li>

<li>No other person should care about that card.</li>
</ul></li>

<li>What is Trello?

<ul class="org-ul">
<li>To answer this, we answer these questions:

<ul class="org-ul">
<li>What does Trello make easy?</li>
<li>What does Trello make hard?</li>
<li>We seek an operational definition for Trello. We define something by what it do.</li>
</ul></li>
</ul></li>

<li>What should we group together? Why?

<ul class="org-ul">
<li>A board is a list of a column.</li>
<li>A column is a list of cards. Trello uses the term "list", but we use "column" to avoid confusion.</li>
<li>A card has zero or more members.</li>
<li>A card has zero or more labels.</li>
<li>A label is like an atom in propositional logic.</li>
<li>The filtering system is a limited form of propositional logic.</li>
<li>A card is a way for several people to share information.</li>
<li>If two people need the same information, they should subscribe to the same card.</li>
<li>If we need two people to finish (archive) a card, then both of those people should be members of that card.</li>
<li>What is a label?
You give a label L to a card if and only if you often need to filter (select) all cards labeled L.</li>
<li>Why are two cards in the same list?
Because they have something in common. They share something. An aspect of them is equal.</li>
<li>We group something in a list to minimize moving cards.</li>
<li>What is that aspect? What irreplaceable advantage does it give us?</li>
<li>Because they have the same members? (We can use filter for this.)
Because they belong to the same team?
Because they have the same due date? (We can use filter for this.)
Because they are a part of the same user story?
Navigating multiple boards is hard (big cognitive burden).</li>
<li>Label is for filtering.</li>
</ul></li>

<li>What is easy to do in Trello?

<ul class="org-ul">
<li>Toggle any of the first 10 labels.</li>
<li>Show cards assigned to me (the user who is logged in).</li>
<li>Show cards by a conjunction or a disjunction of a Condition.</li>
<li>Condition is an element of Conditions.</li>
<li>Conditions is the union of all labels in a board and members of a board.</li>
<li>Click on the due date in the card description to mark it complete.</li>
<li>Read card comments in reverse chronological order (newer comments first).</li>
<li>Move a card to the bottom of an adjacent list.</li>
<li>See the number of checked items in a checklist in a card.</li>
<li>In the comment of a card, add another card.</li>
</ul></li>

<li>Trello assumes that every checklist in the item has the same effort.
Therefore we must make sure that every item in a checklist in the item has the same effort.</li>
<li>What is a bit hard to do (because it cannot be done by keyboard alone):

<ul class="org-ul">
<li>Adding a check list in a card</li>
<li>A card can have many checklists</li>
<li>Marking a check list in a card</li>
<li>Unmarking a check list in a card</li>
<li>Filtering makes navigating a large board possible.</li>
</ul></li>

<li>What is hard to do in Trello:

<ul class="org-ul">
<li>Move from a board to another boards. (High cognitive load due to context switching.)</li>
<li>One person should not be in more than one board.</li>
<li>Move a card from a list to another list. It is easier to archive the list.</li>
<li>Unarchive a card</li>
</ul></li>

<li>What is impossible (assuming no plugins):

<ul class="org-ul">
<li>See due dates in non-US format</li>
<li>Use keyboard to move card up or down in a list</li>
<li>Gantt chart</li>
<li>Calendars</li>
<li>Progress report</li>
<li>Collaboratively edit a card description.
Trello will only show the last saved description.
The previous descriptions are not lost, but hardly accessible.
The old description can be accessed by Exporting a card as JSON.</li>
<li>In a card description, we can link to a board or a card, but not link to a list.</li>
</ul></li>

<li>Member vs subscribe:

<ul class="org-ul">
<li>If and only if you are a member of a card, it will show in 'my card' filter (Press Q)
The members of a card are the people assigned to a card
We must tailor our workflow so that we use only the easy things.</li>
</ul></li>

<li>Please read and memorize the Trello shortcut keys.

<ul class="org-ul">
<li>Also read <a href="https://help.trello.com/article/734-how-to-use-trello-like-a-pro">How to use Trello like a pro</a>.</li>
<li>Those documents reflect what the Trello designer thinks Trello is best used for.</li>
</ul></li>

<li>In search of a Trello architecture

<ul class="org-ul">
<li>Fixed Pipeline / Mini waterfalls

<ul class="org-ul">
<li>Column = team, Card = product</li>
<li>One column is assembly line.</li>
<li>Cards move from left to right.</li>
<li>Progress is sequential. Right column cannot start before left column finishes what it has to do with the card.</li>
<li>Ideal for the same process that is repeated very many times.</li>
<li>For example, in our case, the columns would be Requirement, UI, Database, Backend, Frontend, Done.</li>
</ul></li>

<li>Column = a rather big to-do, card = breakdown of the column

<ul class="org-ul">
<li>For example, in our case, each column would be "As a (who), I (do what)".</li>
<li>A column is a work item and each card in the column is a breakdown of that item.</li>
</ul></li>

<li>Column = epic / bigger user story, card = smaller user story</li>
<li>Column = milestone, card = breakdown of milestone</li>
</ul></li>

<li>Trello list hierarchy (a Trello account is a list of lists of &#x2026;)

<ul class="org-ul">
<li>A Trello account is a list of boards.</li>
<li>A board is a list of columns.</li>
<li>A column is a list of cards.</li>
<li>A card is a list of checklists.</li>
<li>A checklist is a list of checklist items.</li>
<li>Therefore we can use Trello for work breakdown structure of perhaps at most 4 levels deep.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org6587278" class="outline-2">
<h2 id="contributing-to-wikipedia"><a id="org6587278"></a><span class="section-number-2">25</span> Contributing to Wikipedia</h2>
<div class="outline-text-2" id="text-contributing-to-wikipedia">
</div>

<div id="outline-container-org939f32c" class="outline-3">
<h3 id="beginning-contributing-to-wikipedia"><a id="org939f32c"></a><span class="section-number-3">25.1</span> Beginning contributing to Wikipedia</h3>
<div class="outline-text-3" id="text-beginning-contributing-to-wikipedia">
<p>
Don't publish anything you may regret later.
Once it's on the Internet, it's forever.
The Internet doesn't forget.
Wikipedia is a highly crawled and archived site.
</p>
</div>
</div>

<div id="outline-container-org5833958" class="outline-3">
<h3 id="what-should-be-in-user-page"><a id="org5833958"></a><span class="section-number-3">25.2</span> What should be in user page?</h3>
<div class="outline-text-3" id="text-what-should-be-in-user-page">
<p>
Templates: User page, User in $country, Babel
</p>

<p>
See <a href="https://en.wikipedia.org/wiki/Wikipedia:User_pages">WP:User pages</a>.
</p>

<p>
<a href="https://en.wikipedia.org/wiki/Wikipedia:Userboxes">WP:Userboxes</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org258d446" class="outline-2">
<h2 id="using-xml"><a id="org258d446"></a><span class="section-number-2">26</span> Using XML</h2>
<div class="outline-text-2" id="text-using-xml">
</div>

<div id="outline-container-orgccd5c90" class="outline-3">
<h3 id="finding-the-editor"><a id="orgccd5c90"></a><span class="section-number-3">26.1</span> Finding the editor</h3>
<div class="outline-text-3" id="text-finding-the-editor">
<p>
List of editors:
</p>

<ul class="org-ul">
<li>I have used

<ul class="org-ul">
<li>Vim</li>
<li>IntelliJ IDEA</li>
</ul></li>

<li>I don't know

<ul class="org-ul">
<li>emacs nxml-mode</li>
<li><a href="http://plugins.jedit.org/plugins/?XML">jEdit XML plugin</a></li>
<li>QXMLEdit? Can it autocomplete?</li>
<li>XML Notepad</li>
</ul></li>
</ul>

<p>
Sources:
</p>

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/XML_Schema_Editor#cite_note-1">WP:XML Schema Editor</a></li>
<li><a href="https://en.wikipedia.org/wiki/Comparison_of_XML_editors">WP:Comparison of XML editors</a></li>
</ul>

<p>
IntelliJ IDEA works fine, but I'd be happy if there is a lighter alternative.
</p>

<p>
My criteria:
</p>

<ul class="org-ul">
<li>open-source</li>
<li>schema-aware, supports XML Schema Definition (XSD)</li>
<li>autocompletion

<ul class="org-ul">
<li>2018-08-22</li>
</ul></li>
</ul>

<p>
Nice-to-have features:
</p>

<ul class="org-ul">
<li>Automate closing tag.</li>
<li>Editing an opening tag also edits the closing tag.</li>
<li>Editing a closing tag also edits the opening tag.</li>
<li>Any way to avoid memorizing and typing <code>xmlns:xsi</code>.</li>
</ul>

<p>
Vim can semi-automate XML closing tag using Ctrl+P.
</p>
</div>
</div>

<div id="outline-container-orgdf9f648" class="outline-3">
<h3 id="using-schemas"><a id="orgdf9f648"></a><span class="section-number-3">26.2</span> Using schemas</h3>
<div class="outline-text-3" id="text-using-schemas">
<p>
In principle, from a type defined in an XSD file, we can generate a Haskell module and a Java class.
</p>

<ul class="org-ul">
<li><a href="http://www.kohsuke.org/xmlschema/XMLSchemaDOsAndDONTs.html">W3C XML Schema: DOs and DON'Ts</a></li>
<li><a href="https://stackoverflow.com/questions/2014237/what-are-the-best-practices-for-versioning-xml-schemas">xsd - What are the best practices for versioning XML schemas? - Stack Overflow</a></li>
<li><a href="https://www.webucator.com/tutorial/learn-xml-schema/XML-Schema-Keys.cfm">Tutorial: XML Schema Keys | XML Schema Tutorial | Webucator</a></li>
</ul>
</div>
</div>

<div id="outline-container-org44c5eb4" class="outline-3">
<h3 id="toward-markup-language-agnosticity"><a id="org44c5eb4"></a><span class="section-number-3">26.3</span> Toward markup language agnosticity</h3>
<div class="outline-text-3" id="text-toward-markup-language-agnosticity">
<p>
What is common between XML, JSON, and YAML?
</p>

<p>
Can we map (interconvert) between XML and YAML?
Approximate data model:
</p>

<div class="org-src-container">
<pre class="src src-haskell">type Key = String
type Atr = (Key, String)

data Xml
    = XText String
    | XElem [Atr] Name [Xml]

data Json
    = JText String
    | JMap [(Key, Json)]
    | JList [Json]

xj :: Xml -&gt; Json

jx :: Json -&gt; Xml
</pre>
</div>

<p>
Can we use XML Schema to validate a JSON/YAML document?
</p>

<p>
We can map a subset of XML to YAML using <a href="http://yaml.org/xml">YAXML, the (draft) XML Binding for YAML</a>.
</p>

<ul class="org-ul">
<li><a href="https://www.quora.com/In-choosing-between-XML-and-YAML-what-are-advantages-and-more-natural-problem-domains-for-each-one">In choosing between XML and YAML, what are advantages and more natural problem domains for each one? - Quora</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgf0e5225" class="outline-2">
<h2 id="orgf0e5225"><span class="section-number-2">27</span> Using PostgreSQL</h2>
<div class="outline-text-2" id="text-27">
<ul class="org-ul">
<li>Questions

<ul class="org-ul">
<li>How do we find slow queries?</li>
<li>Which queries lock some tables or the database?</li>
<li>Is there a GUI or visualization tool?

<ul class="org-ul">
<li>There should already be a tool for visualizing such Postgresql statistics?</li>
</ul></li>

<li>Is autovacuum enabled on our RDS clusters? How do we know?</li>
<li>Do we need <a href="http://stackoverflow.com/questions/19135340/how-does-postgresql-perform-writes-so-much-faster-than-sqlite">reliability</a>?
If we can sacrifice reliability, we can speed things up by turning fsync off.</li>
<li>How much performance does RDS encryption cost?
<a href="http://blog.minjar.com/post/108724853340/rds-encryption-and-benchmarking-postgresql">Negligible, but with caveats.</a></li>
</ul></li>

<li>Answers looking for questions

<ul class="org-ul">
<li>There is a <a href="https://www.postgresql.org/docs/9.4/static/monitoring-stats.html">statistics collector</a>.</li>
<li><a href="https://wiki.postgresql.org/wiki/Logging_Difficult_Queries">Logging Difficult Queries</a></li>
<li><a href="https://www.postgresql.org/docs/9.4/static/maintenance.html">Postgresql needs regular maintenance</a>.
One critical maintenance task is to VACUUM the database;
the query planner relies on VACUUM ANALYZE.</li>
<li><a href="https://gist.github.com/chanks/7585810">Turning PostgreSQL into a queue serving 10,000 jobs per second</a></li>
<li><a href="http://pgeoghegan.blogspot.co.id/2012/06/towards-14000-write-transactions-on-my.html">Towards 14,000 write transactions on a laptop</a></li>
<li><a href="https://blogs.harvard.edu/philg/2011/01/10/how-many-updates-per-second-can-a-standard-rdbms-process/">How many updates per second can a standard RDBMS process?</a></li>
</ul></li>

<li>PostgreSQL tuning

<ul class="org-ul">
<li><a href="http://madusudanan.com/blog/understanding-postgres-caching-in-depth/#CachePurpose">http://madusudanan.com/blog/understanding-postgres-caching-in-depth/#CachePurpose</a></li>
<li><a href="https://wiki.postgresql.org/wiki/Logging_Difficult_Queries">https://wiki.postgresql.org/wiki/Logging_Difficult_Queries</a></li>
</ul></li>

<li>2018-02-21

<ul class="org-ul">
<li><a href="https://www.postgresql.org/docs/devel/static/pgbench.html">pg<sub>bench</sub></a></li>
<li>IN is faster than VALUES in psql 9.3

<ul class="org-ul">
<li>select values &amp; join instead of in list <a href="https://wiki.postgresql.org/wiki/Sample_Databases">https://wiki.postgresql.org/wiki/Sample_Databases</a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="outline-container-org5c4f6b7" class="outline-3">
<h3 id="org5c4f6b7"><span class="section-number-3">27.1</span> Traps, pitfalls, gotchas</h3>
<div class="outline-text-3" id="text-27-1">
</div>
<div id="outline-container-org379069c" class="outline-4">
<h4 id="org379069c"><span class="section-number-4">27.1.1</span> PostgreSQL ALTER TABLE DROP COLUMN doesn't actually remove the column from disk</h4>
<div class="outline-text-4" id="text-27-1-1">
<p>
From <a href="https://nerderati.com/2017/01/03/postgresql-tables-can-have-at-most-1600-columns/">PostgreSQL Tables Can Only Have 1600 Columns, Ever. | Nerderati</a>.
</p>
</div>
</div>
</div>
</div>

  </div>

</article>

      </div>
    </main>

    
    
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
var disqus_config = function () {
    this.page.url = "https://edom.github.io/usecom.html";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "https://edom.github.io/usecom.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://edom-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    

    <footer class="site-footer h-card">
    <data class="u-url" href="/"></data>

    <div class="wrapper">
        <p>This page was created on 2016-05-02 03:31:20 +0700.</p>
        <p class="rss-subscribe">There is an <a href="/feed.xml">RSS feed</a>,
        but it's unused because this site is a wiki, not a blog.</p>
        <p>Stop writing books, papers, and blogs! Write a personal wiki instead! Or, even better, contribute to a community wiki.</p>
    </div>

</footer>


  </body>

</html>
