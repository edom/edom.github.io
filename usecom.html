<!DOCTYPE html>
<html lang="">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Using computers</title>
        <link rel="stylesheet" href="/assets/main.css"/>
        <script>
// Help the reader estimate how much time the reading is going to take.
// Show word count and reading time estimation in TOC entry.
//
// TOC = table of contents
//
// Known issue: This janks: this DOM manipulation is done after the page is rendered.
// If we don't want jank, we have to manipulate the HTML source before it reaches the browser.
// We assume that the user doesn't refresh the page while reading.
// The benefit of fixing that jank is not enough for me to justify trying to fix it.
document.addEventListener("DOMContentLoaded", function () {
    function count_word (string) {
        return string.trim().split(/\s+/).length;
    }
    function show_quantity (count, singular) {
        let plural = singular + "s"; // For this script only.
        return count + " " + ((count == 1) ? singular : plural);
    }
    function create_length_indicator (word, minute) {
        let e = document.createElement("span");
        e.className = "toc_entry__length_indicator";
        e.textContent = " (" + show_quantity(word, "word") + " ~ " + show_quantity(minute, "minute") + ")";
        return e;
    }
    // We assume that readers read this many words per minute with 100% comprehension.
    // This assumption may not hold for dense texts such as philosophy and mathematics.
    const wpm_assumption = 200;
    // We assume a certain Jekyll template.
    let page = document.querySelector("main.page-content");
    if (page === null) {
        console.log("toc_generate_estimate: Impossible: CSS selector \"main.page-content\" does not match anything");
        return;
    }
    let page_title = document.querySelector("header.post-header h1.post-title");
    if (page_title === null) {
        console.log("toc_generate_estimate: Impossible: CSS selector \"header.post-header h1.post-title\" does not match anything");
        return;
    }
    let page_word = count_word(page.textContent);
    let page_minute = Math.ceil(page_word / wpm_assumption);
    page_title.insertAdjacentElement("afterend", create_length_indicator(page_word, page_minute));
    // We violate the HTML specification.
    // The page may have several elements with the same ID.
    // We assume that Org HTML Export generates a DIV element with ID "table-of-contents".
    // We assume that Jekyll Markdown-to-HTML generates a UL element with ID "markdown-toc".
    // This only works for Org HTML Export's TOC.
    let toc_entries = document.querySelectorAll("#table-of-contents a, #text-table-of-contents a");
    toc_entries.forEach((toc_entry_a) => {
        let href = toc_entry_a.getAttribute("href"); // We assume that this is a string like "#org0123456".
        if (href.charAt(0) !== '#') {
            console.log("toc_generate_estimate: Impossible: " + href + " does not begin with hash sign");
            return;
        }
        // We can't just document.querySelector(href) because target_id may contain invalid ID characters such as periods.
        let target_id = href.substring(1);
        let id_escaped = target_id.replace("\"", "\\\"");
        let h_elem = document.querySelector("[id=\"" + id_escaped + "\"]"); // We assume that this is the h1/h2/h3 element referred by the TOC entry.
        if (h_elem === null) { // We assume that this is impossible.
            console.log("toc_generate_estimate: Impossible: " + href + " does not refer to anything");
            return;
        }
        let section = h_elem.parentNode;
        let section_word = count_word(section.textContent);
        let section_minute = Math.ceil(section_word / wpm_assumption);
        toc_entry_a.insertAdjacentElement("afterend", create_length_indicator(section_word, section_minute));
    });
});
        </script>

        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12628443-6"></script>
<script>
  window['ga-disable-UA-12628443-6'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-12628443-6');
</script>
        
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            jax: ["input/TeX","input/MathML","input/AsciiMath",
            "output/CommonHTML"
            ],
            extensions: ["tex2jax.js","mml2jax.js","asciimath2jax.js","MathMenu.js","MathZoom.js","AssistiveMML.js", "a11y/accessibility-menu.js"],
            TeX: {
                extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
                , equationNumbers: {
                    autoNumber: "AMS"
                }
            },
            "CommonHTML": {
                scale: 100
            },
            "fast-preview": {
                disabled: true,
            }
        });
        </script>
        <style>
            /*
            PreviewHTML produces small Times New Roman text.
            PreviewHTML scale doesn't work.
            */
            .MathJax_PHTML { font-size: 110%; }
        </style>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js" async defer></script>
    </head>
    <body>
        <header class="site-header" role="banner">
            <div class="wrapper">
                <a class="site-title" rel="author" href="/">Erik Dominikus Research Group</a>
            </div>
        </header>
    <div style="display:none;">\(
    \renewcommand\emptyset{\varnothing}
    \newcommand\abs[1]{\left|#1\right|}
    \newcommand\dom{\textrm{dom}}
    \newcommand\cod{\textrm{cod}}
    \newcommand\Bernoulli{\textrm{Bernoulli}}
    \newcommand\Binomial{\textrm{Binomial}}
    \newcommand\Expect[1]{\mathbb{E}[#1]}
    \newcommand\Nat{\mathbb{N}}
    \newcommand\Integers{\mathbb{Z}}
    \newcommand\Real{\mathbb{R}}
    \newcommand\Rational{\mathbb{Q}}
    \newcommand\Complex{\mathbb{C}}
    \newcommand\Pr{\mathrm{P}}
    \newcommand\Time{\text{Time}}
    \newcommand\DTime{\text{DTime}}
    \newcommand\NTime{\text{NTime}}
    \newcommand\TimeP{\text{P}}
    \newcommand\TimeNP{\text{NP}}
    \newcommand\TimeExp{\text{ExpTime}}
    \newcommand\norm[1]{\left\lVert#1\right\rVert}
    \newcommand\bbA{\mathbb{A}}
    \newcommand\bbC{\mathbb{C}}
    \newcommand\bbD{\mathbb{D}}
    \newcommand\bbE{\mathbb{E}}
    \newcommand\bbN{\mathbb{N}}
    \newcommand\frakI{\mathfrak{I}}
    % deprecated; use TimeExp
    \newcommand\ExpTime{\text{ExpTime}}
    \newcommand\Compute{\text{Compute}}
    \newcommand\Search{\text{Search}}
    % model theory structure
    \newcommand\struc[1]{\mathcal{#1}}
    \)</div>
        <main class="page-content" aria-label="Content">
            <div class="wrapper">
                <article class="post">
                    <header class="post-header">
                        <h1 class="post-title">Using computers</h1>
                    </header>
                </article>
                <div class="post-content">
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">1</span><span class="section_title"><a href="#administering-a-personal-gnulinux-installation-mostly-ubuntu">Administering a personal GNU/Linux installation (mostly Ubuntu)</a></span><span class="word_count">(1333w~7m)</span></li>
<li><span class="section_number">2</span><span class="section_title"><a href="#using-browser-and-the-internetthe-web">Using browser and the Internet/the Web</a></span><span class="word_count">(374w~2m)</span></li>
<li><span class="section_number">3</span><span class="section_title"><a href="#using-git">Using Git</a></span><span class="word_count">(648w~4m)</span></li>
<li><span class="section_number">4</span><span class="section_title"><a href="#making-a-personal-wiki">Making a personal wiki</a></span><span class="word_count">(106w~1m)</span></li>
<li><span class="section_number">5</span><span class="section_title"><a href="#ansible">Ansible</a></span><span class="word_count">(74w~1m)</span></li>
<li><span class="section_number">6</span><span class="section_title"><a href="#amazon-web-services">Amazon Web Services</a></span><span class="word_count">(244w~2m)</span></li>
<li><span class="section_number">7</span><span class="section_title"><a href="#moving-to-clouds-for-old-school-sysadmins">Moving to clouds, for old-school sysadmins</a></span><span class="word_count">(289w~2m)</span></li>
<li><span class="section_number">8</span><span class="section_title"><a href="#deploying-web-applications">Deploying web applications</a></span><span class="word_count">(864w~5m)</span></li>
<li><span class="section_number">9</span><span class="section_title"><a href="#using-java">Using Java</a></span><span class="word_count">(868w~5m)</span></li>
<li><span class="section_number">10</span><span class="section_title"><a href="#using-python">Using Python</a></span><span class="word_count">(66w~1m)</span></li>
<li><span class="section_number">11</span><span class="section_title"><a href="#software">Software</a></span><span class="word_count">(154w~1m)</span></li>
<li><span class="section_number">12</span><span class="section_title"><a href="#using-haskell">Using Haskell</a></span><span class="word_count">(1098w~6m)</span></li>
<li><span class="section_number">13</span><span class="section_title"><a href="#using-kubernetes">Using Kubernetes</a></span><span class="word_count">(99w~1m)</span></li>
<li><span class="section_number">14</span><span class="section_title"><a href="#using-trello">Using Trello</a></span><span class="word_count">(1076w~6m)</span></li>
<li><span class="section_number">15</span><span class="section_title"><a href="#using-xml">Using XML</a></span><span class="word_count">(185w~1m)</span></li>
<li><span class="section_number">16</span><span class="section_title"><a href="#using-postgresql">Using PostgreSQL</a></span><span class="word_count">(158w~1m)</span></li>
<li><span class="section_number">17</span><span class="section_title"><a href="#prepare-os-upgrade">&lt;2018-12-11&gt; Prepare OS upgrade?</a></span><span class="word_count">(440w~3m)</span></li>
<li><span class="section_number">18</span><span class="section_title"><a href="#woes-upgrading-to-debian-9">Woes upgrading to Debian 9</a></span><span class="word_count">(192w~1m)</span></li>
<li><span class="section_number">19</span><span class="section_title"><a href="#invert-screen-color">Invert screen color</a></span><span class="word_count">(15w~1m)</span></li>
</ul>
</div>
<h2 id="administering-a-personal-gnulinux-installation-mostly-ubuntu"><span class="section_number">1</span><span class="section_title">Administering a personal GNU/Linux installation (mostly Ubuntu)</span></h2>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">1.1</span><span class="section_title"><a href="#bash-shell-programming">Bash shell programming</a></span><span class="word_count">(116w~1m)</span></li>
<li><span class="section_number">1.2</span><span class="section_title"><a href="#installing-remote-graphical-user-interface">Installing remote graphical user interface</a></span><span class="word_count">(243w~2m)</span></li>
<li><span class="section_number">1.3</span><span class="section_title"><a href="#autotools">Autotools</a></span><span class="word_count">(38w~1m)</span></li>
<li><span class="section_number">1.4</span><span class="section_title"><a href="#running-x-client-applications-on-docker-on-linux">Running X client applications on Docker on Linux</a></span><span class="word_count">(147w~1m)</span></li>
<li><span class="section_number">1.5</span><span class="section_title"><a href="#habits-learned-the-hard-way">Habits learned the hard way</a></span><span class="word_count">(59w~1m)</span></li>
<li><span class="section_number">1.6</span><span class="section_title"><a href="#what">What</a></span><span class="word_count">(331w~2m)</span></li>
<li><span class="section_number">1.7</span><span class="section_title"><a href="#sudo-security-hole-mitigation-dont-reuse-the-terminal-you-use-for-sudo.">sudo security hole mitigation: Don't reuse the terminal you use for sudo.</a></span><span class="word_count">(153w~1m)</span></li>
<li><span class="section_number">1.8</span><span class="section_title"><a href="#probably-relevant-twitters">Probably relevant Twitters</a></span><span class="word_count">(7w~1m)</span></li>
<li><span class="section_number">1.9</span><span class="section_title"><a href="#building-software-for-old-ubuntu">Building software for old Ubuntu</a></span><span class="word_count">(70w~1m)</span></li>
<li><span class="section_number">1.10</span><span class="section_title"><a href="#what-1">What</a></span><span class="word_count">(19w~1m)</span></li>
<li><span class="section_number">1.11</span><span class="section_title"><a href="#security">Security</a></span><span class="word_count">(154w~1m)</span></li>
</ul>
</div>
<h3 id="bash-shell-programming"><span class="section_number">1.1</span><span class="section_title">Bash shell programming</span></h3>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">1.1.1</span><span class="section_title"><a href="#articles">Articles</a></span><span class="word_count">(20w~1m)</span></li>
<li><span class="section_number">1.1.2</span><span class="section_title"><a href="#error-handling">Error handling</a></span><span class="word_count">(14w~1m)</span></li>
<li><span class="section_number">1.1.3</span><span class="section_title"><a href="#bash-pitfalls">Bash pitfalls</a></span><span class="word_count">(72w~1m)</span></li>
<li><span class="section_number">1.1.4</span><span class="section_title"><a href="#others">Others</a></span><span class="word_count">(11w~1m)</span></li>
</ul>
</div>
<h4 id="articles"><span class="section_number">1.1.1</span><span class="section_title">Articles</span></h4>
<ul>
<li><p>Bash has associative arrays</p>
<ul>
<li><a href="https://www.artificialworlds.net/blog/2012/10/17/bash-associative-array-examples/">https://www.artificialworlds.net/blog/2012/10/17/bash-associative-array-examples/</a></li>
</ul></li>
<li><a href="https://github.com/SierraSoftworks/bash-cli">SierraSoftworks/bash-cli: A command line framework built using nothing but Bash and compatible with anything</a></li>
<li><a href="http://wiki.bash-hackers.org/syntax/pe">parameter expansion</a></li>
<li><p><a href="https://github.com/dylanaraps/pure-bash-bible">pure bash bible</a></p></li>
</ul>
<h4 id="error-handling"><span class="section_number">1.1.2</span><span class="section_title">Error handling</span></h4>
<p>I set these bash options in my script to make it fail fast:</p>
<div class="sourceCode" id="cb1" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">set</span> <span class="ex">-o</span> errexit</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">set</span> <span class="ex">-o</span> nounset</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw">set</span> <span class="ex">-o</span> pipefail</a></code></pre></div>
<h4 id="bash-pitfalls"><span class="section_number">1.1.3</span><span class="section_title">Bash pitfalls</span></h4>
<p>This is bash version <code>GNU bash, version 4.3.11(1)-release (x86_64-pc-linux-gnu)</code> that comes with Ubuntu 14.04.</p>
<ol>
<li><p>Local variable definition ignores command substitution result</p>
<p>At first this seems like an unexpected interaction between function, <code>local</code> variable, <code>set -e (set -o errexit)</code>, and command substitution <code>$(cmd)</code>.</p>
<p>The word <code>local</code> is a shell command that has an exit status, not a keyword like <code>var</code> in JavaScript. Bash is behaving as documented. See the documentation for <code>local</code> in <code>man bash</code>.</p>
<div class="sourceCode" id="cb2" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">fun_0()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">    <span class="bu">local</span> <span class="va">var</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="va">var=$(</span><span class="fu">false</span><span class="va">)</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="bu">echo</span> fun_0</a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="fu">fun_1()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb2-8" title="8">    <span class="bu">local</span> <span class="va">var=$(</span><span class="fu">false</span><span class="va">)</span></a>
<a class="sourceLine" id="cb2-9" title="9">    <span class="bu">echo</span> fun_1</a>
<a class="sourceLine" id="cb2-10" title="10"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-11" title="11"></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="fu">fun_2()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb2-13" title="13">    <span class="bu">local</span> <span class="va">var=$1</span></a>
<a class="sourceLine" id="cb2-14" title="14">    <span class="bu">echo</span> fun_2</a>
<a class="sourceLine" id="cb2-15" title="15"><span class="kw">}</span></a>
<a class="sourceLine" id="cb2-16" title="16"></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="bu">echo</span> <span class="va">$(</span><span class="kw">set</span> <span class="ex">-o</span> errexit<span class="kw">;</span> <span class="ex">fun_0</span><span class="va">)</span> <span class="co"># Expected: This doesn&#39;t print fun_0.</span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="bu">echo</span> <span class="va">$(</span><span class="kw">set</span> <span class="ex">-o</span> errexit<span class="kw">;</span> <span class="ex">fun_1</span><span class="va">)</span> <span class="co"># PITFALL: This prints fun_1 !!!</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="bu">echo</span> <span class="va">$(</span><span class="kw">set</span> <span class="ex">-o</span> nounset<span class="kw">;</span> <span class="ex">fun_2</span><span class="va">)</span> <span class="co"># Pitfall: This doesn&#39;t print fun_2, and aborts with &quot;bash: $1: unbound variable&quot;.</span></a></code></pre></div></li>
</ol>
<h4 id="others"><span class="section_number">1.1.4</span><span class="section_title">Others</span></h4>
<ul>
<li><a href="https://github.com/koalaman/shellcheck">https://github.com/koalaman/shellcheck</a>
<ul>
<li>&lt;2018-11-03&gt; I'm not going back to Haskell until GHC compiles faster.</li>
</ul></li>
</ul>
<h3 id="installing-remote-graphical-user-interface"><span class="section_number">1.2</span><span class="section_title">Installing remote graphical user interface</span></h3>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">1.2.1</span><span class="section_title"><a href="#goal-background-and-failures">Goal, background, and failures</a></span><span class="word_count">(101w~1m)</span></li>
<li><span class="section_number">1.2.2</span><span class="section_title"><a href="#plan-of-action">Plan of action</a></span><span class="word_count">(51w~1m)</span></li>
<li><span class="section_number">1.2.3</span><span class="section_title"><a href="#installing-starting-and-stopping-tightvnc-server-on-the-remote-machine">Installing, starting, and stopping TightVNC server on the remote machine</a></span><span class="word_count">(73w~1m)</span></li>
<li><span class="section_number">1.2.4</span><span class="section_title"><a href="#installing-tightvnc-client-on-the-localdevelopment-machine">Installing TightVNC client on the local/development machine</a></span><span class="word_count">(7w~1m)</span></li>
<li><span class="section_number">1.2.5</span><span class="section_title"><a href="#path-not-taken">Path not taken</a></span><span class="word_count">(11w~1m)</span></li>
</ul>
</div>
<h4 id="goal-background-and-failures"><span class="section_number">1.2.1</span><span class="section_title">Goal, background, and failures</span></h4>
<p>I need to run Java VisualVM on my server to profile my application.</p>
<p>I tried <code>ssh -X</code>, but it was unacceptably slow. SSH compression doesn't help; the problem is latency, not throughput.</p>
<p>I don't want to run an X server on the remote machine. I don't want a display server running all the time. I want to start it only when I need it.</p>
<p>Ubuntu help is not helpful. It doesn't even mention VNC or RDP. <a href="https://help.ubuntu.com/community/ServerGUI">https://help.ubuntu.com/community/ServerGUI</a></p>
<p>VNC seems promising. Let's run VNC at the server's localhost, and connect through SSH tunneling. Let's go with TightVNC.</p>
<p>&quot;VNC: A Faster Alternative to X11&quot; <a href="https://www.nas.nasa.gov/hecc/support/kb/vnc-a-faster-alternative-to-x11_257.html">https://www.nas.nasa.gov/hecc/support/kb/vnc-a-faster-alternative-to-x11_257.html</a></p>
<h4 id="plan-of-action"><span class="section_number">1.2.2</span><span class="section_title">Plan of action</span></h4>
<p>We assume two machines:</p>
<ul>
<li>The <em>local machine</em> is the machine that we use to start SSH connection.</li>
<li>The <em>remote machine</em> is the machine that accepts SSH connections.</li>
</ul>
<p>What we need to do on the remote machine:</p>
<ul>
<li>Install VNC server.</li>
<li>Start VNC server.</li>
<li>Stop VNC server.</li>
</ul>
<p>What we need to do on the local machine:</p>
<ul>
<li>Install VNC client/viewer.</li>
</ul>
<h4 id="installing-starting-and-stopping-tightvnc-server-on-the-remote-machine"><span class="section_number">1.2.3</span><span class="section_title">Installing, starting, and stopping TightVNC server on the remote machine</span></h4>
<p>sudo apt-get install â€“no-install-recommends xfce4 tightvncserver</p>
<p>To start VNC server at remote localhost port 5901. 1920x1080. vncserver -localhost -nolisten tcp -geometry 1920x960 -depth 24 :1</p>
<p>Configure SSH LocalForward. If you have a jumpbox, you may need to forward twice.</p>
<p>To stop vncserver -kill :1</p>
<p>Start remmina. It seems to have been installed by default. The GUI should be obvious.</p>
<p>Sources:</p>
<ul>
<li>&quot;-nolisten tcp&quot; <a href="http://mail.nylug.org/pipermail/nylug-talk/2009-April/013377.html">http://mail.nylug.org/pipermail/nylug-talk/2009-April/013377.html</a></li>
<li>&quot;vncserver :1 -geometry 800x600 -depth 24&quot; <a href="https://blog.ssdnodes.com/blog/remote-linux-desktop-vps-ssh-vnc/">https://blog.ssdnodes.com/blog/remote-linux-desktop-vps-ssh-vnc/</a></li>
<li>helpful <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-14-04">https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-14-04</a></li>
</ul>
<h4 id="installing-tightvnc-client-on-the-localdevelopment-machine"><span class="section_number">1.2.4</span><span class="section_title">Installing TightVNC client on the local/development machine</span></h4>
<h4 id="path-not-taken"><span class="section_number">1.2.5</span><span class="section_title">Path not taken</span></h4>
<p>I saw these, but I did not try these.</p>
<ul>
<li><a href="https://wiki.x2go.org/doku.php/doc:newtox2go">https://wiki.x2go.org/doku.php/doc:newtox2go</a></li>
<li><a href="https://www.tecmint.com/best-remote-linux-desktop-sharing-software/">https://www.tecmint.com/best-remote-linux-desktop-sharing-software/</a></li>
<li><a href="https://serverfault.com/questions/36381/best-fastest-way-to-access-desktop-gui-on-a-remote-ubuntu-server">https://serverfault.com/questions/36381/best-fastest-way-to-access-desktop-gui-on-a-remote-ubuntu-server</a></li>
</ul>
<h3 id="autotools"><span class="section_number">1.3</span><span class="section_title">Autotools</span></h3>
<ul>
<li>I add <code>--prefix=$HOME/.local</code> to configure. For installing things, I only sudo apt. I never sudo make.</li>
<li>Cargo-cult programming
<ul>
<li>Sometimes fixes things
<ul>
<li>Add <code>-I /usr/share/aclocal</code> to <code>ACLOCAL_AMFLAGS</code> in <code>Makefile.am</code>.</li>
</ul></li>
</ul></li>
<li><a href="http://voices.canonical.com/jussi.pakkanen/2011/09/13/autotools/">Why GNU Autotools is not my favorite build system | Jussi Pakkanen's development blog</a></li>
</ul>
<h3 id="running-x-client-applications-on-docker-on-linux"><span class="section_number">1.4</span><span class="section_title">Running X client applications on Docker on Linux</span></h3>
<pre class="example"><code>docker \
    -e DISPLAY \
    -v /tmp/.X11-unix:/tmp/.X11-unix:ro \
    -u &lt;user&gt; &lt;image&gt; &lt;command&gt;
</code></pre>
<p>Replace <code>&lt;user&gt;</code> with a non-root user. You need a non-root user because the X server rejects connection from the root user by default. You can change this with <code>xhost</code>, but it's better to connect with a non-root user.</p>
<p>The <code>&lt;command&gt;</code> argument is optional.</p>
<p>The <code>-e DISPLAY</code> parameter reexports the <code>DISPLAY</code> environment variable to the application inside the container. X client applications will read from this environment variable to determine which server to connect to.</p>
<p>The <code>-v HOST:CONT:ro</code> option mounts <code>HOST</code> directory to <code>CONT</code> directory read-only. This is so that the application in the container can connect to the host X server's Unix socket.</p>
<p>On Linux, display <code>:0</code> corresponds to the Unix socket <code>/tmp/.X11-unix/X0</code>. Everyone who can connect to that Unix socket will be able to run X client applications on the machine; it is not specific to Docker.</p>
<p>If X complains about shared memory, try:</p>
<pre class="example"><code>docker \
    -e DISPLAY=unix$DISPLAY \
    -v /tmp/.X11-unix:/tmp/.X11-unix:ro \
    -u &lt;user&gt; &lt;image&gt; &lt;command&gt;
</code></pre>
<h3 id="habits-learned-the-hard-way"><span class="section_number">1.5</span><span class="section_title">Habits learned the hard way</span></h3>
<ul>
<li>I check the time at <a href="https://time.gov/">time.gov</a> because Ubuntu 14.04 NTP once betrayed me.
<ul>
<li>2018-01-16: I had always thought that it was dependable, but it betrayed me: It showed 2 a.m. while the actual time was 4 a.m.. I missed some hours of sleep.</li>
</ul></li>
<li>I sometimes run <code>sync</code>, hoping to make sure my changes are written to disk.</li>
</ul>
<h3 id="what"><span class="section_number">1.6</span><span class="section_title">What</span></h3>
<ul>
<li><p>Why use swap partitions and not swap files?</p>
<ul>
<li><p>Defragmenting swap files might have undesirable effects.</p>
<ul>
<li><a href="https://lwn.net/Articles/317787/">https://lwn.net/Articles/317787/</a></li>
</ul></li>
</ul></li>
<li><p>ext4 defragmentation tools</p>
<ul>
<li><p><a href="https://askubuntu.com/questions/221079/how-to-defrag-an-ext4-filesystem">https://askubuntu.com/questions/221079/how-to-defrag-an-ext4-filesystem</a></p>
<ul>
<li>e2freefrag DEV, e4defrag -c FILE</li>
</ul></li>
</ul></li>
<li><p>SATA 3 Gbps controller problem?</p>
<ul>
<li><a href="https://github.com/zfsonlinux/zfs/issues/4873">https://github.com/zfsonlinux/zfs/issues/4873</a></li>
</ul></li>
<li><p>Security</p>
<ul>
<li><p>Isolating (sandboxing) an application</p>
<ul>
<li><p>Creating a dedicated limited user for an application</p>
<ul>
<li><code>adduser --system</code>, or just use the <code>nobody</code> user?</li>
</ul></li>
</ul></li>
<li><p>Many methods of isolation</p>
<ul>
<li><a href="https://unix.stackexchange.com/questions/384117/linux-isolate-process-without-containers">https://unix.stackexchange.com/questions/384117/linux-isolate-process-without-containers</a></li>
<li><a href="https://www.engineyard.com/blog/linux-containers-isolation">https://www.engineyard.com/blog/linux-containers-isolation</a></li>
<li><a href="https://opensourceforu.com/2016/07/many-approaches-sandboxing-linux/">https://opensourceforu.com/2016/07/many-approaches-sandboxing-linux/</a></li>
</ul></li>
</ul></li>
<li>Why isn't ssh fail2ban the default? Why is security not the default?</li>
<li>2014, &quot;Is there any solution to make OpenVPN authentication with Google ID?&quot;, <a href="https://serverfault.com/questions/597833/is-there-any-solution-to-make-openvpn-authentication-with-google-id">SF 597833</a></li>
<li><p>man page usability, terminal usability, reducing cognitive load</p>
<ul>
<li><a href="https://tldr.sh/">tldr.sh</a>: &quot;The TLDR pages are a community effort to simplify the beloved man pages with practical examples.&quot;</li>
</ul></li>
<li><a href="https://stackoverflow.com/questions/22697049/what-is-the-difference-between-google-app-engine-and-google-compute-engine">SO 22697049: difference between Google App Engine and Google Compute Engine</a></li>
<li><p>A good OS (operating system) is invisible like a good design.</p>
<ul>
<li>The user can't tell whether an OS is good. If the OS is good, everything runs smoothly.</li>
<li>But the user can tell whether an OS is bad. Crashes due to non-hardware problems. Things that don't just work.</li>
</ul></li>
<li><p><a href="https://felipec.wordpress.com/2011/06/16/after-two-weeks-of-using-gnome-3-i-officially-hate-it/">https://felipec.wordpress.com/2011/06/16/after-two-weeks-of-using-gnome-3-i-officially-hate-it/</a></p>
<ul>
<li>Why does the author disapprove of GNOME 3?</li>
</ul></li>
<li><p><a href="https://libcloud.apache.org/">https://libcloud.apache.org/</a></p>
<ul>
<li>&quot;One Interface To Rule Them All: Python library for interacting with many of the popular cloud service providers using a unified API.&quot;</li>
</ul></li>
<li><p>Systems should be secure by default.</p>
<ul>
<li><p>UNIX/Linux woes</p>
<ul>
<li>Why is SSH fail2ban not installed by default?</li>
<li><p>Why does an application run as the user?</p>
<ul>
<li>I think this is a design flaw. It's a big gaping security hole. It allows an application to access all your files. But how do we fix this without sacrificing convenience?</li>
<li>Why is sandboxing not the default?</li>
</ul></li>
<li><p>How do we understand SELinux?</p>
<ul>
<li><a href="https://www.computernetworkingnotes.com/rhce-study-guide/selinux-explained-with-examples-in-easy-language.html">SELinux Explained with Examples in Easy Language</a></li>
<li><p>NSA made SELinux. How trustworthy is it? Does it have NSA backdoors?</p>
<ul>
<li><a href="https://security.stackexchange.com/questions/42383/how-trustworthy-is-selinux">linux - How trustworthy is SELinux? - Information Security Stack Exchange</a></li>
<li>2017, <a href="https://www.reddit.com/r/linux/comments/54in5s/the_nsa_has_tried_to_backdoor_linux_three_times/">The NSA has tried to backdoor linux three times : linux</a></li>
</ul></li>
</ul></li>
<li><p>What is the relationship/difference between MAC (mandatory access control) and DAC (discretionary access control)? Are they antonyms? Complements?</p>
<ul>
<li><a href="https://security.stackexchange.com/questions/63518/mac-vs-dac-vs-rbac">access control - MAC vs DAC vs RBAC - Information Security Stack Exchange</a></li>
</ul></li>
</ul></li>
<li><p>The only real secure way to run an untrusted application is on a different machine with no network connection.</p></li>
</ul></li>
<li><a href="https://linux.die.net/man/1/pv">pv(1): monitor progress of data through pipe - Linux man page</a></li>
<li><a href="https://stedolan.github.io/jq/">jq</a>, <a href="https://en.wikipedia.org/wiki/Jq_(programming_language)">WP:jq (programming language)</a></li>
</ul>
<h3 id="sudo-security-hole-mitigation-dont-reuse-the-terminal-you-use-for-sudo."><span class="section_number">1.7</span><span class="section_title">sudo security hole mitigation: Don't reuse the terminal you use for sudo.</span></h3>
<p>The problem: If you run sudo in a terminal, then every program you run in the same terminal shortly after can become root without asking for your password, (You may not have this problem if your system disables credential caching.)</p>
<p>To see how, save this into <code>evil.sh</code>, and then <code>chmod 755 evil.sh</code>, and then <code>sudo echo login</code>, and then <code>./evil.sh</code>.</p>
<div class="sourceCode" id="cb5" data-org-language="sh"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co"># If you run this script not long after sudoing in the same terminal,</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co"># then this script can become root without prompting for your password.</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="fu">sudo</span> echo PWNED <span class="co"># could be a malicious program</span></a></code></pre></div>
<p>The security hole is by design for convenience because people don't like typing their passwords. This hole is not fatal; the user can control this. It seems that this hole won't be closed; there doesn't seem to be any way of closing this hole without annoying the user.</p>
<p>The mitigation is simple disciplined behavior:</p>
<ul>
<li>Do as few things as necessary in an elevated terminal.</li>
<li>Run only trusted programs and scripts.</li>
<li>Close the terminal as soon as possible. Alternatively, you can also run <code>sudo -K</code> to remove the cache.</li>
</ul>
<h3 id="probably-relevant-twitters"><span class="section_number">1.8</span><span class="section_title">Probably relevant Twitters</span></h3>
<ul>
<li><a href="https://twitter.com/nixcraft">nixcraft</a>: some humor, some important</li>
</ul>
<h3 id="building-software-for-old-ubuntu"><span class="section_number">1.9</span><span class="section_title">Building software for old Ubuntu</span></h3>
<p>Suppose:</p>
<ul>
<li>You are using Ubuntu 14.04.</li>
<li>Ubuntu 14.04 comes with Emacs 24.</li>
<li>You want to build Emacs 26 (because you want Spacemacs).</li>
</ul>
<p>You may be able to do that. Install the build dependencies, and hope that emacs 26 doesn't get too edgy with its libraries.</p>
<pre class="example"><code>sudo apt-get build-dep emacs24
</code></pre>
<p>That is from <a href="http://ergoemacs.org/emacs/building_emacs_on_linux.html">How to Build Emacs on Linux</a>.</p>
<p>You can do that for other software, as long as they don't require dependencies that are too recent.</p>
<h3 id="what-1"><span class="section_number">1.10</span><span class="section_title">What</span></h3>
<ul>
<li><a href="https://medium.com/netflix-techblog/linux-performance-analysis-in-60-000-milliseconds-accc10403c55">https://medium.com/netflix-techblog/linux-performance-analysis-in-60-000-milliseconds-accc10403c55</a></li>
</ul>
<p>&lt;2019-01-16&gt; Ubuntu 14.04. Okular is better than Evince. Okular's &quot;Trim Margins&quot; feature is helpful. Okular also feels more responsive.</p>
<h3 id="security"><span class="section_number">1.11</span><span class="section_title">Security</span></h3>
<ul>
<li><p>Bastion hosts, aka jump boxes</p>
<ul>
<li><p>Does a jump box add any security?</p>
<ul>
<li><a href="http://cloudacademy.com/blog/aws-bastion-host-nat-instances-vpc-peering-security/">http://cloudacademy.com/blog/aws-bastion-host-nat-instances-vpc-peering-security/</a></li>
<li><a href="http://www.infoworld.com/article/2612700/security/-jump-boxes--improve-security--if-you-set-them-up-right.html">http://www.infoworld.com/article/2612700/security/-jump-boxes--improve-security--if-you-set-them-up-right.html</a></li>
</ul></li>
</ul></li>
<li><p>Check your HTTPS</p>
<ul>
<li><a href="https://www.ssllabs.com/ssltest/">Test your HTTPS implementation</a>; it's too easy to do security wrong.</li>
</ul></li>
<li><p><a href="https://www.vaultproject.io/">HashiCorp Vault</a></p>
<ul>
<li><a href="https://github.com/hashicorp/vault">source code</a>, language Go, license MPL 2.0</li>
<li>What is Vault? &quot;Vault is a tool for securely accessing <em>secrets</em>.&quot; (<a href="https://www.vaultproject.io/intro/index.html">Introduction</a>)</li>
<li>What can it do?</li>
<li>How do I install it?</li>
<li>How do I run it?</li>
<li>How do I interact with it?</li>
<li><a href="https://www.hashicorp.com/">HashiCorp</a></li>
</ul></li>
<li><a href="https://stackoverflow.com/questions/5930529/how-is-revocation-of-a-root-certificate-handled">SE 5930529: How is revocation of a root certificate handled?</a></li>
<li><a href="https://en.wikipedia.org/wiki/Online_Certificate_Status_Protocol">WP: Online Certificate Status Protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/OCSP_stapling">WP: OCSP Stapling</a> moves the cost from client to server.</li>
<li><p>Zero trust security model (ZTSM)</p>
<ul>
<li>&quot;How would I design my system without any firewalls?&quot;</li>
<li><p><a href="https://www.scaleft.com/beyondcorp/">https://www.scaleft.com/beyondcorp/</a></p>
<ul>
<li>old approach: perimeter security, medieval castle, weak core, strong perimeter</li>
<li><p><a href="https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43231.pdf">https://storage.googleapis.com/pub-tools-public-publication-data/pdf/43231.pdf</a></p>
<ul>
<li>&quot;The perimeter security model works well enough when all employees work exclusively in buildings owned by an enterprise.&quot;</li>
<li>&quot;access depends solely on device and user credentials, regardless of a user's network location&quot;</li>
<li>&quot;All access to enterprise resources is fully authenticated, fully authorized, and fully encrypted based upon device state and user credentials.&quot;</li>
<li>ZTSM obviates VPN (virtual private network).</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<h2 id="using-browser-and-the-internetthe-web"><span class="section_number">2</span><span class="section_title">Using browser and the Internet/the Web</span></h2>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">2.1</span><span class="section_title"><a href="#removing-nag-screens">Removing nag screens</a></span><span class="word_count">(116w~1m)</span></li>
<li><span class="section_number">2.2</span><span class="section_title"><a href="#searching-the-internet">Searching the Internet</a></span><span class="word_count">(211w~2m)</span></li>
<li><span class="section_number">2.3</span><span class="section_title"><a href="#contributing-to-wikipedia">Contributing to Wikipedia</a></span><span class="word_count">(44w~1m)</span></li>
</ul>
</div>
<h3 id="removing-nag-screens"><span class="section_number">2.1</span><span class="section_title">Removing nag screens</span></h3>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">2.1.1</span><span class="section_title"><a href="#how-to-use-this">How to use this</a></span><span class="word_count">(20w~1m)</span></li>
<li><span class="section_number">2.1.2</span><span class="section_title"><a href="#make-www.webtoon.com-fast">Make <a href="http://www.webtoon.com/">www.webtoon.com</a> fast</a></span><span class="word_count">(49w~1m)</span></li>
<li><span class="section_number">2.1.3</span><span class="section_title"><a href="#remove-quora-nag-screen">Remove Quora nag screen</a></span><span class="word_count">(18w~1m)</span></li>
<li><span class="section_number">2.1.4</span><span class="section_title"><a href="#remove-pinterest-nag-screen">Remove Pinterest nag screen</a></span><span class="word_count">(8w~1m)</span></li>
<li><span class="section_number">2.1.5</span><span class="section_title"><a href="#group-gmail-mails-by-sender-email">Group Gmail mails by sender email</a></span><span class="word_count">(6w~1m)</span></li>
<li><span class="section_number">2.1.6</span><span class="section_title"><a href="#chrome-bookmarklet-make-markdown-link-for-page">Chrome bookmarklet: Make Markdown link for page</a></span><span class="word_count">(15w~1m)</span></li>
<li><span class="section_number">2.1.7</span><span class="section_title"><a href="#tvtropes.org-show-all-spoilers">tvtropes.org: show all spoilers</a></span><span class="word_count">(4w~1m)</span></li>
</ul>
</div>
<h4 id="how-to-use-this"><span class="section_number">2.1.1</span><span class="section_title">How to use this</span></h4>
<p>Copy the respective fragments to your browser's JavaScript Console (Ctrl+Shift+J on Chromium).</p>
<p>Don't run codes you don't trust.</p>
<h4 id="make-www.webtoon.com-fast"><span class="section_number">2.1.2</span><span class="section_title">Make <a href="http://www.webtoon.com/">www.webtoon.com</a> fast</span></h4>
<p>That website has an unacceptably slow scrolling. This script makes it fast.</p>
<ol>
<li><p>Usage</p>
<p>Open the comic episode you want to read.</p>
<p>Paste this fragment into your browser's JavaScript console.</p>
<pre class="example"><code>// Retain big images. Discard everything else.
var images = [];
document.querySelectorAll(&quot;img&quot;).forEach(function (element) {
    images.push(element);
});
document.head.innerHTML = &quot;&quot;;
document.body.innerHTML = &quot;&quot;;
images.forEach(function (element) {
    const big = 256;
    const url = element.dataset.url;
    if (url &amp;&amp; element.width &gt;= big) {
        element.src = url;
        element.style.display = &quot;block&quot;;
        document.body.appendChild(element);
    }
});
</code></pre>
<p>To go the the next episode, increment the <code>episode_no</code> parameter in the address bar.</p></li>
<li><p>Notes</p>
<p>I tried <code>getEventListeners</code> and <code>removeEventListener</code> but they don't work.</p></li>
</ol>
<h4 id="remove-quora-nag-screen"><span class="section_number">2.1.3</span><span class="section_title">Remove Quora nag screen</span></h4>
<p>Tested on 2017-07-08.</p>
<p>Not only does Quora put up a nag screen, it also disables scrolling.</p>
<pre class="example"><code>document.querySelectorAll(&quot;div[id]&quot;).forEach(function (x) {
    if (x.id.indexOf(&quot;signup_wall_wrapper&quot;) &gt;= 0) { x.remove(); }
});
document.body.classList.remove(&quot;signup_wall_prevent_scroll&quot;);
</code></pre>
<h4 id="remove-pinterest-nag-screen"><span class="section_number">2.1.4</span><span class="section_title">Remove Pinterest nag screen</span></h4>
<p>Tested on 2018-05-13.</p>
<p>Type 1.</p>
<pre class="example"><code>document.querySelector(&quot;[data-test-giftwrap]&quot;).remove();
</code></pre>
<p>Type 2.</p>
<pre class="example"><code>document.querySelector(&quot;#desktopWrapper&quot;).style.position = &quot;static&quot;;
document.querySelector(&quot;body style&quot;).remove();
document.querySelector(&quot;.FullPageModal__scroller&quot;).parentNode.remove();
</code></pre>
<h4 id="group-gmail-mails-by-sender-email"><span class="section_number">2.1.5</span><span class="section_title">Group Gmail mails by sender email</span></h4>
<pre class="example"><code>(function () {
    var group = {};
    document.querySelectorAll(&quot;[email]&quot;).forEach(function (elem) {
        var sender = elem.getAttribute(&quot;email&quot;);
        group[sender] = 1 + (group[sender] || 0);
    });
    var list = [];
    var sender;
    var count;
    for (sender in group) {
        count = group[sender];
        list.push([count, sender]);
    }
    list.sort(function (a, b) {
        return -Math.sign(a[0] - b[0]);
    })
    return list;
})();
</code></pre>
<h4 id="chrome-bookmarklet-make-markdown-link-for-page"><span class="section_number">2.1.6</span><span class="section_title">Chrome bookmarklet: Make Markdown link for page</span></h4>
<p>This may produce invalid Markdown. Check before you copy.</p>
<pre class="example"><code>javascript:window.prompt(&quot;Copy to clipboard: Ctrl+C, Enter&quot;, &quot;- [&quot; + document.title + &quot;](&quot; + document.URL + &quot;)&quot;);
</code></pre>
<h4 id="tvtropes.org-show-all-spoilers"><span class="section_number">2.1.7</span><span class="section_title">tvtropes.org: show all spoilers</span></h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="va">Array</span>.<span class="va">prototype</span>.<span class="va">map</span>.<span class="at">call</span>(<span class="va">document</span>.<span class="at">querySelectorAll</span>(<span class="st">&#39;*&#39;</span>)<span class="op">,</span> (e) <span class="op">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">    <span class="va">e</span>.<span class="va">style</span>.<span class="at">display</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="va">e</span>.<span class="va">classList</span>.<span class="at">remove</span>(<span class="st">&quot;spoiler&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-4" title="4">    <span class="va">e</span>.<span class="va">classList</span>.<span class="at">remove</span>(<span class="st">&quot;folder&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="searching-the-internet"><span class="section_number">2.2</span><span class="section_title">Searching the Internet</span></h3>
<p>&lt;2019-02-04&gt; For reverse image search, I find Yandex better than Bing, and Bing better than Google.</p>
<ul>
<li>Example search: given a text description, find related images</li>
<li>Example reverse search: given an image, describe it, or find its copies on the Internet</li>
<li><p>Internet search tools in 2018</p>
<ul>
<li><p><a href="https://duckduckgo.com/">duckduckgo.com</a>: privacy-focused search engine</p>
<ul>
<li>less censored than Google</li>
<li>no reverse search (yet?)</li>
</ul></li>
<li><p><a href="https://google.com/">google.com</a>: biggest Internet search engine in 2018</p>
<ul>
<li>censored</li>
<li>text search</li>
<li>image search</li>
<li>reverse image search</li>
<li><p>Problems</p>
<ul>
<li><p>Google should rank down Pinterest.</p>
<ul>
<li>In my experience, Pinterest is never an authoritative nor original source.</li>
<li>Google has ranked down Tumblr and Wikipedia.</li>
</ul></li>
<li><p>Example of Google censorship (compare with DuckDuckGo):</p>
<ul>
<li>search terms related to pornography</li>
<li>search terms related to the darknet (the hidden wiki, Tor websites)</li>
<li>rhino poaching (Google favors contents against rhino poaching)</li>
</ul></li>
<li><p><a href="https://stallman.org/google.html">Richard Stallman's reasons not to use Google</a></p></li>
</ul></li>
</ul></li>
<li><p><a href="https://www.bing.com/">bing.com</a>: Microsoft's answer to Google</p>
<ul>
<li>text search</li>
<li>reverse image search</li>
<li><a href="https://stallman.org/microsoft.html">Richard Stallman's reasons not to use Microsoft</a></li>
</ul></li>
<li>searx?</li>
<li>startpage?</li>
<li><p>reverse search tools</p>
<ul>
<li>Google and Bing have reverse image search</li>
<li><a href="https://tineye.com/">tineye.com</a>: reverse image search</li>
<li><p><a href="http://www.mooma.sh">moomash</a> (was &quot;audentifi&quot;), YouTube reverse audio search</p>
<ul>
<li>2018: only works with some video formats; doesn't work for old videos</li>
<li>2018-09-15: It have gone out of business, it seems.</li>
</ul></li>
<li><p>Shazam</p>
<ul>
<li>Is there anything like Shazam that takes a YouTube URL, and doesn't require me to install anything?</li>
</ul></li>
<li><a href="http://whatpixel.com/original-source-image-search-tools/">http://whatpixel.com/original-source-image-search-tools/</a></li>
<li><p><a href="https://saucenao.com/">saucenao.com</a>: reverse image search; I use it to find images stolen from pixiv</p></li>
</ul></li>
</ul></li>
<li><p>The Internet is full of crap.</p>
<ul>
<li>So are libraries.</li>
<li>So is the world.</li>
<li>So is this website.</li>
<li>Thus, you must think for yourself.</li>
</ul></li>
</ul>
<h3 id="contributing-to-wikipedia"><span class="section_number">2.3</span><span class="section_title">Contributing to Wikipedia</span></h3>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">2.3.1</span><span class="section_title"><a href="#beginning-contributing-to-wikipedia">Beginning contributing to Wikipedia</a></span><span class="word_count">(29w~1m)</span></li>
<li><span class="section_number">2.3.2</span><span class="section_title"><a href="#what-should-be-in-user-page">What should be in user page?</a></span><span class="word_count">(14w~1m)</span></li>
</ul>
</div>
<h4 id="beginning-contributing-to-wikipedia"><span class="section_number">2.3.1</span><span class="section_title">Beginning contributing to Wikipedia</span></h4>
<p>Don't publish anything you may regret later. Once it's on the Internet, it's forever. The Internet doesn't forget. Wikipedia is a highly crawled and archived site.</p>
<h4 id="what-should-be-in-user-page"><span class="section_number">2.3.2</span><span class="section_title">What should be in user page?</span></h4>
<p>Templates: User page, User in $country, Babel</p>
<p>See <a href="https://en.wikipedia.org/wiki/Wikipedia:User_pages">WP:User pages</a>.</p>
<p><a href="https://en.wikipedia.org/wiki/Wikipedia:Userboxes">WP:Userboxes</a></p>
<h2 id="using-git"><span class="section_number">3</span><span class="section_title">Using Git</span></h2>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">3.1</span><span class="section_title"><a href="#mental-model">Mental model</a></span><span class="word_count">(199w~1m)</span></li>
<li><span class="section_number">3.2</span><span class="section_title"><a href="#more-information">More information</a></span><span class="word_count">(64w~1m)</span></li>
<li><span class="section_number">3.3</span><span class="section_title"><a href="#things-to-write">Things to write?</a></span><span class="word_count">(53w~1m)</span></li>
<li><span class="section_number">3.4</span><span class="section_title"><a href="#git-hash-collisions">Git hash collisions</a></span><span class="word_count">(120w~1m)</span></li>
<li><span class="section_number">3.5</span><span class="section_title"><a href="#related-tools">Related tools</a></span><span class="word_count">(11w~1m)</span></li>
<li><span class="section_number">3.6</span><span class="section_title"><a href="#speeding-up-git">Speeding up Git</a></span><span class="word_count">(205w~2m)</span></li>
</ul>
</div>
<h3 id="mental-model"><span class="section_number">3.1</span><span class="section_title">Mental model</span></h3>
<p>A <em>commit</em> is a snapshot of the working tree.</p>
<p>A <em>reference</em> names a commit so that you can write <code>master</code> instead of <code>da39a3e</code>.</p>
<p>If you are a visual person, you can think about how git commands change the picture shown by <code>gitk</code> (a tool for visualizing Git repositories).</p>
<p>In gitk, a blue circle is a commit, a green box is a <em>reference</em>, and the bold green box is the <em>head</em>.</p>
<p>The head points to the commit that will be the parent of the next commit.</p>
<p>When you <code>git init</code>, Git creates a <code>.git</code> directory.</p>
<p>When you <code>git status</code>, it prints <code>On branch master</code>. It means that the head points to the same commit pointed by the reference named <code>master</code>.</p>
<p>When you <code>git commit</code>, you make a new commit (blue circle), and move the current branch (bold green box) to that new commit.</p>
<p>When you <code>git reset Target</code>, you move the head (bold green box) to <code>Target</code>.</p>
<p>If you are not yet comfortable with Git, back up your data by copying the <code>.git</code> directory. It can get corrupted. Things will go wrong. You may accidentally do something and don't know how to recover. Computers don't understand what you mean. They do what you say, not what you mean.</p>
<h3 id="more-information"><span class="section_number">3.2</span><span class="section_title">More information</span></h3>
<p>A Git <em>object</em>:</p>
<ul>
<li>is identified by a SHA-1 hash;</li>
<li>is either a blob, tree, or commit;</li>
<li>is stored as a file somewhere in the <code>.git</code> folder.</li>
</ul>
<p>A <em>commit</em> has zero or more parents. It also refers to a tree.</p>
<p>A <em>tree</em> is a list of references. Every reference points to either a tree or a blob.</p>
<p>For more information, read the <a href="https://git-scm.com/book">Pro Git</a> book or the <a href="https://git-scm.com/docs">manpages</a> (<code>man git</code>).</p>
<h3 id="things-to-write"><span class="section_number">3.3</span><span class="section_title">Things to write?</span></h3>
<ul>
<li><p>Git fundamentals:</p>
<ul>
<li>Git store things in the <code>.git</code> directory.</li>
<li>Why merge conflicts? How to resolve them? How to use <code>meld</code>? How to do a three-way merge?</li>
<li>Avoid changing spaces. Avoid using your IDE to reformat files that are already commited.</li>
</ul></li>
<li><p>Workaround for bad user experience</p>
<ul>
<li><p>Disable git-gui GC warning:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/1106529/how-to-skip-loose-object-popup-when-running-git-gui">https://stackoverflow.com/questions/1106529/how-to-skip-loose-object-popup-when-running-git-gui</a></li>
</ul></li>
</ul></li>
<li><p><a href="https://manishearth.github.io/blog/2017/03/05/understanding-git-filter-branch/">Understanding Git Filter-branch and the Git Storage Model</a></p></li>
</ul>
<h3 id="git-hash-collisions"><span class="section_number">3.4</span><span class="section_title">Git hash collisions</span></h3>
<p>Git hash collision may occur albeit extremely unlikely. Git assumes that if two objects have the same hash, then they are the same object. This is false; the converse is true: if two objects are the same, then they have the same hash. When hash collision occur, Git may silently lose data. Git is an example of software that is incorrect but works for the use cases it was designed for (source code versioning). Git is not meant to be used as an arbitrary database.</p>
<p>Other softwares are incorrect as well. We routinely make software that assumes that there will never be more than 2<sup>64</sup> rows in a database table.</p>
<p>Is it even possible to write correct software at all?</p>
<h3 id="related-tools"><span class="section_number">3.5</span><span class="section_title">Related tools</span></h3>
<ul>
<li>git-gui, for making commits</li>
<li>gitk, for showing history</li>
<li>meld, for three-way diff/merge</li>
</ul>
<h3 id="speeding-up-git"><span class="section_number">3.6</span><span class="section_title">Speeding up Git</span></h3>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">3.6.1</span><span class="section_title"><a href="#the-problem">The problem</a></span><span class="word_count">(134w~1m)</span></li>
<li><span class="section_number">3.6.2</span><span class="section_title"><a href="#plans">Plans</a></span><span class="word_count">(41w~1m)</span></li>
<li><span class="section_number">3.6.3</span><span class="section_title"><a href="#non-plans">Non-plans</a></span><span class="word_count">(30w~1m)</span></li>
</ul>
</div>
<h4 id="the-problem"><span class="section_number">3.6.1</span><span class="section_title">The problem</span></h4>
<p>I have a repository with 100,000 files and 1,000,000 objects, but most of them are not mine, and I will never use most of them. I don't even think I have more than 1,000 files in that repository. The problem: Git interactive rebase is too slow in that repository.</p>
<p>&lt;2018-12-05&gt; I solved the problem by extracting my work into its own disjoint subtree, and pushing to a different branch of the same repository.</p>
<p>Hypothesis: How git rebase works.</p>
<p>I guess <code>git rebase --onto TARGET BASE MOVE</code> works like this:</p>
<pre class="example"><code>git checkout --orphan TARGET --
git cherry-pick &lt;all commits from BASE to MOVE, excluding BASE, including MOVE&gt;
git checkout -B MOVE
</code></pre>
<p>Cherry-pick is also slow. I guess that speeding up cherry-pick will also speed up rebase.</p>
<p>Checkout is also slow. I guess that speeding up checkout will also speed up cherry-pick.</p>
<p>It seems that <code>commit</code> and <code>write-tree</code> are slow.</p>
<ul>
<li><a href="https://git-scm.com/book/en/v2/Git-Internals-Environment-Variables">Git - Environment Variables</a>
<ul>
<li><code>GIT_TRACE_PERFORMANCE=true</code> has no effect. Which git version is it for?</li>
</ul></li>
</ul>
<h4 id="plans"><span class="section_number">3.6.2</span><span class="section_title">Plans</span></h4>
<ul>
<li>Plan: Make a rebase that uses only trees and not indexes
<ul>
<li>If a tree changes, all its ancestors have to be rewritten.</li>
</ul></li>
<li>Plan: Just use subtrees and keep the repository small
<ul>
<li>I think this is the least-effort solution that solves (works around) the problem.</li>
</ul></li>
</ul>
<h4 id="non-plans"><span class="section_number">3.6.3</span><span class="section_title">Non-plans</span></h4>
<ul>
<li><a href="https://www.atlassian.com/blog/git/handle-big-repositories-git">atlassian.com: How to manage big Git repositories</a>
<ul>
<li>Try git sparse checkout? It seems that sparse-checkout and rebase doesn't mix.</li>
</ul></li>
<li>Not recommended: <code>git gc --aggressive</code> (doesn't do what we think it would do).</li>
</ul>
<h2 id="making-a-personal-wiki"><span class="section_number">4</span><span class="section_title">Making a personal wiki</span></h2>
<ul>
<li><p>Selection criteria:</p>
<ul>
<li>How many people are using it?</li>
<li>How big can it grow without slowing down?</li>
<li>How good is its markup?</li>
<li><p>How long will it last? How long can it operate without being obsolete? How fast do the software dependencies rot?</p>
<ul>
<li><p>How long does Ubuntu maintain the repository archive of old Ubuntu versions?</p>
<ul>
<li><p><a href="http://old-releases.ubuntu.com/">http://old-releases.ubuntu.com/</a></p>
<ul>
<li>2018-08-06: It seems that Ubuntu maintains the repositories to as far back as 2006.</li>
<li><a href="https://askubuntu.com/questions/91815/how-to-install-software-or-upgrade-from-an-old-unsupported-release">https://askubuntu.com/questions/91815/how-to-install-software-or-upgrade-from-an-old-unsupported-release</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Too many choices.</p>
<ul>
<li><a href="http://wiki.c2.com/?PersonalWiki">http://wiki.c2.com/?PersonalWiki</a></li>
<li><a href="http://wiki.c2.com/?WikiEngines">http://wiki.c2.com/?WikiEngines</a></li>
<li><a href="https://www.quora.com/Whats-the-best-way-to-create-a-personal-wiki">https://www.quora.com/Whats-the-best-way-to-create-a-personal-wiki</a></li>
<li><a href="https://www.wikimatrix.org/">wikimatrix.org: compare wiki softwares</a></li>
<li><p>safety in numbers?</p>
<ul>
<li><p>many users</p>
<ul>
<li>Jekyll</li>
<li><a href="http://moinmo.in/">http://moinmo.in/</a></li>
<li><a href="https://gohugo.io/">https://gohugo.io/</a></li>
</ul></li>
<li><p>few users</p>
<ul>
<li><a href="https://github.com/lotabout/static-wiki">https://github.com/lotabout/static-wiki</a></li>
</ul></li>
<li><p>unknown</p>
<ul>
<li><a href="http://dynalon.github.io/mdwiki/#!index.md">http://dynalon.github.io/mdwiki/#!index.md</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Avoid accidental publishing.</p>
<ul>
<li>Don't put anything you don't want to publish inside your Jekyll directory, no matter how convenient. Accidents happen. Humans make mistakes. Computer doesn't care.</li>
</ul></li>
<li><a href="https://www.labnol.org/internet/load-disqus-comments-on-click/28653/">How to Load Disqus Comments on Demand with JavaScript</a></li>
</ul>
<h2 id="ansible"><span class="section_number">5</span><span class="section_title">Ansible</span></h2>
<p>An <a href="http://docs.ansible.com/ansible/intro_inventory.html">inventory</a> is a map from host alias to host address. We use those aliases to select the machines to mutate.</p>
<p>Ansible has two executables: <code>ansible</code> and <code>ansible-playbook</code>.</p>
<p>The <code>ansible-playbook</code> takes a YAML configuration.</p>
<p>The <code>ansible</code> executable executes one command.</p>
<p>The <code>ansible</code> command is like a &quot;single-task playbook&quot;.</p>
<p>See also <code>man ansible</code> (&quot;run a task on target hosts&quot;) and <code>man ansible-playbook</code>.</p>
<p>A machine can have many roles.</p>
<p>An Ansible role should be a noun phrase (<code>web-server</code>), not a verb phrase (<code>install-web-server</code>).</p>
<h2 id="amazon-web-services"><span class="section_number">6</span><span class="section_title">Amazon Web Services</span></h2>
<ul>
<li><p>How do we detect if we're running on AWS?</p>
<ul>
<li><a href="https://forums.aws.amazon.com/message.jspa?messageID=122425">Question on AWS forum</a></li>
<li><p>Some choices:</p>
<ul>
<li>on instance launch time: set an environment variable in the AMI used to launch instances. This seems to be the most reliable way.</li>
<li><p>on application runtime:</p>
<ul>
<li>HTTP server at 169.254.169.254</li>
<li>Reverse DNS lookup</li>
<li><code>/proc/xen</code> (if your development machine doesn't use xen)</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>How do we get EC2 instance metadata?</p>
<ul>
<li><a href="http://stackoverflow.com/questions/625644/find-out-the-instance-id-from-within-an-ec2-machine">http://stackoverflow.com/questions/625644/find-out-the-instance-id-from-within-an-ec2-machine</a></li>
<li><a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html">http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html</a></li>
</ul></li>
<li>Amazon RDS is not for scaling. It is designed to simplify operation of relational databases. <a href="https://www.quora.com/Does-Amazon-RDS-solve-the-MySQL-scaling-issue">It is not designed to scale relational databases horizontally</a>.</li>
<li>The write capacity does not raise in proportion to the number of machines.</li>
<li><p>Deployment with Amazon Machine Images</p>
<ul>
<li>We assume that the code scales horizontally.</li>
<li>Install everything you need to that instance.</li>
<li>Snapshot an AMI from an instance.</li>
</ul></li>
<li><p>EC2 security notes:</p>
<ul>
<li>Because all instances are launched from the same image, they have the same SSH host keys. Compromising any of them will also compromise all other instances sharing the key.</li>
<li>See also <a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/building-shared-amis.html">Amazon's notes on building shared AMIs</a>.</li>
</ul></li>
<li><p>How do I install AWS CLI on Ubuntu 14.04?</p>
<ul>
<li><code>sudo apt-get install awscli</code></li>
</ul></li>
<li><p>RDS</p>
<ul>
<li>In Amazon RDS PostgreSQL, slow queries are not logged by default. See <a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_LogAccess.Concepts.PostgreSQL.html">RDS user guide</a>.</li>
<li><a href="http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-rds-db.html">Using Route 53 for aliasing your RDS instances</a></li>
<li><a href="http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_BestPractices.html">RDS best practices</a></li>
</ul></li>
<li><p>Shit did happen.</p>
<ul>
<li><p>A busy RDS instance got CPU-throttled (ran out of CPU credits).</p>
<ul>
<li><em>CPU credit doesn't have to reach zero</em> in order for the instance to be throttled. Don't use CloudWatch alarm condition <code>CpuCredit = 0</code>.</li>
</ul></li>
<li><p>A busy RDS instance got IOPS-throttled (ran out of IOPS credits).</p>
<ul>
<li>2018 CloudWatch doesn't have IOPS credit metric. Can't make alarm.</li>
</ul></li>
</ul></li>
<li><a href="https://aws.amazon.com/blogs/aws/aws-device-farm-update-remote-access-to-devices-for-interactive-testing/">AWS Device Farm</a>: interactive testing on real devices.</li>
</ul>
<h2 id="moving-to-clouds-for-old-school-sysadmins"><span class="section_number">7</span><span class="section_title">Moving to clouds, for old-school sysadmins</span></h2>
<p>The most important pages on the <a href="https://aws.amazon.com/">AWS website</a> are the pricing pages and the technical documentation. That website has much content, but not much information, perhaps because they are not selling to sysadmins.</p>
<table>
<thead>
<tr class="header">
<th>Amazonese</th>
<th>Old-school</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Route 53</td>
<td>managed DNS server</td>
</tr>
<tr class="even">
<td>VPC (virtual private cluster)</td>
<td>managed LAN (local area network)</td>
</tr>
<tr class="odd">
<td>EC2 (elastic compute cloud) instance</td>
<td>managed virtual machine</td>
</tr>
<tr class="even">
<td>security group</td>
<td>managed iptables/firewall</td>
</tr>
<tr class="odd">
<td>RDS (relational database service)</td>
<td>managed SQL server</td>
</tr>
<tr class="even">
<td>EBS (elastic block store)</td>
<td>managed NAS (network-attached storage)</td>
</tr>
<tr class="odd">
<td>ELB (elastic load balancer)</td>
<td>managed HAProxy</td>
</tr>
<tr class="even">
<td>ElastiCache</td>
<td>managed Memcached/Redis</td>
</tr>
<tr class="odd">
<td>Lambda</td>
<td>automatically turn on machines to run a piece of code, and turn off idle machines</td>
</tr>
</tbody>
</table>
<p>AWS, GCE, and Azure do the same thing you used to do. The difference is they do it on a much larger scale, and they make an API on top of it, so you can <em>automate</em> it, but this also mean that <em>you</em> can be automated away, so beware!</p>
<p>With this cloud stuff, you can't buy a machine and bring it to the data center. You start a machine from your computer. The machine is now virtual; it doesn't correspond to a motherboard anymore. Procuring a machine is just a few clicks on the website, or a few keystrokes on the terminal, and your machine will be running in a few minutes. What you used to do in days, now you can do in minutes.</p>
<p>With this cloud stuff, you can't visit the data center to restart a stuck machine. You restart it from your computer.</p>
<p>You're billed per hour. What was infrastructure (like roads) is now utility (like electricity).</p>
<p>The cloud is cheaper for bursty load with low average load. If your average load is high, old-school is cheaper.</p>
<p>One thing doesn't change: you still need to back up data to a safe place <em>outside</em> the cloud. (I'm a hypocrite; I say that but I don't do that.)</p>
<h2 id="deploying-web-applications"><span class="section_number">8</span><span class="section_title">Deploying web applications</span></h2>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">8.1</span><span class="section_title"><a href="#formalizing-deployment-requirements">Formalizing deployment requirements</a></span><span class="word_count">(363w~2m)</span></li>
<li><span class="section_number">8.2</span><span class="section_title"><a href="#design">Design</a></span><span class="word_count">(240w~2m)</span></li>
<li><span class="section_number">8.3</span><span class="section_title"><a href="#continuous-something">Continuous something</a></span><span class="word_count">(14w~1m)</span></li>
<li><span class="section_number">8.4</span><span class="section_title"><a href="#fabric-vs-ansible">Fabric vs Ansible</a></span><span class="word_count">(18w~1m)</span></li>
<li><span class="section_number">8.5</span><span class="section_title"><a href="#what-is-devops">What is DevOps?</a></span><span class="word_count">(138w~1m)</span></li>
<li><span class="section_number">8.6</span><span class="section_title"><a href="#haskell-for-devops">Haskell for devops?</a></span><span class="word_count">(13w~1m)</span></li>
<li><span class="section_number">8.7</span><span class="section_title"><a href="#migrating-running-processes">Migrating running processes</a></span><span class="word_count">(4w~1m)</span></li>
<li><span class="section_number">8.8</span><span class="section_title"><a href="#troubleshooting-dashboard-what-metrics-you-should-monitor-and-why">Troubleshooting Dashboard: What metrics you should monitor and why?</a></span><span class="word_count">(79w~1m)</span></li>
</ul>
</div>
<h3 id="formalizing-deployment-requirements"><span class="section_number">8.1</span><span class="section_title">Formalizing deployment requirements</span></h3>
<p>What is the way to deploy web applications?</p>
<ul>
<li><p>General information</p>
<ul>
<li>I have a Java web application.</li>
<li>It compiles by <code>mvn package</code>.</li>
<li>Its main class is <code>blah</code>.</li>
</ul></li>
<li><p>Network</p>
<ul>
<li>It listens on port 1234.</li>
<li>Its URL should be <code>https://blah/</code>.</li>
<li>It is HTTPS only. HTTP port shouldn't be open at all.</li>
</ul></li>
<li><p>Resource requirements and burst characteristics</p>
<ul>
<li>It needs 4 GB of RAM for acceptable garbage collection overhead.</li>
<li>It is mostly idle, but when it bursts, it requires 4 cores.</li>
<li>Ops is free to horizontally scale the stateless application server.</li>
</ul></li>
</ul>
<p>Assuming that I'm on either Amazon Web Services or Google Cloud Platform, how do I formalize my ops requirements in a cloud-agnostic way? The 2016 article &quot;On Formalizing and Identifying Patterns in Cloud Workload Specifications&quot; <a href="https://ieeexplore.ieee.org/document/7516840/">paywall</a> suggests an answer:</p>
<ul>
<li>&quot;Approaches include orchestration specifications CAMP [1], [2], Open-CSA, SOA-ML and USDL, and on the industrial side solutions such as Amazon CloudFormation, OpenStack Heat, Cloudify and Alien4Cloud. To consolidate and enable interoperability within this variety of approaches, a technical committee by OASIS [3] defined a standard for the Topology and Orchestration Specification of Cloud Applications (TOSCA) [4], [5], which defines guidelines and facilities for the complete specification, orchestration and configuration of complex workloads, addressing portability in heterogeneous clouds.&quot;</li>
</ul>
<p>I assume that it suggests TOSCA.</p>
<p>Problem: The average person won't read a specification.</p>
<p>Who uses TOSCA? Who implements that? Why do I never see it on AWS or GCP? Why would they follow your standard if they are the de facto standard?</p>
<p>Do we need more than one cloud providers?</p>
<p>Tools?</p>
<ul>
<li>kubernetes</li>
<li>keter, pm2</li>
<li><a href="https://developers.redhat.com/blog/2018/06/28/why-kubernetes-is-the-new-application-server/">Why Kubernetes is The New Application Server - RHD Blog</a></li>
</ul>
<p>Why I don't use NixOS:</p>
<ul>
<li>NixOS is insane. Patching every software on Earth is not sustainable. NixOS is only sustainable if the upstream developers use NixOS.</li>
<li>2018-08-31: Ubuntu has <a href="http://old-releases.ubuntu.com/">old-releases.ubuntu.com</a>. It archives things back to 2006. Ubuntu has money to host 12 years of archive. NixOS doesn't have that much money. NixOS can only afford to host 1-2 years of archive.</li>
<li>NixOS (or anything else indeed) would be heaven if library writers valued backward compatibility. I want my library writers to worship backward compatibility like sysadmins worship uptime. I want them to never break things that depend on them. But my experience invalidates this hope. I've seen too many breakages.</li>
</ul>
<p>Who uses this?</p>
<ul>
<li>2013 &quot;Towards a Formal Model for Cloud Computing&quot; <a href="https://link.springer.com/chapter/10.1007/978-3-319-06859-6_34">paywall</a></li>
</ul>
<h3 id="design"><span class="section_number">8.2</span><span class="section_title">Design</span></h3>
<ul>
<li>2018-08-30</li>
<li><a href="https://blog.chef.io/2015/04/23/ontology-infrastructure-classification-and-the-design-of-chef/">Ontology, Infrastructure Classification, and the Design of Chef - Chef Blog</a></li>
</ul>
<p>I agree that 2018 devops ontologies suck, but I think we shouldn't avoid ontology-based systems. The solution is not to avoid ontologies. The solution is to craft a proper ontology that is timeless and essential. This is a hard philosophical problem.</p>
<p>For example, the relationship between &quot;application&quot; and &quot;entry point&quot; is timeless. &quot;Entry point&quot; is an essential property of &quot;application&quot;. By definition, every application has an entry point.</p>
<p>Every software has an implicit ontology, like it or not.</p>
<p>Every ontology systems that captures accident instead of essence is bound to fail. Every computer ontology system that avoids philosophical ontology (What is X? What is the timeless essence of X?) is bound to fail.</p>
<p>Are these related?</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Existence_precedes_essence">WP:Existence precedes essence</a></li>
<li><a href="https://en.wikipedia.org/wiki/Essence">WP:Essence</a> (probably unrelated to above)</li>
<li>2011 article &quot;On doing ontology without metaphysics&quot; <a href="https://www.jstor.org/stable/41329478?seq=1#page_scan_tab_contents">paywall</a></li>
<li>2012 article &quot;Philosophies without ontology&quot; <a href="https://www.journals.uchicago.edu/doi/pdfplus/10.14318/hau3.1.015">pdf</a></li>
<li><p><a href="https://webhome.phy.duke.edu/~rgb/Beowulf/axioms/axioms/node4.html">Philosophy is Bullshit: David Hume</a></p>
<ul>
<li>What are pseudoquestions?</li>
</ul></li>
</ul>
<p>How do we answer &quot;What is X?&quot;?</p>
<p>There is an easy answer for mathematics. Mathematics is unique in that its ontology is mostly a priori / by fiat: we say it exists; therefore it exists. However, would it still be the case if we didn't have languages to express it?</p>
<p>For the real world it's hard.</p>
<p>Sometimes when we ask &quot;What is X?&quot;, we are really asking &quot;What is X for?&quot; instead.</p>
<p>How do answer &quot;What is X?&quot; such that the correctness/truth/relevance of the answer does not depend on time/circumstances? We don't know how to predict the far future.</p>
<h3 id="continuous-something"><span class="section_number">8.3</span><span class="section_title">Continuous something</span></h3>
<ul>
<li><p>Continuous integration</p>
<ul>
<li><a href="https://jenkins.io/">Jenkins</a></li>
</ul></li>
<li><p>Continuous delivery</p>
<ul>
<li><a href="https://www.spinnaker.io/">Spinnaker</a></li>
</ul></li>
<li><p>The ideal workflow: Git push triggers deployment?</p></li>
</ul>
<p>These pages may be outdated:</p>
<ul>
<li><a href="%7B%%20link%20ansible.md%20%%7D">Ansible</a></li>
<li><a href="%7B%%20link%20logging.md%20%%7D">Logging</a></li>
</ul>
<h3 id="fabric-vs-ansible"><span class="section_number">8.4</span><span class="section_title">Fabric vs Ansible</span></h3>
<p>From the user's point of view, Fabric is a python library, whereas Ansible is YAML-driven framework.</p>
<h3 id="what-is-devops"><span class="section_number">8.5</span><span class="section_title">What is DevOps?</span></h3>
<p>XML is not suitable for declarative DevOps. See comments in <a href="https://github.com/edom/work/blob/master/devops/example.xml">devops/example.xml</a>. We want the declaration site of some bindings to be as close as possible to their use sites.</p>
<p>I'm thinking about using <a href="https://github.com/dhall-lang/dhall-lang">Dhall</a>.</p>
<p>Separating Dev and Ops doesn't make sense.</p>
<p>Ops can't fix shitty Dev. No amount of Ops will fix stupid programming. Ops is impossible without decent Dev.</p>
<p>What is Google search result for &quot;devops tools&quot;?</p>
<ul>
<li><p>API description language, application description language: WADL vs Swagger vs what else?</p>
<ul>
<li><a href="https://www.w3.org/Submission/wadl/">https://www.w3.org/Submission/wadl/</a></li>
<li>2010 article &quot;DADL: Distributed Application Description Language&quot; <a href="https://www.isi.edu/~mirkovic/publications/dadlsubmit.pdf">pdf</a></li>
</ul></li>
<li><p>ontology?</p>
<ul>
<li><a href="https://devops.stackexchange.com/questions/1361/what-are-known-efforts-to-establish-devops-ontology-model">https://devops.stackexchange.com/questions/1361/what-are-known-efforts-to-establish-devops-ontology-model</a></li>
<li>2016 article &quot;Application of Ontologies in Cloud Computing: The State-Of-The-Art&quot; <a href="https://arxiv.org/abs/1610.02333">pdf available</a></li>
<li>2015 article &quot;Composable DevOps&quot; <a href="https://dl.acm.org/citation.cfm?id=2867125">paywall</a></li>
<li>2012 article &quot;Towards an Ontology for Cloud Services&quot; <a href="https://ieeexplore.ieee.org/document/6245776/">paywall</a></li>
<li>2012 article &quot;Cloud Computing Ontologies: A Systematic Review&quot; <a href="https://pdfs.semanticscholar.org/cd5f/e6edb6284fcbcb470239464bb0c8e3ee2d50.pdf">pdf</a></li>
<li>2008 article &quot;Toward a Unified Ontology of Cloud Computing&quot; <a href="https://www.researchgate.net/publication/224367196_Toward_a_Unified_Ontology_of_Cloud_Computing">pdf available</a></li>
<li><a href="https://www.skytap.com/blog/cloud-ontology/">https://www.skytap.com/blog/cloud-ontology/</a></li>
<li>OASIS TOSCA; too ad-hoc?</li>
</ul></li>
<li><p>what</p>
<ul>
<li>2015 article &quot;Composable DevOps: Automated Ontology Based DevOps Maturity Analysis&quot; <a href="https://ieeexplore.ieee.org/document/7207405/">paywall</a></li>
</ul></li>
</ul>
<h3 id="haskell-for-devops"><span class="section_number">8.6</span><span class="section_title">Haskell for devops?</span></h3>
<ul>
<li><a href="https://www.reddit.com/r/haskell/comments/31vnos/neil_mitchell_devops_with_haskell/">https://www.reddit.com/r/haskell/comments/31vnos/neil_mitchell_devops_with_haskell/</a></li>
<li><a href="https://github.com/commercialhaskell/commercialhaskell/blob/master/taskforce/devops.md">https://github.com/commercialhaskell/commercialhaskell/blob/master/taskforce/devops.md</a></li>
<li><a href="http://hackage.haskell.org/package/azubi">azubi: A simple DevOps tool which will never &quot;reach&quot; enterprice level.</a></li>
</ul>
<h3 id="migrating-running-processes"><span class="section_number">8.7</span><span class="section_title">Migrating running processes</span></h3>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Process_migration">WP:Process migration</a></li>
</ul>
<h3 id="troubleshooting-dashboard-what-metrics-you-should-monitor-and-why"><span class="section_number">8.8</span><span class="section_title">Troubleshooting Dashboard: What metrics you should monitor and why?</span></h3>
<ul>
<li><p>We want to minimize what we need to see. we want the metric that predicts the most problems.</p>
<ul>
<li>Rising maximum latency is a sign that something is overloaded.</li>
<li>Rising resource usage (CPU, memory, disk, disk queue depth) predicts rising latency.</li>
</ul></li>
<li><p>We want the metric to help us locate problems.</p></li>
</ul>
<p>When such metric deviates from baseline, we know there is problem, but where?</p>
<p>What other metrics should we monitor?</p>
<ul>
<li>HTTP 4xx and 5xx status codes and connection failures?</li>
</ul>
<h2 id="using-java"><span class="section_number">9</span><span class="section_title">Using Java</span></h2>
<p>&lt;2019-01-30&gt; Here are some Java stuff. I used Java back in the days when I lacked self-respect. I recommend Prolog instead of Java.</p>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">9.1</span><span class="section_title"><a href="#profiling">Profiling?</a></span><span class="word_count">(413w~3m)</span></li>
<li><span class="section_number">9.2</span><span class="section_title"><a href="#using-maven">Using Maven</a></span><span class="word_count">(59w~1m)</span></li>
<li><span class="section_number">9.3</span><span class="section_title"><a href="#using-gradle">Using Gradle</a></span><span class="word_count">(311w~2m)</span></li>
<li><span class="section_number">9.4</span><span class="section_title"><a href="#make-open-travel-alliance-xml-schema-work-with-jaxb">&lt;2017-02-10&gt; Make Open Travel Alliance XML schema work with JAXB</a></span><span class="word_count">(18w~1m)</span></li>
<li><span class="section_number">9.5</span><span class="section_title"><a href="#production-command-line">Production command-line</a></span><span class="word_count">(48w~1m)</span></li>
</ul>
</div>
<h3 id="profiling"><span class="section_number">9.1</span><span class="section_title">Profiling?</span></h3>
<ul>
<li><p>How to profile a Java application startup?</p>
<ul>
<li>How to make a Java application wait for a debugger to attach on startup?</li>
</ul></li>
<li><p>Speeding up Java startup</p>
<ul>
<li><p>Hypothesis: IntelliJ IDEA startup is slow because it decompresses JAR. Java startup would be faster if the JARs were decompressed (created using <code>jar c0</code>).</p>
<ul>
<li>How do we test this? Profile IntelliJ IDEA startup.</li>
</ul></li>
<li><p>Hypothesis: The IDE would be faster if it's compiled ahead-of-time.</p>
<ul>
<li>Can we cache the just-in-time compilation result?</li>
</ul></li>
<li><p>Does supercompiling the IDE affect speed?</p></li>
</ul></li>
<li><p>We can use the JVM without the Java language.</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/List_of_JVM_languages">https://en.wikipedia.org/wiki/List_of_JVM_languages</a></li>
</ul></li>
<li><p>Profiling</p>
<ul>
<li>Install NetBeans.</li>
<li>Choose 'Profile' in the menu, and then 'Attach to External Process'.</li>
<li>Click the down-pointing triangle on the right of the Attach button.</li>
<li>Choose 'Setup Attach to Processâ€¦'.</li>
<li>Select 'Manually started remote Java process'.</li>
<li>Choose the remote operating system.</li>
<li><p>Follow further instructions in NetBeans.</p>
<ul>
<li>If you need <code>JAVA_HOME</code> on Oracle JRE 8 on Ubuntu 14.04, use <code>/usr/lib/jvm/java-8-oracle/jre</code>.</li>
</ul></li>
</ul></li>
<li>How do I start the JVM with a profiling agent?</li>
<li><p>Let the compiler help you.</p>
<ul>
<li><p>If you make your the fields of your Java class final, you will never forget to set it.</p>
<ul>
<li>You don't need to remember anything.</li>
<li>It just won't compile.</li>
</ul></li>
<li><p>You can have dependency injection without dependency injection container/framework.</p>
<ul>
<li><a href="https://sites.google.com/site/unclebobconsultingllc/blogs-by-robert-martin/dependency-injection-inversion">https://sites.google.com/site/unclebobconsultingllc/blogs-by-robert-martin/dependency-injection-inversion</a></li>
<li>If you have so many classes that instantiating them hurts, don't create so many classes in the first place.</li>
<li>Neutral article <a href="http://fabien.potencier.org/do-you-need-a-dependency-injection-container.html">http://fabien.potencier.org/do-you-need-a-dependency-injection-container.html</a></li>
<li>Very opinionated article, borderline fanatical <a href="http://www.yegor256.com/2014/10/03/di-containers-are-evil.html">http://www.yegor256.com/2014/10/03/di-containers-are-evil.html</a></li>
<li><p><a href="http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/">http://blog.ploeh.dk/2010/02/03/ServiceLocatorisanAnti-Pattern/</a></p>
<ul>
<li>&quot;In short, the problem with Service Locator is that it hides a class' dependencies, causing run-time errors instead of compile-time errors [â€¦]&quot;</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Package by feature, not by layer: <a href="http://www.javapractices.com/topic/TopicAction.do?Id=205">http://www.javapractices.com/topic/TopicAction.do?Id=205</a></p>
<ul>
<li>Dont separate model, data, entity, accessor, and service packages; package by feature not layer</li>
</ul></li>
<li>IntelliJ IDEA can open a Maven project whose POM XML file name is not pom.xml.</li>
<li><p>JVM memory usage problem</p>
<ul>
<li><p>Tuning JVM memory usage</p>
<ul>
<li><a href="https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/tune_footprint.html">https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/tune_footprint.html</a></li>
<li><a href="https://www.javacodegeeks.com/2017/11/minimize-java-memory-usage-right-garbage-collector.html">https://www.javacodegeeks.com/2017/11/minimize-java-memory-usage-right-garbage-collector.html</a></li>
</ul></li>
<li>&quot;Make JVM respect CPU and RAM limits&quot; <a href="https://hub.docker.com/_/openjdk/">https://hub.docker.com/_/openjdk/</a></li>
<li><p><a href="https://blogs.oracle.com/java-platform-group/java-se-support-for-docker-cpu-and-memory-limits">https://blogs.oracle.com/java-platform-group/java-se-support-for-docker-cpu-and-memory-limits</a></p></li>
</ul></li>
<li><p>2017-02-21</p>
<ul>
<li><a href="https://github.com/javaparser/javaparser">https://github.com/javaparser/javaparser</a></li>
<li><a href="https://github.com/javaparser/javasymbolsolver">https://github.com/javaparser/javasymbolsolver</a></li>
</ul></li>
<li><a href="https://github.com/java-deobfuscator/deobfuscator">https://github.com/java-deobfuscator/deobfuscator</a></li>
<li><p>2017-05-20</p>
<ul>
<li><p>Generating Java code</p>
<ul>
<li><p>Alternatives</p>
<ul>
<li>Use Python to generate Java code? Python comes installed with Ubuntu.</li>
<li>Use Java CodeModel to generate Java code. <a href="https://github.com/javaee/jaxb-codemodel">https://github.com/javaee/jaxb-codemodel</a></li>
<li>Use the Haskell package <code>language-java</code> to generate Java code.</li>
<li>Read table metadata from DataSource, generate Java source file for Entity and DAO.</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>2017-05-18</p>
<ul>
<li>Java is procedural.</li>
<li><code>object.method(argument)</code> is a syntactic sugar for <code>method(object, argument)</code>.</li>
<li>Where should the method <code>m</code> be defined? It can be defined in both <code>a</code> and <code>b</code>. <code>a.m(b)</code> or <code>b.m(a)</code> or <code>C.m(a,b)</code>? If you have to ask this, your design is wrong.</li>
<li><p>Antipattern: two classes A and B with conversion from A to B and B to A?</p>
<ul>
<li>Solution: Delete one of them?</li>
</ul></li>
</ul></li>
<li><a href="http://blog.sokolenko.me/2014/11/javavm-options-production.html">http://blog.sokolenko.me/2014/11/javavm-options-production.html</a></li>
<li><p><a href="http://maintainj.com/index.html">MaintainJ: &quot;We simplify the complexity of maintaining Java code&quot;</a></p>
<ul>
<li>Watch the demo.</li>
<li><p>What does it do, as seen by programmers, in non-marketing tech-speak?</p>
<ul>
<li>Start/stop dumping call trace of a running JVM into a file.</li>
<li>Open the dump as a sequence diagram in Eclipse.</li>
<li>Some filtering.</li>
</ul></li>
</ul></li>
<li><a href="https://www.jethrocarr.com/2013/11/30/jconsole-to-remote-servers-easily/">Jconsole to remote servers, easily | Jethro Carr</a></li>
</ul>
<h3 id="using-maven"><span class="section_number">9.2</span><span class="section_title">Using Maven</span></h3>
<p>The strength of Maven is its ecosystem. Network effect.</p>
<p>Maven is rigid. All projects build in the same way. If you want Maven to do something, but you can't find an example on the Internet, you should assume that it can't be done.</p>
<p>To compile your project, run <code>mvn compile</code>.</p>
<p>To package your project, run <code>mvn package</code>.</p>
<p>Maven output directory is <code>target</code>.</p>
<h3 id="using-gradle"><span class="section_number">9.3</span><span class="section_title">Using Gradle</span></h3>
<ul>
<li><p>Conclusion:</p>
<ul>
<li>I still haven't found any reason to switch from Maven to Gradle (other than &quot;because this project is already using it&quot;).</li>
</ul></li>
<li><p>Which version of Gradle are we talking about?</p>
<ul>
<li>Gradle 2.9.</li>
</ul></li>
<li><p>What problems does Gradle solve?</p>
<ul>
<li>Dependency management (picking the libraries' versions and downloading the corresponding JAR files) for Java.</li>
</ul></li>
<li><p>Do we have those problems?</p>
<ul>
<li>Yes. Software has external dependencies.</li>
</ul></li>
<li><p>Does Gradle 2.9 solve those problems well?</p>
<ul>
<li><p>No.Â Gradle 2.9's dependency resolution algorithm doesn't compute the intersection of version ranges. (Maybe now it does.)</p>
<ul>
<li>Why does it have this defect? Maybe Gradle developers had different priorities, or they didn't know how to do it.</li>
<li><a href="https://danysk.github.io/information%20technology/gradle-dependency-resolution-is-insane/">Danilo Pianini: Version ranges resolution in Gradle is insane</a></li>
</ul></li>
<li><p>However, there are times we want exact versions instead of version ranges. You want deterministic builds. In this case, there's no need to compute intersections.</p>
<ul>
<li><a href="http://blog.danlew.net/2015/09/09/dont-use-dynamic-versions-for-your-dependencies/">Dan Lew: Don't use dynamic versions for your dependencies</a></li>
</ul></li>
<li><p>On the other hand, we want to benefit from library updates. Maybe there are security fixes. So we want version ranges?</p>
<ul>
<li>But this assumes that the library maintainer obeys Semantic Versioning.</li>
</ul></li>
</ul></li>
<li><p>Why are we using Gradle instead of Maven? What Maven annoyances does Gradle hide from us?</p>
<ul>
<li>Gradle build scripts are shorter (but IDEA autocompletes Maven pom.xml).</li>
</ul></li>
<li><p>Why <em>not</em> Gradle?</p>
<ul>
<li><p>Why Maven instead of Gradle?</p>
<ul>
<li><p>IDEA integrates better with Maven because pom.xml is configuration, not program. (But IDEA can also open build.gradle?)</p>
<ul>
<li>Opening a pom.xml just works in IDEA.</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>How does Gradle 2.9 annoy us?</p>
<ul>
<li>We often have to explicitly tell Gradle 2.9 the exact versions of the libraries we want because it doesn't compute intersections properly. Maven computes intersections.</li>
<li>Gradle doesn't download dependencies in parallel. (But neither does Maven.)</li>
<li>Gradle 2.9 doesn't generate a useful Maven POM, only a minimally valid POM.</li>
</ul></li>
<li><p>When should I split a Gradle subproject or a Maven module?</p>
<ul>
<li>When we need to reuse one subproject without the others.</li>
<li>If they don't make sense separately, don't split them; it'll just slow down the build for nothing.</li>
<li>The same goes for Maven modules.</li>
</ul></li>
<li><p>Woes</p>
<ul>
<li>ShadowJar doesn't work with Gradle 2.13.</li>
</ul></li>
</ul>
<h3 id="make-open-travel-alliance-xml-schema-work-with-jaxb"><span class="section_number">9.4</span><span class="section_title">&lt;2017-02-10&gt; Make Open Travel Alliance XML schema work with JAXB</span></h3>
<p>Save this to a file named like <code>BINDFILE</code>:</p>
<pre class="example"><code>&lt;bindings xmlns=&quot;http://java.sun.com/xml/ns/jaxb&quot;
          xmlns:xsi=&quot;http://www.w3.org/2000/10/XMLSchema-instance&quot;
          xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;
          version=&quot;2.1&quot;&gt;
    &lt;bindings schemaLocation=&quot;xsd/OTA_CommonTypes.xsd&quot;&gt;
        &lt;bindings node=&quot;//xs:attribute[@name=&#39;Value&#39;]&quot; multiple=&quot;true&quot;&gt;
            &lt;property name=&quot;ValueAttribute&quot;/&gt;
        &lt;/bindings&gt;
    &lt;/bindings&gt;
&lt;/bindings&gt;
</code></pre>
<p>Then run:</p>
<pre class="example"><code>xjc -b BINDFILE -d outputDir xsd/XSDFILE
</code></pre>
<h3 id="production-command-line"><span class="section_number">9.5</span><span class="section_title">Production command-line</span></h3>
<p>&lt;2018-08-29&gt; For Java enterprise/server programming, I recommend Maven instead of Gradle.</p>
<p>This is a command line for production. Replace variables accordingly.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb17-1" title="1"><span class="ex">java</span> \</a>
<a class="sourceLine" id="cb17-2" title="2">    -Xms<span class="va">$heap_size</span> \</a>
<a class="sourceLine" id="cb17-3" title="3">    -Xmx<span class="va">$heap_size</span> \</a>
<a class="sourceLine" id="cb17-4" title="4">    -Xloggc:<span class="st">&quot;</span><span class="va">$gc_log_file</span><span class="st">&quot;</span> \</a>
<a class="sourceLine" id="cb17-5" title="5">    -XX:+PrintGCDetails \</a>
<a class="sourceLine" id="cb17-6" title="6">    -classpath <span class="st">&#39;target/*:target/dependency/*&#39;</span> \</a>
<a class="sourceLine" id="cb17-7" title="7">    <span class="st">&quot;</span><span class="va">$java_main_class</span><span class="st">&quot;</span> \</a>
<a class="sourceLine" id="cb17-8" title="8">    <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></a></code></pre></div>
<p>The GC log is important. When your application is unexplainably slow, first look at the GC log: does GC take too much time? Look at the &quot;real&quot; time.</p>
<h2 id="using-python"><span class="section_number">10</span><span class="section_title">Using Python</span></h2>
<p>Python virtualenv is relatively forward-compatible. Don't waste time installing Python from source. Use the Python packaged with your distro, and use virtualenv. The Pip that comes with Python 3.7.0 fails because Ubuntu 14.04 OpenSSL is too old (or Python doesn't bother to maintain backward compatibility).</p>
<pre class="example"><code>sudo apt-get install python-virtualenv
</code></pre>
<p>Create a virtualenv directory using <code>virtualenv PATH</code> Note: After the directory is created, it can't be renamed.</p>
<p><a href="https://leemendelowitz.github.io/blog/how-does-python-find-packages.html">How does python find packages?</a></p>
<h2 id="software"><span class="section_number">11</span><span class="section_title">Software</span></h2>
<ul>
<li><p>Web development</p>
<ul>
<li><a href="https://webpack.js.org/guides/typescript/">Set up Webpack to transpile and bundle TypeScript sources</a></li>
<li><p>HTML DOM, web, browser, JavaScript</p>
<ul>
<li><a href="https://gist.github.com/paulirish/5d52fb081b3570c81e3a">What forces layout / reflow</a></li>
</ul></li>
</ul></li>
<li><p>Software for scientists</p>
<ul>
<li><a href="https://gist.github.com/stared/9130888">stared github gist</a></li>
<li><a href="https://www.quora.com/What-wiki-blog-software-do-PhD-students-use-to-maintain-personal-notes-of-their-daily-reading-research">https://www.quora.com/What-wiki-blog-software-do-PhD-students-use-to-maintain-personal-notes-of-their-daily-reading-research</a></li>
</ul></li>
<li><p>Legality of software</p>
<ul>
<li><p>Why doesn't Facebook just keep using Apache Software License version 2.0 for React? Why does it roll out its own patent license?</p>
<ul>
<li>Update: Facebook has switched back to Apache-2.0.</li>
</ul></li>
</ul></li>
<li><a href="%7B%%20link%20autotools.md%20%%7D">Autotools</a></li>
<li><p>Functional programming</p>
<ul>
<li><p>Haskell</p>
<ul>
<li><a href="https://github.com/sellout/recursion-scheme-talk/blob/master/recursion-scheme-talk.org">https://github.com/sellout/recursion-scheme-talk/blob/master/recursion-scheme-talk.org</a></li>
<li><a href="https://github.com/krispo/awesome-haskell">https://github.com/krispo/awesome-haskell</a></li>
<li><p>Cabal is the key to Haskell usability and adoption?</p>
<ul>
<li><a href="https://www.haskell.org/cabal/">https://www.haskell.org/cabal/</a></li>
<li><p>Haskell lacks something like ruby gem, python pypi, or nodejs npm.</p>
<ul>
<li><a href="https://stackoverflow.com/questions/5138881/how-are-ghc-pkg-and-cabal-programs-related-haskell">https://stackoverflow.com/questions/5138881/how-are-ghc-pkg-and-cabal-programs-related-haskell</a></li>
<li><a href="https://stackoverflow.com/questions/2706667/what-is-the-relationship-between-ghc-pkg-and-cabal">https://stackoverflow.com/questions/2706667/what-is-the-relationship-between-ghc-pkg-and-cabal</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Pure-lang</p>
<ul>
<li><a href="https://puredocs.bitbucket.io/pure.html#lazy-evaluation-and-streams">https://puredocs.bitbucket.io/pure.html#lazy-evaluation-and-streams</a></li>
<li><a href="https://bitbucket.org/purelang/pure-lang/wiki/Rewriting">https://bitbucket.org/purelang/pure-lang/wiki/Rewriting</a></li>
<li><a href="https://agraef.github.io/pure-docs/#language-and-standard-library">https://agraef.github.io/pure-docs/#language-and-standard-library</a></li>
<li><a href="https://agraef.github.io/pure-docs/pure.html#pure-overview">https://agraef.github.io/pure-docs/pure.html#pure-overview</a></li>
<li><a href="https://wiki.haskell.org/Applications_and_libraries/Music_and_sound">https://wiki.haskell.org/Applications_and_libraries/Music_and_sound</a></li>
</ul></li>
</ul></li>
<li><p>Ungrouped</p>
<ul>
<li><p><a href="https://github.com/plasma-umass/doppio">doppio</a>, a JVM written in TypeScript, with a POSIX-compatible runtime system</p>
<ul>
<li>from <a href="https://www.reddit.com/r/programming/comments/3xkn75/nashorn_javascript_on_the_jvm_ftw/">https://www.reddit.com/r/programming/comments/3xkn75/nashorn_javascript_on_the_jvm_ftw/</a></li>
</ul></li>
</ul></li>
<li><p>My abandoned software</p>
<ul>
<li>These are not usable.</li>
<li><a href="https://github.com/edom/pragmatic">Pragmatic Haskell library</a> tries to standardize the ways of doing things.</li>
<li><a href="https://github.com/edom/try-phabricator">Try Phabricator</a> uses Docker Compose and is bundled with Apache, PHP, and MariaDB. It worked out of the box, but it was not designed for production.</li>
<li><a href="https://github.com/edom/apt-manual-mirror">APT manual mirror</a> copies selected Debian packages into local directory while preserving the layout. It allows you to mirror only the packages you want.</li>
<li><a href="https://github.com/edom/haji">Haji</a> tries to be a Java bytecode interpreter written in Haskell.</li>
</ul></li>
</ul>
<h2 id="using-haskell"><span class="section_number">12</span><span class="section_title">Using Haskell</span></h2>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">12.1</span><span class="section_title"><a href="#setting-up-development-environment">Setting up development environment</a></span><span class="word_count">(368w~2m)</span></li>
<li><span class="section_number">12.2</span><span class="section_title"><a href="#hackage-outages">Hackage outages</a></span><span class="word_count">(34w~1m)</span></li>
<li><span class="section_number">12.3</span><span class="section_title"><a href="#haskell-in-2018">Haskell in 2018</a></span><span class="word_count">(49w~1m)</span></li>
<li><span class="section_number">12.4</span><span class="section_title"><a href="#using-ghc">Using GHC</a></span><span class="word_count">(3w~1m)</span></li>
<li><span class="section_number">12.5</span><span class="section_title"><a href="#what-2">what</a></span><span class="word_count">(32w~1m)</span></li>
<li><span class="section_number">12.6</span><span class="section_title"><a href="#finding-a-haskell-ide">Finding a Haskell IDE</a></span><span class="word_count">(60w~1m)</span></li>
<li><span class="section_number">12.7</span><span class="section_title"><a href="#what-3">what</a></span><span class="word_count">(13w~1m)</span></li>
<li><span class="section_number">12.8</span><span class="section_title"><a href="#what-4">what</a></span><span class="word_count">(86w~1m)</span></li>
<li><span class="section_number">12.9</span><span class="section_title"><a href="#curating-libraries">Curating libraries</a></span><span class="word_count">(2w~1m)</span></li>
<li><span class="section_number">12.10</span><span class="section_title"><a href="#what-5">what</a></span><span class="word_count">(22w~1m)</span></li>
<li><span class="section_number">12.11</span><span class="section_title"><a href="#haskell-woes">Haskell woes</a></span><span class="word_count">(8w~1m)</span></li>
<li><span class="section_number">12.12</span><span class="section_title"><a href="#ghc-woes">GHC woes</a></span><span class="word_count">(33w~1m)</span></li>
<li><span class="section_number">12.13</span><span class="section_title"><a href="#people-who-have-too-much-time">People who have too much time</a></span><span class="word_count">(9w~1m)</span></li>
<li><span class="section_number">12.14</span><span class="section_title"><a href="#whats-hampering-haskell-adoption">What's hampering Haskell adoption?</a></span><span class="word_count">(10w~1m)</span></li>
<li><span class="section_number">12.15</span><span class="section_title"><a href="#using-cabal">Using Cabal</a></span><span class="word_count">(382w~2m)</span></li>
</ul>
</div>
<h3 id="setting-up-development-environment"><span class="section_number">12.1</span><span class="section_title">Setting up development environment</span></h3>
<ul>
<li><p>Duplicate intersecting efforts? Too many choices?</p>
<ul>
<li>Why is there Haskell Platform and Haskell Stack?</li>
<li>Which should we use?</li>
<li><p>Why is there haskell-lang.org and haskell.org?</p>
<ul>
<li><a href="https://news.ycombinator.com/item?id=12054690">https://news.ycombinator.com/item?id=12054690</a></li>
</ul></li>
<li>Why should I use Platform if there is Stack?</li>
<li>Why should I use Stack if there is Cabal new-style?</li>
<li><p>Why Stack?</p>
<ul>
<li>Vetted packages?</li>
</ul></li>
<li><p><a href="http://www.haskellforall.com/2018/05/how-i-evaluate-haskell-packages.html">http://www.haskellforall.com/2018/05/how-i-evaluate-haskell-packages.html</a></p></li>
</ul></li>
<li><p>cabal new-build obviates stack?</p>
<ul>
<li><a href="http://coldwa.st/e/blog/2017-09-09-Cabal-2-0.html">http://coldwa.st/e/blog/2017-09-09-Cabal-2-0.html</a></li>
</ul></li>
</ul>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">12.1.1</span><span class="section_title"><a href="#my-incoherent-rambling">My incoherent rambling</a></span><span class="word_count">(323w~2m)</span></li>
</ul>
</div>
<h4 id="my-incoherent-rambling"><span class="section_number">12.1.1</span><span class="section_title">My incoherent rambling</span></h4>
<p>My old way: stack. My new way: cabal new-style. It may change again.</p>
<ul>
<li><p>Install the Haskell <code>stack</code> tool.</p>
<ul>
<li><p>I use the <a href="https://docs.haskellstack.org/en/stable/install_and_upgrade/#linux">manual download</a>.</p>
<ul>
<li>If you want to make sure that the download isn't corrupted, check the corresponding sha256sum from <a href="https://github.com/commercialhaskell/stack/releases/">GitHub releases page</a>.</li>
<li>If you don't mind sudoing, use the installer script in the <a href="https://docs.haskellstack.org/en/stable/README/">documentation</a>.</li>
</ul></li>
<li>Then I check the archive contents using <code>tar tzf</code>.</li>
<li>If there's no weird paths, I extract the archive with <code>tar xzf</code>.</li>
<li>Then I make the symbolic link <code>~/.local/bin/stack</code>.</li>
<li><p>If you use the manual download, you may have to install some operating system packages.</p>
<ul>
<li>The list is on the <a href="https://get.haskellstack.org/">install script</a>. Search for <code>install_dependencies</code> for your distro.</li>
</ul></li>
</ul></li>
<li><p>Choose a Stack solver.</p>
<ul>
<li><p>Forget it. Just install GHC to home.</p>
<ul>
<li><code>./configure --prefix ~/.local</code></li>
<li><code>make -j4 install</code></li>
</ul></li>
</ul></li>
<li><p>Which version of GHC should I use? - The one that is supported by <a href="http://hackage.haskell.org/package/HaRe">HaRe</a> (Haskell refactoring tool) and <a href="https://github.com/leksah/leksah">Leksah</a>. - On 2018-08-20, this is 8.0.2. - Leksah requires ghc &gt;= 8.0.2. - HaRe supports ghc &lt;= 8.0.2. - GHC 8.0 is unacceptably slow. - Forget HaRe. We'll go with Leksah. Use GHC 8.4.3.</p>
<ul>
<li>The widely supported GHC version lags very much behind the latest stable GHC version. I think this may be because the GHC team is rolling out lots of breaking changes in the parser because they are working on the &quot;Trees that grow&quot; proposal.</li>
<li><p>Which Stackage LTS version should I use?</p>
<ul>
<li><p><a href="https://www.stackage.org/lts-6.35">LTS 6.35</a> if GHC 7.10.3?</p>
<ul>
<li>It also hosts a hoogle search for searching Haskell program elements.</li>
</ul></li>
</ul></li>
</ul></li>
<li><p>How to get started?</p>
<ul>
<li><p>Too many choices</p>
<ul>
<li><p>install using the package manager that comes with your system</p>
<ul>
<li>pros: least hassle</li>
<li>cons: outdated software</li>
</ul></li>
<li>Stack</li>
<li>Cabal</li>
<li>Nix</li>
<li><p>Haskell Platform</p></li>
</ul></li>
</ul></li>
<li><p>What is your preferred way of installing Haskell?</p>
<ul>
<li><p>Install <code>cabal-install</code></p>
<ul>
<li>Download the suitable <code>cabal-install</code> binary package from <a href="https://www.haskell.org/cabal/download.html">https://www.haskell.org/cabal/download.html</a></li>
<li>Extract the <code>cabal</code> binary to <code>~/.local/bin</code></li>
</ul></li>
<li><p>Install current stable release of GHC</p>
<ul>
<li>Download the current stable release of GHC from <a href="https://www.haskell.org/ghc/download.html">https://www.haskell.org/ghc/download.html</a></li>
<li>Extract it somewhere</li>
<li><p>Follow the instructions in INSTALL file:</p>
<ul>
<li><code>./configure --prefix=$HOME/.local</code></li>
<li><code>make -j4 install</code></li>
</ul></li>
</ul></li>
<li><p>Modify <code>PATH</code> in <code>~/.basrhc</code>:</p>
<ul>
<li>Ensure that the line <code>export PATH</code>&quot;$PATH:$HOME/.local/bin&quot;= is in <code>~/.bashrc</code>.</li>
</ul></li>
<li><p>For what is the hassle?</p>
<ul>
<li>So that, if anything goes wrong, I can nuke it without nuking my whole operating system.</li>
</ul></li>
</ul></li>
</ul>
<h3 id="hackage-outages"><span class="section_number">12.2</span><span class="section_title">Hackage outages</span></h3>
<p>Hackage is Haskell package repository. Sometimes it goes down.</p>
<ul>
<li>How to tell Cabal to use a Hackage mirror? An instruction is on the Internet; I forgot where.</li>
<li>2018-04-13: <a href="https://blog.hackage.haskell.org/posts/2018-04-26-downtime.html">Hackage goes down for about a day</a></li>
</ul>
<h3 id="haskell-in-2018"><span class="section_number">12.3</span><span class="section_title">Haskell in 2018</span></h3>
<ul>
<li><p>unread, Stephen Diehl</p>
<ul>
<li><a href="http://www.stephendiehl.com/posts/vim_2016.html">http://www.stephendiehl.com/posts/vim_2016.html</a></li>
<li><a href="http://www.stephendiehl.com/posts/vim_haskell.html">http://www.stephendiehl.com/posts/vim_haskell.html</a></li>
<li><a href="http://www.stephendiehl.com/posts/haskell_2018.html">http://www.stephendiehl.com/posts/haskell_2018.html</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/7wmhyi/an_opinionated_guide_to_haskell_in_2018/">https://www.reddit.com/r/haskell/comments/7wmhyi/an_opinionated_guide_to_haskell_in_2018/</a></li>
<li><a href="https://github.com/Gabriel439/post-rfc/blob/master/sotu.md">https://github.com/Gabriel439/post-rfc/blob/master/sotu.md</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/54fv8b/what_is_the_state_of_haskell/">https://www.reddit.com/r/haskell/comments/54fv8b/what_is_the_state_of_haskell/</a></li>
<li><a href="https://lexi-lambda.github.io/blog/2018/02/10/an-opinionated-guide-to-haskell-in-2018/">https://lexi-lambda.github.io/blog/2018/02/10/an-opinionated-guide-to-haskell-in-2018/</a></li>
<li><a href="https://eta-lang.org/">Eta: Haskell on JVM</a></li>
</ul></li>
<li><p>Development workflow and tools</p>
<ul>
<li><p>2018</p>
<ul>
<li><p>IDE (integrated development environment)</p>
<ul>
<li>Visual Studio Code</li>
<li>Leksah</li>
<li>others?</li>
<li><a href="https://github.com/haskell/haskell-ide-engine">https://github.com/haskell/haskell-ide-engine</a></li>
<li><p>wasted efforts?</p>
<ul>
<li><p><a href="https://github.com/JPMoresmau/eclipsefp">EclipseFP</a>, no longer developed since 2015</p>
<ul>
<li><p><a href="http://jpmoresmau.blogspot.com/2015/05/eclipsefp-end-of-life-from-me-at-least.html">http://jpmoresmau.blogspot.com/2015/05/eclipsefp-end-of-life-from-me-at-least.html</a></p>
<ul>
<li><p>He got tired of working alone. He pointed us to <a href="https://www.fpcomplete.com/blog/2015/03/announce-ide-backend">FPComplete ide-backend</a>.</p>
<ul>
<li><a href="https://github.com/fpco/ide-backend">ide-backend</a> seems dead; last activity is in 2016.</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li><p>cabal new-style</p></li>
</ul></li>
<li><p>2016, <a href="http://www.stephendiehl.com/posts/vim_2016.html">http://www.stephendiehl.com/posts/vim_2016.html</a></p>
<ul>
<li>2015 (?), <a href="http://www.stephendiehl.com/posts/vim_haskell.html">http://www.stephendiehl.com/posts/vim_haskell.html</a></li>
</ul></li>
</ul></li>
<li><p>Companies using Haskell</p>
<ul>
<li><a href="https://www.reddit.com/r/haskell/comments/4jo2da/fp_shops/">https://www.reddit.com/r/haskell/comments/4jo2da/fp_shops/</a></li>
</ul></li>
<li><p>things hot in 2018</p>
<ul>
<li><p><a href="https://cardanofoundation.org/">Cardano</a></p>
<ul>
<li><a href="https://www.reddit.com/r/haskell/comments/73r861/cardano_next_generation_blockchain_platform/">https://www.reddit.com/r/haskell/comments/73r861/cardano_next_generation_blockchain_platform/</a></li>
<li><a href="https://www.reddit.com/r/cardano/comments/8d87hf/haskell_cryptocurrencies/">https://www.reddit.com/r/cardano/comments/8d87hf/haskell_cryptocurrencies/</a></li>
</ul></li>
<li><p>IOHK</p></li>
</ul></li>
<li><p>Unread</p>
<ul>
<li><a href="https://github.com/dhall-lang/dhall-lang">https://github.com/dhall-lang/dhall-lang</a></li>
<li><a href="https://wiki.haskell.org/Haskell_Communities_and_Activities_Report">https://wiki.haskell.org/Haskell_Communities_and_Activities_Report</a></li>
<li><p><a href="https://haskellweekly.news/">https://haskellweekly.news/</a></p>
<ul>
<li><p><a href="https://github.com/haskellweekly/haskellweekly.github.io">https://github.com/haskellweekly/haskellweekly.github.io</a></p>
<ul>
<li><a href="https://wiki.haskell.org/Haskell_Weekly_News">https://wiki.haskell.org/Haskell_Weekly_News</a></li>
</ul></li>
</ul></li>
<li><p><a href="https://haskell.libhunt.com/newsletter/6">https://haskell.libhunt.com/newsletter/6</a></p></li>
</ul></li>
</ul>
<h3 id="using-ghc"><span class="section_number">12.4</span><span class="section_title">Using GHC</span></h3>
<ul>
<li><p>Using GHCI</p>
<ul>
<li><a href="https://www.reddit.com/r/haskell/comments/5su9ag/reload_run_expressions_in_ghci_with_a_single/">https://www.reddit.com/r/haskell/comments/5su9ag/reload_run_expressions_in_ghci_with_a_single/</a></li>
</ul></li>
<li><a href="https://rybczak.net/2016/03/26/how-to-reduce-compilation-times-of-haskell-projects/">https://rybczak.net/2016/03/26/how-to-reduce-compilation-times-of-haskell-projects/</a></li>
<li><a href="https://stackoverflow.com/questions/15662984/speed-up-compilation-in-ghc?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa">https://stackoverflow.com/questions/15662984/speed-up-compilation-in-ghc?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa</a></li>
<li><p><a href="https://www.reddit.com/r/haskell/comments/45q90s/is_anything_being_done_to_remedy_the_soul/">https://www.reddit.com/r/haskell/comments/45q90s/is_anything_being_done_to_remedy_the_soul/</a></p></li>
</ul>
<h3 id="what-2"><span class="section_number">12.5</span><span class="section_title">what</span></h3>
<ul>
<li><a href="https://www.haskell.org/haddock/doc/html/ch03s08.html">Haddock markup syntax</a></li>
<li><p>metaprogramming from Haskell to Haskell</p>
<ul>
<li><a href="https://personal.cis.strath.ac.uk/conor.mcbride/pub/she/">Strathclyde Haskell Enhancement</a></li>
<li>Template Haskell</li>
<li><p><a href="https://wiki.haskell.org/Generics">https://wiki.haskell.org/Generics</a></p>
<ul>
<li>SYB (Scrap Your Boilerplate), uniplate, etc.</li>
</ul></li>
</ul></li>
<li><p>What does &quot;Avoid 'success at all costs'&quot; mean?</p>
<ul>
<li><a href="https://news.ycombinator.com/item?id=12056169">https://news.ycombinator.com/item?id=12056169</a></li>
</ul></li>
<li><p>Will Eta kill <a href="https://github.com/Frege/frege">Frege</a>? It's sad to see works thrown away.</p></li>
</ul>
<h3 id="finding-a-haskell-ide"><span class="section_number">12.6</span><span class="section_title">Finding a Haskell IDE</span></h3>
<p>I haven't found a convincing IDE for Haskell.</p>
<ul>
<li><a href="https://www.reddit.com/r/haskell/comments/5lgtb1/what_ideeditor_do_you_use_for_haskell_development/">what IDE/editor do you use for Haskell development? : haskell</a></li>
<li><a href="https://www.quora.com/What-are-powerful-Haskell-IDEs">What are powerful Haskell IDEs? - Quora</a></li>
<li><a href="https://www.quora.com/What-is-the-best-IDE-for-programming-in-Haskell">What is the best IDE for programming in Haskell? - Quora</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/86bmpu/haskell_ides/">Haskell ides? : haskell</a></li>
<li>Leksah-nix fails to build on my machine (Ubuntu 14.04). There are no prebuilt binaries. Must compile from source from <a href="https://github.com/leksah/leksah/wiki/download">Hackage</a> using Cabal.</li>
</ul>
<h3 id="what-3"><span class="section_number">12.7</span><span class="section_title">what</span></h3>
<ul>
<li><p>Enterprise Haskell?</p>
<ul>
<li><a href="https://wiki.haskell.org/Enterprise_Haskell">https://wiki.haskell.org/Enterprise_Haskell</a></li>
<li>DSH: Database Supported Haskell <a href="https://hackage.haskell.org/package/DSH">https://hackage.haskell.org/package/DSH</a></li>
</ul></li>
<li><a href="http://yager.io/Distributed/Distributed.html">Distributed Systems in Haskell :: Will Yager</a></li>
<li><p>Alien technologies?</p>
<ul>
<li><a href="https://github.com/transient-haskell/transient">https://github.com/transient-haskell/transient</a></li>
</ul></li>
</ul>
<h3 id="what-4"><span class="section_number">12.8</span><span class="section_title">what</span></h3>
<ul>
<li>useful trick, especially helpful when abusing type classes: <a href="https://chrisdone.com/posts/haskell-constraint-trick">https://chrisdone.com/posts/haskell-constraint-trick</a></li>
<li><a href="https://chrisdone.com/posts/twitter-problem-loeb">https://chrisdone.com/posts/twitter-problem-loeb</a></li>
<li><a href="http://blog.sigfpe.com/2006/11/from-l-theorem-to-spreadsheet.html">http://blog.sigfpe.com/2006/11/from-l-theorem-to-spreadsheet.html</a></li>
<li><a href="http://blog.sigfpe.com/2007/02/comonads-and-reading-from-future.html">http://blog.sigfpe.com/2007/02/comonads-and-reading-from-future.html</a></li>
<li><p>Components for publish-subscribe in Haskell?</p>
<ul>
<li><a href="https://www.stackage.org/lts-6.35/package/broadcast-chan-0.1.1">https://www.stackage.org/lts-6.35/package/broadcast-chan-0.1.1</a></li>
</ul></li>
<li>Lennart Augustsson's <a href="http://augustss.blogspot.com/2008/12/somewhat-failed-adventure-in-haskell.html">Things that amuse me</a>, Haskell module overloading</li>
<li><p><a href="http://hackage.haskell.org/package/lazy">lazy: Explicit laziness for Haskell</a></p>
<ul>
<li>&quot;This library provides laziness as an abstraction with an explicit type-signature, and it so happens that this abstraction forms a monad!&quot;</li>
<li><a href="https://nikita-volkov.github.io/if-haskell-were-strict/">If Haskell were strict, what would the laziness be like?</a></li>
<li>2014, article, <a href="https://pchiusano.github.io/2014-09-18/explicit-laziness.html">Paul Chiusano: An interesting variation on a strict by default language</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/36s0ii/how_do_we_all_feel_about_laziness/">How do we all feel about laziness? : haskell</a></li>
</ul></li>
<li><p>distributed functional programming?</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/MBrace">WP:MBrace</a>, F#</li>
<li><p><a href="https://haskell-distributed.github.io/">Cloud Haskell</a></p>
<ul>
<li>has some academic papers <a href="https://wiki.haskell.org/Cloud_Haskell">https://wiki.haskell.org/Cloud_Haskell</a></li>
</ul></li>
<li><p><a href="https://github.com/PatrickMaier/HdpH">PatrickMaier/HdpH: Haskell distributed parallel Haskell</a></p></li>
</ul></li>
</ul>
<h3 id="curating-libraries"><span class="section_number">12.9</span><span class="section_title">Curating libraries</span></h3>
<ul>
<li><a href="https://www.reddit.com/r/haskell/comments/4ggt05/best_underrated_haskell_libraries/">https://www.reddit.com/r/haskell/comments/4ggt05/best_underrated_haskell_libraries/</a></li>
<li><a href="https://wiki.haskell.org/Applications_and_libraries">https://wiki.haskell.org/Applications_and_libraries</a></li>
<li><a href="https://stackoverflow.com/questions/9286799/haskell-libraries-overview-and-their-quality">https://stackoverflow.com/questions/9286799/haskell-libraries-overview-and-their-quality</a></li>
</ul>
<h3 id="what-5"><span class="section_number">12.10</span><span class="section_title">what</span></h3>
<ul>
<li><p>unread</p>
<ul>
<li>servant web framework</li>
<li><p>Salsa Haskell .NET bridge</p>
<ul>
<li><a href="https://wiki.haskell.org/Salsa">https://wiki.haskell.org/Salsa</a></li>
</ul></li>
<li><p><a href="https://gist.github.com/puffnfresh/6222797">Haskell partiality monad</a></p></li>
</ul></li>
<li><a href="https://stackoverflow.com/questions/5770168/templating-packages-for-haskell">https://stackoverflow.com/questions/5770168/templating-packages-for-haskell</a></li>
<li><p>Hoogle vs Hayoo?</p>
<ul>
<li><p>The hoogle on stackage.org top right text bar seems to be most complete</p>
<ul>
<li><a href="https://www.stackage.org/">https://www.stackage.org/</a></li>
</ul></li>
<li><p><a href="https://mail.haskell.org/pipermail/haskell-cafe/2013-August/109945.html">https://mail.haskell.org/pipermail/haskell-cafe/2013-August/109945.html</a></p></li>
</ul></li>
</ul>
<h3 id="haskell-woes"><span class="section_number">12.11</span><span class="section_title">Haskell woes</span></h3>
<ul>
<li><p>Exceptions?</p>
<ul>
<li><a href="http://hackage.haskell.org/package/safe-exceptions">http://hackage.haskell.org/package/safe-exceptions</a></li>
<li><a href="https://www.fpcomplete.com/blog/2016/11/exceptions-best-practices-haskell">https://www.fpcomplete.com/blog/2016/11/exceptions-best-practices-haskell</a></li>
<li><a href="https://www.reddit.com/r/haskell/comments/589fkg/haskell_and_the_no_runtime_exception_claim_95_of/">https://www.reddit.com/r/haskell/comments/589fkg/haskell_and_the_no_runtime_exception_claim_95_of/</a></li>
</ul></li>
<li>Module system</li>
<li><p><code>Read(read)</code> should be renamed to <code>CoShow(coshow)</code>.</p></li>
</ul>
<h3 id="ghc-woes"><span class="section_number">12.12</span><span class="section_title">GHC woes</span></h3>
<ul>
<li>Profiling requires recompiling all transitive dependencies if they happen to be compiled without profiling.</li>
</ul>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">12.12.1</span><span class="section_title"><a href="#working-on-ghc">Working on GHC</a></span><span class="word_count">(19w~1m)</span></li>
</ul>
</div>
<h4 id="working-on-ghc"><span class="section_number">12.12.1</span><span class="section_title">Working on GHC</span></h4>
<ul>
<li><p>Beginning to work on GHC</p>
<ul>
<li>Please see the <a href="https://ghc.haskell.org/trac/ghc/wiki/Newcomers">newcomers guide</a> first.</li>
</ul></li>
<li><p>GHC TDNR (type-directed name resolution)</p>
<ul>
<li><a href="https://ghc.haskell.org/trac/ghc/ticket/4479">https://ghc.haskell.org/trac/ghc/ticket/4479</a></li>
<li><a href="https://ghc.haskell.org/trac/ghc/wiki/Records/OverloadedRecordFields">https://ghc.haskell.org/trac/ghc/wiki/Records/OverloadedRecordFields</a></li>
<li><a href="https://stackoverflow.com/questions/22417063/current-state-of-record-types-and-subtyping-in-haskell">https://stackoverflow.com/questions/22417063/current-state-of-record-types-and-subtyping-in-haskell</a></li>
<li><p><a href="https://en.wikipedia.org/wiki/Subtyping#Record_types">https://en.wikipedia.org/wiki/Subtyping#Record_types</a></p>
<ul>
<li>Width and depth subtyping</li>
</ul></li>
</ul></li>
</ul>
<h3 id="people-who-have-too-much-time"><span class="section_number">12.13</span><span class="section_title">People who have too much time</span></h3>
<ul>
<li><a href="https://hackage.haskell.org/package/ImperativeHaskell">https://hackage.haskell.org/package/ImperativeHaskell</a></li>
<li>just for curiosity <a href="https://github.com/edwinb/idris-php">https://github.com/edwinb/idris-php</a></li>
</ul>
<h3 id="whats-hampering-haskell-adoption"><span class="section_number">12.14</span><span class="section_title">What's hampering Haskell adoption?</span></h3>
<ul>
<li>GHC's aggressive intermodule optimization precludes prebuilt binaries.</li>
</ul>
<h3 id="using-cabal"><span class="section_number">12.15</span><span class="section_title">Using Cabal</span></h3>
<ul>
<li><p>Every package used by Setup.hs must have a vanilla version.</p>
<ul>
<li><p>Why I encountered this error:</p>
<ul>
<li>I set <code>library-vanilla</code> to <code>False</code> due to <a href="https://rybczak.net/2016/03/26/how-to-reduce-compilation-times-of-haskell-projects/">https://rybczak.net/2016/03/26/how-to-reduce-compilation-times-of-haskell-projects/</a></li>
</ul></li>
<li><p>How I encountered this error:</p>
<ul>
<li><p>HDBC-postgresql-2.3.2.5 <code>Setup.hs</code> build fails due to linking error with <code>shared: True</code>.</p>
<ul>
<li><p>The offending packages are <code>old-time</code> and <code>old-locale</code>.</p>
<ul>
<li>It's OK if we build them as shared library, but we must also build their vanilla version.</li>
</ul></li>
<li>It's not the library content that fails to build. It's the Cabal Setup of the library that fails to link.</li>
<li>GHC expects that <code>old-time</code> and <code>old-locale</code> are system libraries?</li>
<li>GHC passes '-lHSold-time-VERSION-HASH.so'. It passes that in the -l switch to GCC.</li>
<li><p>Cabal writes 'libHSold-time-VERSION-HASH-ghc-8.2.2.so'.</p>
<ul>
<li>Note the <code>ghc-8.2.2</code> part isn't in the string passed by GHC to GCC.</li>
</ul></li>
<li>Can we solve this by <code>cabal install old-time old-locale</code>?</li>
<li><p><a href="https://github.com/haskell/cabal/issues/1720">https://github.com/haskell/cabal/issues/1720</a></p>
<ul>
<li>Workaround: Add <code>--ghc-options</code>-dynamic= to cabal new-install</li>
</ul></li>
<li>How do we tell Cabal to use the version we installed with new-install?</li>
<li>Where should we fix this? Cabal? GHC? HDBC-postgresql?</li>
<li>Should we find another library? Hackage has a low-level libpgsql wrapper.</li>
<li><p>Should we just disable HDBC-postgresql on meta?</p></li>
</ul></li>
</ul></li>
<li><p>How I diagnosed it:</p>
<ul>
<li>Pass <code>-v</code> to GHC (create a bash script named <code>ghc</code> that calls <code>SOMEWHERE/ghc -v &quot;$@&quot;</code>, and put its directory in front of <code>PATH</code>).</li>
<li>Add <code>-v</code> to <code>cabal</code>. Then look at this fragment. It's suspicious that <code>old-time</code> is the only package with a hash.</li>
</ul>
<pre class="example"><code>package flags [-package-id Cabal-2.0.1.0{unit Cabal-2.0.1.0 True ([])},
     -package-id array-0.5.2.0{unit array-0.5.2.0 True ([])},
     -package-id base-4.10.1.0{unit base-4.10.1.0 True ([])},
     -package-id binary-0.8.5.1{unit binary-0.8.5.1 True ([])},
     -package-id bytestring-0.10.8.2{unit bytestring-0.10.8.2 True ([])},
     -package-id containers-0.5.10.2{unit containers-0.5.10.2 True ([])},
     -package-id deepseq-1.4.3.0{unit deepseq-1.4.3.0 True ([])},
     -package-id directory-1.3.0.2{unit directory-1.3.0.2 True ([])},
     -package-id filepath-1.4.1.2{unit filepath-1.4.1.2 True ([])},
     -package-id ghc-prim-0.5.1.1{unit ghc-prim-0.5.1.1 True ([])},
     -package-id old-time-1.1.0.3-8c2cc8e5fb3b424e71501141225064c5d9ee4eeba7f40b702227ad1c3ea2c5b7{unit old-time-1.1.0.3-8c2cc8e5fb3b424e71501141225064c5d9ee4eeba7f40b702227ad1c3ea2c5b7 True ([])},
     -package-id pretty-1.1.3.3{unit pretty-1.1.3.3 True ([])},
     -package-id process-1.6.1.0{unit process-1.6.1.0 True ([])},
     -package-id template-haskell-2.12.0.0{unit template-haskell-2.12.0.0 True ([])},
     -package-id time-1.8.0.2{unit time-1.8.0.2 True ([])},
     -package-id transformers-0.5.2.0{unit transformers-0.5.2.0 True ([])},
     -package-id unix-2.7.2.2{unit unix-2.7.2.2 True ([])}]
</code></pre></li>
<li><p>How I solved it:</p>
<ul>
<li><p>I added this fragment to <code>cabal.project</code>:</p>
<pre class="example"><code>
package old-time
library-vanilla: True

package old-locale
library-vanilla: True
</code></pre></li>
<li>Related
<ul>
<li><a href="https://github.com/haskell/cabal/issues/4748">https://github.com/haskell/cabal/issues/4748</a></li>
<li>[#3409 Can't use system GHC without static libraries at all](<a href="https://github.com/commercialhaskell/stack/issues/3409">https://github.com/commercialhaskell/stack/issues/3409</a>)</li>
<li>[#1720 `executable-dynamic: True` should apply to `build-type: Custom` setup](<a href="https://github.com/haskell/cabal/issues/1720">https://github.com/haskell/cabal/issues/1720</a>)</li>
</ul></li>
</ul></li>
</ul></li>
<li><p><a href="https://github.com/haskell/cabal/issues/4506">#4506 <code>new-haddock</code>'s file monitoring broken</a></p>
<ul>
<li><code>new-haddock</code> doesn't work after <code>new-build</code>.</li>
</ul></li>
<li><p><a href="https://github.com/haskell/cabal/issues/5290">#5290 new-build runs into internal error after deleting from store</a></p>
<ul>
<li>Solution: nuke the entire store: <code>rm -r ~/.cabal/store</code>.</li>
</ul></li>
<li><p>Non-problems</p>
<ul>
<li><p><code>cabal new-build --disable-optimization</code> doesn't disable optimization of transitive dependencies.</p>
<ul>
<li>Cannot reproduce this in cabal 2.3. Is this a 2.0.0.1 bug?</li>
<li><code>$HOME/.cabal/config</code> has <code>optimization: False</code>.</li>
<li>Is this a regression? Oversight? It works with <code>cabal install</code>.</li>
<li><p>What I'm trying to do:</p>
<ul>
<li>Build transitive dependencies with optimization disabled, for faster development.</li>
</ul></li>
<li><p>My guess:</p>
<ul>
<li>There seems to be a problem in how the new code path plumbs down arguments.</li>
<li><p><code>&quot;Using internal setup method with build-type&quot;</code> always gets argument <code>--enable-optimization</code>.</p>
<ul>
<li>That message is printed by <code>./Distribution/Client/SetupWrapper.hs:418</code> <code>internalSetupMethod</code> if <code>cabal new-repl</code> is run with <code>--verbose</code>.</li>
<li>Where does that <code>--enable-optimization</code> come from?</li>
<li>Why isn't the <code>--disable-optimization</code> passed down?</li>
</ul></li>
</ul></li>
<li><p>Related issues:</p>
<ul>
<li><a href="https://github.com/haskell/cabal/issues/3720">#3720 Tracking bug for cabal.project semantics</a></li>
<li><a href="https://github.com/haskell/cabal/issues/5353">#5353 cabal new-configure â€“disable-optimization has no effect if ghc-options in cabal file contain optimization flag</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><p>Cabal codebase</p>
<ul>
<li><p>Seemingly minor codebase maintenance problems</p>
<ul>
<li><p>Code duplication</p>
<ul>
<li><code>CmdRepl.hs</code> seems to be copied from <code>CmdBuild.hs</code>.</li>
</ul></li>
<li><p><code>CmdBuild.hs</code> imports <code>...Orchestration</code> unqualified without explicit import list</p></li>
</ul></li>
</ul></li>
<li><p>Cabal description field pitfall</p>
<ul>
<li><a href="http://michael.orlitzky.com/articles/using_haddock_markup_in_a_cabal_file.xhtml">http://michael.orlitzky.com/articles/using_haddock_markup_in_a_cabal_file.xhtml</a></li>
</ul></li>
</ul>
<h2 id="using-kubernetes"><span class="section_number">13</span><span class="section_title">Using Kubernetes</span></h2>
<ul>
<li><a href="https://kubernetes.io/">kubernetes.io</a>: &quot;Production-Grade Container Orchestration&quot;</li>
<li><p>How do we control access to Kubernetes?</p>
<ul>
<li><a href="https://stackoverflow.com/questions/42170380/how-to-add-users-to-kubernetes-kubectl">https://stackoverflow.com/questions/42170380/how-to-add-users-to-kubernetes-kubectl</a></li>
<li><a href="https://kubernetes.io/docs/admin/authentication/">https://kubernetes.io/docs/admin/authentication/</a></li>
<li><a href="https://kubernetes.io/docs/admin/accessing-the-api/">https://kubernetes.io/docs/admin/accessing-the-api/</a></li>
<li>How do we add and remove users and roles to Kubernetes?</li>
<li>Which is the most hassle-free future-proof minimal-maintenance way?</li>
</ul></li>
<li><p>Kubernetes security</p>
<ul>
<li><a href="https://kubernetes.io/blog/2016/08/security-best-practices-kubernetes-deployment/">https://kubernetes.io/blog/2016/08/security-best-practices-kubernetes-deployment/</a></li>
<li><a href="https://kubernetes.io/docs/tasks/administer-cluster/securing-a-cluster/">https://kubernetes.io/docs/tasks/administer-cluster/securing-a-cluster/</a></li>
<li><p>Which document should we read? Overlapping? Confusing?</p>
<ul>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/controlling-access/">https://kubernetes.io/docs/reference/access-authn-authz/controlling-access/</a></li>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/">https://kubernetes.io/docs/reference/access-authn-authz/authentication/</a></li>
<li><a href="https://kubernetes.io/docs/reference/access-authn-authz/authorization/">https://kubernetes.io/docs/reference/access-authn-authz/authorization/</a></li>
</ul></li>
<li><p>What is Kubernetes's replacement of AWS security groups?</p>
<ul>
<li><p>NetworkPolicy objects</p>
<ul>
<li><a href="https://kubernetes.io/blog/2017/10/enforcing-network-policies-in-kubernetes/">https://kubernetes.io/blog/2017/10/enforcing-network-policies-in-kubernetes/</a></li>
<li><a href="https://kubernetes.io/blog/2016/04/kubernetes-network-policy-apis/">https://kubernetes.io/blog/2016/04/kubernetes-network-policy-apis/</a></li>
</ul></li>
</ul></li>
</ul></li>
<li><p>How I think Kubernetes fits in Google's strategy</p>
<ul>
<li><p>Kubernetes commoditizes IaaS providers.</p>
<ul>
<li><p>It lowers the barrier of switching from any other cloud providers to GCE.</p>
<ul>
<li>Examples of other cloud providers: Amazon Web Services (AWS), DigitalOcean, Alibaba Cloud (Aliyun), Microsoft Azure</li>
</ul></li>
<li><p>The same way Microsoft Windows commoditized PC hardware.</p></li>
</ul></li>
<li><a href="https://en.wikipedia.org/wiki/Commoditization">WP:Commoditization</a></li>
<li><p><a href="https://en.wikipedia.org/wiki/Infrastructure_as_a_service">WP:Infrastructure as a service</a></p></li>
</ul></li>
<li><a href="https://www.level-up.one/kubernetes-bible-beginners/">The Kubernetes Bible for Beginners &amp; Developers - Level UpLevel Up</a></li>
</ul>
<h2 id="using-trello"><span class="section_number">14</span><span class="section_title">Using Trello</span></h2>
<ul>
<li><p>How should we best use Trello?</p>
<ul>
<li>A card gathers people to help each other accomplish a common goal.</li>
<li>A card disseminates information from the people who have it to the people who need it.</li>
</ul></li>
<li><p>Traps</p>
<ul>
<li>Because Trello cannot collaborative edit, we must not write too long before we save. Two people must not edit the card at the same time.</li>
</ul></li>
<li><p>What do we use Trello for?</p>
<ul>
<li>Prioritize what to do, starting with the highest velocity (value per effort)</li>
<li>Give enough information for others to help us</li>
</ul></li>
<li><p>What Trello is not</p>
<ul>
<li>A Trello column is not a mere to-do list.</li>
<li>Milestone lists are better than to-do lists. Be declarative, not imperative. Describe what you want, not how you want to do it.</li>
<li>If you can do it in a few hours, you don't need to make a Trello card for it.</li>
<li>If you don't need help with something, don't write a Trello card for it.</li>
</ul></li>
<li><p>Our attitude towards Trello</p>
<ul>
<li><p>We should consider the time spent on Trello as overhead. We should minimize the time we are editing, moving, arranging Trello cards.</p>
<ul>
<li>Human nature trap: It's fun to look busy (over-organizing).</li>
</ul></li>
</ul></li>
<li><p>When not Slack?</p>
<ul>
<li>If you need to remember it later, use Trello or Confluence, not Slack.</li>
<li>If a problem will take some time, don't waste your time typing on Slack. Put it in Trello, and assign it to the person who can fix it.</li>
</ul></li>
<li><p>What is in a card?</p>
<ul>
<li>Write a card with the intention of helping everyone else help you. The card must answer &quot;What can I help? How can I help?&quot;.</li>
<li>A card contains information or will contain information.</li>
<li><p>A person should be in the card if:</p>
<ul>
<li>he person needs that information, or</li>
<li>he can contribute that information (he may also contribute in a comment).</li>
</ul></li>
<li><p>No other person should care about that card.</p></li>
</ul></li>
<li><p>What is Trello?</p>
<ul>
<li><p>To answer this, we answer these questions:</p>
<ul>
<li>What does Trello make easy?</li>
<li>What does Trello make hard?</li>
<li>We seek an operational definition for Trello. We define something by what it do.</li>
</ul></li>
</ul></li>
<li><p>What should we group together? Why?</p>
<ul>
<li>A board is a list of a column.</li>
<li>A column is a list of cards. Trello uses the term &quot;list&quot;, but we use &quot;column&quot; to avoid confusion.</li>
<li>A card has zero or more members.</li>
<li>A card has zero or more labels.</li>
<li>A label is like an atom in propositional logic.</li>
<li>The filtering system is a limited form of propositional logic.</li>
<li>A card is a way for several people to share information.</li>
<li>If two people need the same information, they should subscribe to the same card.</li>
<li>If we need two people to finish (archive) a card, then both of those people should be members of that card.</li>
<li>What is a label? You give a label L to a card if and only if you often need to filter (select) all cards labeled L.</li>
<li>Why are two cards in the same list? Because they have something in common. They share something. An aspect of them is equal.</li>
<li>We group something in a list to minimize moving cards.</li>
<li>What is that aspect? What irreplaceable advantage does it give us?</li>
<li>Because they have the same members? (We can use filter for this.) Because they belong to the same team? Because they have the same due date? (We can use filter for this.) Because they are a part of the same user story? Navigating multiple boards is hard (big cognitive burden).</li>
<li>Label is for filtering.</li>
</ul></li>
<li><p>What is easy to do in Trello?</p>
<ul>
<li>Toggle any of the first 10 labels.</li>
<li>Show cards assigned to me (the user who is logged in).</li>
<li>Show cards by a conjunction or a disjunction of a Condition.</li>
<li>Condition is an element of Conditions.</li>
<li>Conditions is the union of all labels in a board and members of a board.</li>
<li>Click on the due date in the card description to mark it complete.</li>
<li>Read card comments in reverse chronological order (newer comments first).</li>
<li>Move a card to the bottom of an adjacent list.</li>
<li>See the number of checked items in a checklist in a card.</li>
<li>In the comment of a card, add another card.</li>
</ul></li>
<li>Trello assumes that every checklist in the item has the same effort. Therefore we must make sure that every item in a checklist in the item has the same effort.</li>
<li><p>What is a bit hard to do (because it cannot be done by keyboard alone):</p>
<ul>
<li>Adding a check list in a card</li>
<li>A card can have many checklists</li>
<li>Marking a check list in a card</li>
<li>Unmarking a check list in a card</li>
<li>Filtering makes navigating a large board possible.</li>
</ul></li>
<li><p>What is hard to do in Trello:</p>
<ul>
<li>Move from a board to another boards. (High cognitive load due to context switching.)</li>
<li>One person should not be in more than one board.</li>
<li>Move a card from a list to another list. It is easier to archive the list.</li>
<li>Unarchive a card</li>
</ul></li>
<li><p>What is impossible (assuming no plugins):</p>
<ul>
<li>See due dates in non-US format</li>
<li>Use keyboard to move card up or down in a list</li>
<li>Gantt chart</li>
<li>Calendars</li>
<li>Progress report</li>
<li>Collaboratively edit a card description. Trello will only show the last saved description. The previous descriptions are not lost, but hardly accessible. The old description can be accessed by Exporting a card as JSON.</li>
<li>In a card description, we can link to a board or a card, but not link to a list.</li>
</ul></li>
<li><p>Member vs subscribe:</p>
<ul>
<li>If and only if you are a member of a card, it will show in 'my card' filter (Press Q) The members of a card are the people assigned to a card We must tailor our workflow so that we use only the easy things.</li>
</ul></li>
<li><p>Please read and memorize the Trello shortcut keys.</p>
<ul>
<li>Also read <a href="https://help.trello.com/article/734-how-to-use-trello-like-a-pro">How to use Trello like a pro</a>.</li>
<li>Those documents reflect what the Trello designer thinks Trello is best used for.</li>
</ul></li>
<li><p>In search of a Trello architecture</p>
<ul>
<li><p>Fixed Pipeline / Mini waterfalls</p>
<ul>
<li>Column = team, Card = product</li>
<li>One column is assembly line.</li>
<li>Cards move from left to right.</li>
<li>Progress is sequential. Right column cannot start before left column finishes what it has to do with the card.</li>
<li>Ideal for the same process that is repeated very many times.</li>
<li>For example, in our case, the columns would be Requirement, UI, Database, Backend, Frontend, Done.</li>
</ul></li>
<li><p>Column = a rather big to-do, card = breakdown of the column</p>
<ul>
<li>For example, in our case, each column would be &quot;As a (who), I (do what)&quot;.</li>
<li>A column is a work item and each card in the column is a breakdown of that item.</li>
</ul></li>
<li>Column = epic / bigger user story, card = smaller user story</li>
<li><p>Column = milestone, card = breakdown of milestone</p></li>
</ul></li>
<li><p>Trello list hierarchy (a Trello account is a list of lists of â€¦)</p>
<ul>
<li>A Trello account is a list of boards.</li>
<li>A board is a list of columns.</li>
<li>A column is a list of cards.</li>
<li>A card is a list of checklists.</li>
<li>A checklist is a list of checklist items.</li>
<li>Therefore we can use Trello for work breakdown structure of perhaps at most 4 levels deep.</li>
</ul></li>
</ul>
<h2 id="using-xml"><span class="section_number">15</span><span class="section_title">Using XML</span></h2>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">15.1</span><span class="section_title"><a href="#finding-the-editor">Finding the editor</a></span><span class="word_count">(74w~1m)</span></li>
<li><span class="section_number">15.2</span><span class="section_title"><a href="#using-schemas">Using schemas</a></span><span class="word_count">(48w~1m)</span></li>
<li><span class="section_number">15.3</span><span class="section_title"><a href="#toward-markup-language-agnosticity">Toward markup language agnosticity</a></span><span class="word_count">(64w~1m)</span></li>
</ul>
</div>
<h3 id="finding-the-editor"><span class="section_number">15.1</span><span class="section_title">Finding the editor</span></h3>
<p>List of editors:</p>
<ul>
<li><p>I have used</p>
<ul>
<li>Vim</li>
<li>IntelliJ IDEA</li>
</ul></li>
<li><p>I don't know</p>
<ul>
<li>emacs nxml-mode</li>
<li><a href="http://plugins.jedit.org/plugins/?XML">jEdit XML plugin</a></li>
<li>QXMLEdit? Can it autocomplete?</li>
<li>XML Notepad</li>
</ul></li>
</ul>
<p>Sources:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/XML_Schema_Editor#cite_note-1">WP:XML Schema Editor</a></li>
<li><a href="https://en.wikipedia.org/wiki/Comparison_of_XML_editors">WP:Comparison of XML editors</a></li>
</ul>
<p>IntelliJ IDEA works fine, but I'd be happy if there is a lighter alternative.</p>
<p>My criteria:</p>
<ul>
<li>open-source</li>
<li>schema-aware, supports XML Schema Definition (XSD)</li>
<li><p>autocompletion</p>
<ul>
<li>2018-08-22</li>
</ul></li>
</ul>
<p>Nice-to-have features:</p>
<ul>
<li>Automate closing tag.</li>
<li>Editing an opening tag also edits the closing tag.</li>
<li>Editing a closing tag also edits the opening tag.</li>
<li>Any way to avoid memorizing and typing <code>xmlns:xsi</code>.</li>
</ul>
<p>Vim can semi-automate XML closing tag using Ctrl+P.</p>
<h3 id="using-schemas"><span class="section_number">15.2</span><span class="section_title">Using schemas</span></h3>
<p>In principle, from a type defined in an XSD file, we can generate a Haskell module and a Java class.</p>
<ul>
<li><a href="http://www.kohsuke.org/xmlschema/XMLSchemaDOsAndDONTs.html">W3C XML Schema: DOs and DON'Ts</a></li>
<li><a href="https://stackoverflow.com/questions/2014237/what-are-the-best-practices-for-versioning-xml-schemas">xsd - What are the best practices for versioning XML schemas? - Stack Overflow</a></li>
<li><a href="https://www.webucator.com/tutorial/learn-xml-schema/XML-Schema-Keys.cfm">Tutorial: XML Schema Keys | XML Schema Tutorial | Webucator</a></li>
</ul>
<h3 id="toward-markup-language-agnosticity"><span class="section_number">15.3</span><span class="section_title">Toward markup language agnosticity</span></h3>
<p>What is common between XML, JSON, and YAML?</p>
<p>Can we map (interconvert) between XML and YAML? Approximate data model:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">type</span> <span class="dt">Key</span> <span class="fu">=</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">type</span> <span class="dt">Atr</span> <span class="fu">=</span> (<span class="dt">Key</span>, <span class="dt">String</span>)</a>
<a class="sourceLine" id="cb21-3" title="3"></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="kw">data</span> <span class="dt">Xml</span></a>
<a class="sourceLine" id="cb21-5" title="5">    <span class="fu">=</span> <span class="dt">XText</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb21-6" title="6">    <span class="fu">|</span> <span class="dt">XElem</span> [<span class="dt">Atr</span>] <span class="dt">Name</span> [<span class="dt">Xml</span>]</a>
<a class="sourceLine" id="cb21-7" title="7"></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="kw">data</span> <span class="dt">Json</span></a>
<a class="sourceLine" id="cb21-9" title="9">    <span class="fu">=</span> <span class="dt">JText</span> <span class="dt">String</span></a>
<a class="sourceLine" id="cb21-10" title="10">    <span class="fu">|</span> <span class="dt">JMap</span> [(<span class="dt">Key</span>, <span class="dt">Json</span>)]</a>
<a class="sourceLine" id="cb21-11" title="11">    <span class="fu">|</span> <span class="dt">JList</span> [<span class="dt">Json</span>]</a>
<a class="sourceLine" id="cb21-12" title="12"></a>
<a class="sourceLine" id="cb21-13" title="13"><span class="ot">xj ::</span> <span class="dt">Xml</span> <span class="ot">-&gt;</span> <span class="dt">Json</span></a>
<a class="sourceLine" id="cb21-14" title="14"></a>
<a class="sourceLine" id="cb21-15" title="15"><span class="ot">jx ::</span> <span class="dt">Json</span> <span class="ot">-&gt;</span> <span class="dt">Xml</span></a></code></pre></div>
<p>Can we use XML Schema to validate a JSON/YAML document?</p>
<p>We can map a subset of XML to YAML using <a href="http://yaml.org/xml">YAXML, the (draft) XML Binding for YAML</a>.</p>
<ul>
<li><a href="https://www.quora.com/In-choosing-between-XML-and-YAML-what-are-advantages-and-more-natural-problem-domains-for-each-one">In choosing between XML and YAML, what are advantages and more natural problem domains for each one? - Quora</a></li>
</ul>
<h2 id="using-postgresql"><span class="section_number">16</span><span class="section_title">Using PostgreSQL</span></h2>
<ul>
<li><p>Questions</p>
<ul>
<li>How do we find slow queries?</li>
<li>Which queries lock some tables or the database?</li>
<li><p>Is there a GUI or visualization tool?</p>
<ul>
<li>There should already be a tool for visualizing such Postgresql statistics?</li>
</ul></li>
<li>Is autovacuum enabled on our RDS clusters? How do we know?</li>
<li>Do we need <a href="http://stackoverflow.com/questions/19135340/how-does-postgresql-perform-writes-so-much-faster-than-sqlite">reliability</a>? If we can sacrifice reliability, we can speed things up by turning fsync off.</li>
<li><p>How much performance does RDS encryption cost? <a href="http://blog.minjar.com/post/108724853340/rds-encryption-and-benchmarking-postgresql">Negligible, but with caveats.</a></p></li>
</ul></li>
<li><p>Answers looking for questions</p>
<ul>
<li>There is a <a href="https://www.postgresql.org/docs/9.4/static/monitoring-stats.html">statistics collector</a>.</li>
<li><a href="https://wiki.postgresql.org/wiki/Logging_Difficult_Queries">Logging Difficult Queries</a></li>
<li><a href="https://www.postgresql.org/docs/9.4/static/maintenance.html">Postgresql needs regular maintenance</a>. One critical maintenance task is to VACUUM the database; the query planner relies on VACUUM ANALYZE.</li>
<li><a href="https://gist.github.com/chanks/7585810">Turning PostgreSQL into a queue serving 10,000 jobs per second</a></li>
<li><a href="http://pgeoghegan.blogspot.co.id/2012/06/towards-14000-write-transactions-on-my.html">Towards 14,000 write transactions on a laptop</a></li>
<li><a href="https://blogs.harvard.edu/philg/2011/01/10/how-many-updates-per-second-can-a-standard-rdbms-process/">How many updates per second can a standard RDBMS process?</a></li>
</ul></li>
<li><p>PostgreSQL tuning</p>
<ul>
<li><a href="http://madusudanan.com/blog/understanding-postgres-caching-in-depth/#CachePurpose">http://madusudanan.com/blog/understanding-postgres-caching-in-depth/#CachePurpose</a></li>
<li><a href="https://wiki.postgresql.org/wiki/Logging_Difficult_Queries">https://wiki.postgresql.org/wiki/Logging_Difficult_Queries</a></li>
</ul></li>
<li><p>2018-02-21</p>
<ul>
<li><a href="https://www.postgresql.org/docs/devel/static/pgbench.html">pg<sub>bench</sub></a></li>
<li><p>IN is faster than VALUES in psql 9.3</p>
<ul>
<li>select values &amp; join instead of in list <a href="https://wiki.postgresql.org/wiki/Sample_Databases">https://wiki.postgresql.org/wiki/Sample_Databases</a></li>
</ul></li>
</ul></li>
</ul>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">16.1</span><span class="section_title"><a href="#traps-pitfalls-gotchas">Traps, pitfalls, gotchas</a></span><span class="word_count">(24w~1m)</span></li>
</ul>
</div>
<h3 id="traps-pitfalls-gotchas"><span class="section_number">16.1</span><span class="section_title">Traps, pitfalls, gotchas</span></h3>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">16.1.1</span><span class="section_title"><a href="#postgresql-alter-table-drop-column-doesnt-actually-remove-the-column-from-disk">PostgreSQL ALTER TABLE DROP COLUMN doesn't actually remove the column from disk</a></span><span class="word_count">(22w~1m)</span></li>
</ul>
</div>
<h4 id="postgresql-alter-table-drop-column-doesnt-actually-remove-the-column-from-disk"><span class="section_number">16.1.1</span><span class="section_title">PostgreSQL ALTER TABLE DROP COLUMN doesn't actually remove the column from disk</span></h4>
<p>From <a href="https://nerderati.com/2017/01/03/postgresql-tables-can-have-at-most-1600-columns/">PostgreSQL Tables Can Only Have 1600 Columns, Ever. | Nerderati</a>.</p>
<h2 id="prepare-os-upgrade"><span class="section_number">17</span><span class="section_title">&lt;2018-12-11&gt; Prepare OS upgrade?</span></h2>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">17.1</span><span class="section_title"><a href="#what-6">What</a></span><span class="word_count">(401w~3m)</span></li>
<li><span class="section_number">17.2</span><span class="section_title"><a href="#unanswered-questions">Unanswered questions</a></span><span class="word_count">(37w~1m)</span></li>
</ul>
</div>
<h3 id="what-6"><span class="section_number">17.1</span><span class="section_title">What</span></h3>
<p>Move from Ubuntu 14.04 to Debian unstable <a href="https://www.reddit.com/r/linux/comments/40peeb/security_debian_vs_ubuntu/">https://www.reddit.com/r/linux/comments/40peeb/security_debian_vs_ubuntu/</a></p>
<p>Don't buy any laptop outside this list. <a href="https://www.linux-on-laptops.com/">https://www.linux-on-laptops.com/</a></p>
<p>Make moving easy.</p>
<p>Burn a Debian Live CD.</p>
<p>Debian is huge. The Debian community is huge. It's overwhelming. It's unclear where to start. The Debian project needs to delete things. The [Debian front page](<a href="https://www.debian.org/">https://www.debian.org/</a>) has too much information.</p>
<p>&quot;several Debian developers advise people to not use testing. Why is that?&quot; <a href="https://raphaelhertzog.com/2010/10/04/can-debian-offer-a-constantly-usable-testing-distribution/">https://raphaelhertzog.com/2010/10/04/can-debian-offer-a-constantly-usable-testing-distribution/</a></p>
<ul>
<li><a href="https://www.debian.org/doc/manuals/debian-reference/apa.en.html#_the_debian_maze">https://www.debian.org/doc/manuals/debian-reference/apa.en.html#_the_debian_maze</a>
<ul>
<li>&quot;The Debian Reference was initiated by me, Osamu Aoki [â€¦], as a personal system administration memo.&quot;</li>
<li>&quot;I hope this [â€¦] provides a good starting direction for people in the Debian maze.&quot;</li>
</ul></li>
<li>Debian Documentation Project <a href="https://www.debian.org/doc/ddp">https://www.debian.org/doc/ddp</a>
<ul>
<li>&quot;The Debian Documentation Project was formed to coordinate and unify all efforts to write more and better documentation for the Debian system.&quot;</li>
</ul></li>
<li>Debian testing gets no security updates. debsecan + Debian unstable + APT pinning?</li>
<li>Debian testing freezes some time before stable release and after stable release.</li>
<li>Debian unstable + get in touch with Debian community + APT pinning.</li>
<li>Do not apt-get upgrade if you have no time to fix problems.</li>
</ul>
<p>Prerequisites?</p>
<ul>
<li>Understand advanced APT usage.</li>
<li>Read the Debian manual.</li>
<li>Always read the Release Notes before installing Debian stable. (Where?)</li>
</ul>
<p>As we get older, we set up rules to simplify our lives. Example of rules:</p>
<ul>
<li>Never sudo make. Only use sudo with the part that comes from Debian.</li>
<li>Always put house keys and car keys in the front pocket of the bag when not using those keys.</li>
<li>Never pick up a call from an unknown number.</li>
</ul>
<p>Enable Magic SysRq key:</p>
<ul>
<li>Read /etc/sysctl.d/README.</li>
<li>Symlink /etc/sysctl.d/10-magic-sysrq.conf.</li>
</ul>
<p>How to install Debian unstable:</p>
<ul>
<li>Minimal-install Debian latest stable, upgrade to testing, install GUI, pin APT, upgrade to unstable.</li>
</ul>
<p>Always check apt-get install plan. Don't just answer &quot;yes&quot;. If the plan doesn't look sane, wait for a few days.</p>
<p>Dump and backup LVM metadata to GitHub? Is this not sensitive data?</p>
<p>Why must APT binary packages be installed to a fixed location? Because ELF hardcodes &quot;rpath&quot;. NixOS patches ELF rpath.</p>
<p>Buy an SSD?</p>
<p>Use &quot;brasero&quot; to burn ISO to DVD. <a href="https://wiki.debian.org/BurnCd#Burn_the_image_file_to_CD.2C_DVD.2C_or_BD">https://wiki.debian.org/BurnCd#Burn_the_image_file_to_CD.2C_DVD.2C_or_BD</a></p>
<p>How a Debian user is supposed to install a recent version of some packages: A Debian user is not supposed to install any recent version of packages.</p>
<p>How an advanced Debian user is supposed to install a recent version of some packages:</p>
<ul>
<li>Install Debian stable.</li>
<li>Add testing repository.</li>
<li>Set up APT pinning:
<ul>
<li>Most things come from stable.</li>
<li>System packages come from stable.</li>
<li>GHC comes from testing.</li>
</ul></li>
<li>Always check APT install plan. Avoid reinstalling system packages such as libc, python, perl, gnome, xorg, and so on. If installing something from testing requires removing something from stable, then say no to the apt prompt.</li>
<li>Does anything break?</li>
</ul>
<h3 id="unanswered-questions"><span class="section_number">17.2</span><span class="section_title">Unanswered questions</span></h3>
<p>Which distro has the best governance (the best social system, and the most trustworthy and competent people)?</p>
<p>Which distro has the most packages?</p>
<p>Which distro has the most volunteers?</p>
<p>Fedora ships with SELinux enabled?</p>
<p>My university used Debian and Ubuntu.</p>
<h2 id="woes-upgrading-to-debian-9"><span class="section_number">18</span><span class="section_title">Woes upgrading to Debian 9</span></h2>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">18.1</span><span class="section_title"><a href="#gcc-6-pie-breaks-ghc">GCC 6 PIE breaks GHC</a></span><span class="word_count">(46w~1m)</span></li>
<li><span class="section_number">18.2</span><span class="section_title"><a href="#no-gnome-night-light">No GNOME Night Light</a></span><span class="word_count">(13w~1m)</span></li>
<li><span class="section_number">18.3</span><span class="section_title"><a href="#massive-debian-9-chromium-privacy-violation">Massive Debian 9 Chromium privacy violation</a></span><span class="word_count">(37w~1m)</span></li>
<li><span class="section_number">18.4</span><span class="section_title"><a href="#gnome-3-woes">GNOME 3 woes</a></span><span class="word_count">(36w~1m)</span></li>
<li><span class="section_number">18.5</span><span class="section_title"><a href="#git-gui-breaks">git gui breaks</a></span><span class="word_count">(15w~1m)</span></li>
<li><span class="section_number">18.6</span><span class="section_title"><a href="#change-network-dns-networkmanager-broken">Change network DNS; NetworkManager broken</a></span><span class="word_count">(28w~1m)</span></li>
<li><span class="section_number">18.7</span><span class="section_title"><a href="#automatic-install-of-updates-including-security-updates-should-be-disabled">Automatic install of updates, including security updates, should be disabled</a></span><span class="word_count">(19w~1m)</span></li>
</ul>
</div>
<h3 id="gcc-6-pie-breaks-ghc"><span class="section_number">18.1</span><span class="section_title">GCC 6 PIE breaks GHC</span></h3>
<p>GCC 6 PIE defaulting breaks GHC. Should Debian package ghc as several packages such as ghc-7.6, ghc-8.4, not as one package ghc with several versions? One Debian package per GHC minor version? Alternatives system? Like openjdk-6 and openjdk-7? Like python2 and python3?</p>
<h3 id="no-gnome-night-light"><span class="section_number">18.2</span><span class="section_title">No GNOME Night Light</span></h3>
<p>GNOME Night Light is not in Debian 9 (gnome-shell 3.22).<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<h3 id="massive-debian-9-chromium-privacy-violation"><span class="section_number">18.3</span><span class="section_title">Massive Debian 9 Chromium privacy violation</span></h3>
<p>On 2018-12-20, I fresh-install Debian 9.6. Chromium enables &quot;Allow Chromium sign-in&quot; without asking user consent.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a><a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>That's the last straw. I'm switching to firefox. I'm using chromium for privacy violators and shady companies:</p>
<ul>
<li>google, youtube</li>
<li>facebook</li>
</ul>
<h3 id="gnome-3-woes"><span class="section_number">18.4</span><span class="section_title">GNOME 3 woes</span></h3>
<div class="local_table_of_contents">
<ul>
<li><span class="section_number">18.4.1</span><span class="section_title"><a href="#totem-video-player">Totem video player</a></span><span class="word_count">(18w~1m)</span></li>
<li><span class="section_number">18.4.2</span><span class="section_title"><a href="#fix-gnome-3-counterproductive-defaults">Fix GNOME 3 counterproductive defaults</a></span><span class="word_count">(11w~1m)</span></li>
<li><span class="section_number">18.4.3</span><span class="section_title"><a href="#nautilus-replaces-type-ahead-search-with-recursive-search">Nautilus replaces type-ahead search with recursive search</a></span><span class="word_count">(7w~1m)</span></li>
</ul>
</div>
<h4 id="totem-video-player"><span class="section_number">18.4.1</span><span class="section_title">Totem video player</span></h4>
<p>Toem used to display playlist but it was removed because it was deemed &quot;too complex&quot; <a href="https://bugs.launchpad.net/ubuntu/+source/totem/+bug/1600606">https://bugs.launchpad.net/ubuntu/+source/totem/+bug/1600606</a></p>
<h4 id="fix-gnome-3-counterproductive-defaults"><span class="section_number">18.4.2</span><span class="section_title">Fix GNOME 3 counterproductive defaults</span></h4>
<p>gsettings set org.gnome.shell.app-switcher current-workspace-only true <a href="https://coderwall.com/p/m5mhoq/gnome-3-how-to-alt-tab-windows-on-current-workspace-only">https://coderwall.com/p/m5mhoq/gnome-3-how-to-alt-tab-windows-on-current-workspace-only</a> <a href="https://askubuntu.com/questions/653436/totem-sidebar-gone-after-upgrade-playlist">https://askubuntu.com/questions/653436/totem-sidebar-gone-after-upgrade-playlist</a></p>
<h4 id="nautilus-replaces-type-ahead-search-with-recursive-search"><span class="section_number">18.4.3</span><span class="section_title">Nautilus replaces type-ahead search with recursive search</span></h4>
<h3 id="git-gui-breaks"><span class="section_number">18.5</span><span class="section_title">git gui breaks</span></h3>
<p>Ctrl+T no longer works with multiple files.</p>
<p>&lt;2019-02-10&gt; gitk gobbles insane amount of RAM.</p>
<h3 id="change-network-dns-networkmanager-broken"><span class="section_number">18.6</span><span class="section_title">Change network DNS; NetworkManager broken</span></h3>
<p>Nuke /etc/NetworkManager/system-connections and recreate that directory. <a href="https://askubuntu.com/questions/979939/network-manager-keeps-creating-new-profiles-for-the-same-network">https://askubuntu.com/questions/979939/network-manager-keeps-creating-new-profiles-for-the-same-network</a></p>
<p>Then connect to network.</p>
<p>Then stop.</p>
<p>sudo service NetworkManager stop</p>
<p>sudo nm-connection-edit</p>
<p>Use the GUI to manualize the DNS.</p>
<p>sudo service NetworkManager start</p>
<p><a href="https://wiki.debian.org/NetworkManager">https://wiki.debian.org/NetworkManager</a></p>
<h3 id="automatic-install-of-updates-including-security-updates-should-be-disabled"><span class="section_number">18.7</span><span class="section_title">Automatic install of updates, including security updates, should be disabled</span></h3>
<p>I want to see it first before it is installed.</p>
<h2 id="invert-screen-color"><span class="section_number">19</span><span class="section_title">Invert screen color</span></h2>
<p><a href="https://askubuntu.com/questions/181419/how-to-reverse-colors-for-the-current-window-in-gnome-shell">https://askubuntu.com/questions/181419/how-to-reverse-colors-for-the-current-window-in-gnome-shell</a> xcalib -invert -alter Keyboards Bind it to Super+I Bind gnome-terminal to Super+T</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://www.omgubuntu.co.uk/2017/02/gnome-night-light-blue-light-filter-linux">https://www.omgubuntu.co.uk/2017/02/gnome-night-light-blue-light-filter-linux</a><a href="#fnref1" class="footnote-back">â†©</a></p></li>
<li id="fn2"><p><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=916320">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=916320</a><a href="#fnref2" class="footnote-back">â†©</a></p></li>
<li id="fn3"><p><a href="https://blog.cryptographyengineering.com/2018/09/23/why-im-leaving-chrome/">https://blog.cryptographyengineering.com/2018/09/23/why-im-leaving-chrome/</a><a href="#fnref3" class="footnote-back">â†©</a></p></li>
</ol>
</section>
                </div>
            </div>
        </main>
                        <div id="disqus_thread"></div>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
var disqus_config = function () {
    this.page.url = "https://edom.github.io/usecom.html";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "https://edom.github.io/usecom.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://edom-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                        <footer class="site-footer h-card">
            <data class="u-url" href="/"></data>
            <div class="wrapper">
                <p>This page was created on 2016-05-02 03:31:20 +0700.</p>
                <p class="rss-subscribe">There is an
                    <a href="/feed.xml">RSS feed</a>, but it's unused because this site is a wiki, not a blog.</p>
                <p>Stop writing books, papers, and blogs!
                    Write a personal wiki instead!
                    Or, even better, contribute to a community wiki.
                </p>
            </div>
        </footer>
    </body>
</html>
