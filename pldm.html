<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Programming language design mistakes</title>
  <meta name="description" content="Personal website">

  <link href="https://fonts.googleapis.com/css?family=Libre+Baskerville:400,400i,700&amp;subset=latin-ext" rel="stylesheet">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://edom.github.io/pldm.html">
  <link rel="alternate" type="application/rss+xml" title="Erik Dominikus&#39;s wiki" href="/feed.xml">

  

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12628443-6', 'auto');
  ga('send', 'pageview');

</script>
  

  

  
</head>


  <body>

    <header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">Erik Dominikus&#39;s wiki</a>
  </div>
</header>


    

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Programming language design mistakes</h1>
  </header>

  <div class="post-content">
    <ul id="markdown-toc">
  <li><a href="#disclaimer" id="markdown-toc-disclaimer">Disclaimer</a></li>
  <li><a href="#justifying-the-creation-of-yet-another-programming-language" id="markdown-toc-justifying-the-creation-of-yet-another-programming-language">Justifying the creation of yet another programming language</a></li>
  <li><a href="#common-design-mistakes" id="markdown-toc-common-design-mistakes">Common design mistakes</a>    <ul>
      <li><a href="#ignoring-programming-language-theory-and-research" id="markdown-toc-ignoring-programming-language-theory-and-research">Ignoring programming language theory and research</a></li>
      <li><a href="#dynamic-typing" id="markdown-toc-dynamic-typing">Dynamic typing</a></li>
      <li><a href="#lack-of-metaprogramming-support" id="markdown-toc-lack-of-metaprogramming-support">Lack of metaprogramming support</a></li>
      <li><a href="#lack-of-symbol-overloading-ad-hoc-polymorphism" id="markdown-toc-lack-of-symbol-overloading-ad-hoc-polymorphism">Lack of symbol overloading (ad-hoc polymorphism)</a></li>
      <li><a href="#mutable-by-default" id="markdown-toc-mutable-by-default">Mutable by default</a></li>
      <li><a href="#non-first-class-constructs" id="markdown-toc-non-first-class-constructs">Non-first-class constructs</a></li>
      <li><a href="#virtual-machines" id="markdown-toc-virtual-machines">Virtual machines</a></li>
      <li><a href="#more-than-one-way-to-do-something" id="markdown-toc-more-than-one-way-to-do-something">More than one way to do something</a></li>
    </ul>
  </li>
  <li><a href="#java" id="markdown-toc-java">Java</a>    <ul>
      <li><a href="#overcomplicated-java-virtual-machine" id="markdown-toc-overcomplicated-java-virtual-machine">Overcomplicated Java Virtual Machine</a></li>
      <li><a href="#working-against-programmers" id="markdown-toc-working-against-programmers">Working against programmers</a></li>
      <li><a href="#throwing-away-the-good-parts-of-c" id="markdown-toc-throwing-away-the-good-parts-of-c">Throwing away the good parts of C++</a></li>
      <li><a href="#weak-functional-programming-allowing-partial-functions" id="markdown-toc-weak-functional-programming-allowing-partial-functions">Weak functional programming (allowing partial functions)</a></li>
    </ul>
  </li>
  <li><a href="#c-and-c" id="markdown-toc-c-and-c">C and C++</a></li>
  <li><a href="#haskell" id="markdown-toc-haskell">Haskell</a>    <ul>
      <li><a href="#not-leveraging-user-defined-isomorphisms" id="markdown-toc-not-leveraging-user-defined-isomorphisms">Not leveraging user-defined isomorphisms</a></li>
    </ul>
  </li>
  <li><a href="#what" id="markdown-toc-what">what</a></li>
</ul>

<h2 id="disclaimer">Disclaimer</h2>

<p>This will change without notice.</p>

<p>This may contain mistakes.</p>

<p>Opinions may change.</p>

<h2 id="justifying-the-creation-of-yet-another-programming-language">Justifying the creation of yet another programming language</h2>

<p>A new programming language should fix unforeseen design mistakes in existing programming languages.
It should not repeat their design mistakes.
Therefore we should collect the design mistakes so that we can avoid repeating them.</p>

<p>What is a mistake?
How do we know it’s a mistake?</p>

<p>We realize something is a mistake when we find a better way.</p>

<h2 id="common-design-mistakes">Common design mistakes</h2>

<h3 id="ignoring-programming-language-theory-and-research">Ignoring programming language theory and research</h3>

<p>Some mistakes are because the language designer is ignorant or too lazy.</p>

<h3 id="dynamic-typing">Dynamic typing</h3>

<p>Dynamic typing is a design mistake.
Type inference goes back to 1958.
ML has type inference since 1973.
It’s 2018.
There is no excuse for ignoring 60 years of research.
See <a href="https://en.wikipedia.org/wiki/Type_inference#Hindley%E2%80%93Milner_type_inference_algorithm">WP1</a>,
<a href="https://en.wikipedia.org/wiki/Hindley%E2%80%93Milner_type_system#History_of_type_inference">WP2</a>.</p>

<h3 id="lack-of-metaprogramming-support">Lack of metaprogramming support</h3>

<p>Lack of metaprogramming support is a design mistake.</p>

<h3 id="lack-of-symbol-overloading-ad-hoc-polymorphism">Lack of symbol overloading (ad-hoc polymorphism)</h3>

<p>Scheme and Haskell lack convenient symbol overloading.
Haskell requires you to make a type class for ad-hoc polymorphism.</p>

<p>Without overloading, clashing names need to be prefixed manually.</p>

<h3 id="mutable-by-default">Mutable by default</h3>

<p>Having variables mutable by default is a design mistake.</p>

<h3 id="non-first-class-constructs">Non-first-class constructs</h3>

<p>Object-oriented programming is a design mistake.</p>

<ul>
  <li><code class="highlighter-rouge">a.b()</code> should not mean “call method b of object a”</li>
  <li><code class="highlighter-rouge">a.b()</code> should mean “get the function a.b, then call it”.</li>
  <li><code class="highlighter-rouge">a.b()</code> should mean <code class="highlighter-rouge">(a.b)()</code>.
    <ul>
      <li><code class="highlighter-rouge">m = a.b; m();</code> should mean the same as <code class="highlighter-rouge">a.b()</code>.</li>
      <li>Functions should be first-class.
  Methods should not exist.
  Fields are enough (with function types).
  It should be possible to assign to methods.</li>
    </ul>
  </li>
</ul>

<p>Statements are a design mistake.
They should not exist.
Only expressions should.
<a href="https://www.eclipse.org/xtend/documentation/203_xtend_expressions.html">Xtend</a>
and
<a href="https://code.haxe.org/category/principles/everything-is-an-expression.html">Haxe</a>
do this right.</p>
<ul>
  <li>Can we replace statements with expressions in existing imperative languages without breaking backward compatibility?</li>
  <li>But C has <a href="https://en.wikipedia.org/wiki/Comma_operator">WP:Comma operator</a>?</li>
  <li>We can use lambda calculus for imperative programming.
    <ul>
      <li>Treat the statement separator (here we use semicolon <code class="highlighter-rouge">;</code>)
  as an operator (function with infix syntax)
  that sequences the effects of two expressions.
        <ul>
          <li>For example:
            <ul>
              <li>Let <code class="highlighter-rouge">a</code> be an expression.</li>
              <li>Let <code class="highlighter-rouge">b</code> be an expression.</li>
              <li>Thus <code class="highlighter-rouge">a;b</code> is an expression.</li>
              <li>The value of <code class="highlighter-rouge">a;b</code> is the value of <code class="highlighter-rouge">b</code>.</li>
              <li>The effect of <code class="highlighter-rouge">a;b</code> is the effect of <code class="highlighter-rouge">a</code> followed by the effect of <code class="highlighter-rouge">b</code>.</li>
            </ul>
          </li>
          <li>Semicolon is associative: <code class="highlighter-rouge">(a;b);c = a;(b;c)</code>. This also holds for the effects.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="virtual-machines">Virtual machines</h3>

<p>Virtual machines are a design mistake.
Instead, do semantic mapping: map a program in language A to an equivalent program in language B while preserving the meaning.</p>

<h3 id="more-than-one-way-to-do-something">More than one way to do something</h3>

<p><a href="https://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it">“There is more than one way to do it”</a> is a design mistake.</p>

<h2 id="java">Java</h2>

<ul>
  <li>Checked exceptions don’t play nice with java.util.Stream.
Either checked exception or java.util.Stream is a design mistake.
    <ul>
      <li>https://en.wikipedia.org/wiki/Effect_system</li>
    </ul>
  </li>
  <li>What others think Java gets wrong
    <ul>
      <li>http://tech.jonathangardner.net/wiki/Why_Java_Sucks</li>
    </ul>
  </li>
</ul>

<h3 id="overcomplicated-java-virtual-machine">Overcomplicated Java Virtual Machine</h3>

<p>JVM does too much.
JVM bytecode verification is the compiler’s job, not the VM’s.
Does JVM bytecode verification even add any security?
Isn’t JNI a bigger security hole?</p>

<h3 id="working-against-programmers">Working against programmers</h3>

<p>Java presumes that the programmer is not only untrustworthy but also an idiot.</p>

<p>Programmers make mistakes, but they aren’t idiots.</p>

<ul>
  <li><a href="https://www.reddit.com/r/programming/comments/utqb/ask_reddit_why_do_so_many_reddit_users_hate_java/cutv1/">Ask Reddit: Why do so many reddit users hate java? : programming</a>
    <ul>
      <li>“Java’s solution to the problem of C++ allowing you to blow your foot off was to chop off your legs.”</li>
    </ul>
  </li>
</ul>

<h3 id="throwing-away-the-good-parts-of-c">Throwing away the good parts of C++</h3>

<ul>
  <li>Forbidding multiple inheritance is a design mistake.</li>
  <li>Java interfaces are a design mistake.
See 2015 Robert C. Martin article <a href="http://blog.cleancoder.com/uncle-bob/2015/01/08/InterfaceConsideredHarmful.html">Java interface considered harmful</a>.</li>
  <li>Implementing generics too late with type erasure.
<a href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-version-history">C# 2.0 introduced</a>
generics, without type erasure, while maintaining backward compatibility,
by duplicating everything in System.Collections to System.Collections.Generic.
This is ugly, but less ugly than type erasure.
    <ul>
      <li><a href="https://stackoverflow.com/questions/11436802/how-are-c-sharp-generics-implemented">SO:How are C# generics implemented?</a>
        <ul>
          <li><a href="https://blogs.msdn.microsoft.com/ericlippert/2009/07/30/whats-the-difference-part-one-generics-are-not-templates/">Generics are not templates</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="weak-functional-programming-allowing-partial-functions">Weak functional programming (allowing partial functions)</h3>

<p>Allowing partial functions is a design mistake.</p>

<h2 id="c-and-c">C and C++</h2>

<p>In the 1970s these were tolerable: memory was limited, tools didn’t exist.
In 2018 these aren’t tolerable.</p>

<ul>
  <li>Unattainable standard.
    <ul>
      <li><a href="https://stackoverflow.com/questions/5574469/are-there-any-fully-conforming-c-implementations">SO:Are there any fully conforming C++ implementations?</a></li>
    </ul>
  </li>
  <li>Pile of workarounds.</li>
  <li>C++ compilation is abysmally slow. <code class="highlighter-rouge">#include &lt;iostream&gt;</code> expands to 10000 lines.</li>
  <li>C pointer declaration syntax for pointers and arrays is a design mistake.</li>
  <li>Conflating pointers and arrays.</li>
  <li>Leaving a lot of things undefined.</li>
  <li>Zero-terminated string is a design mistake.</li>
  <li>Parsing requires symbol resolution and type checking.</li>
  <li>Header files. They should be automatically generated from C files instead.</li>
  <li>Preprocessor works on text, not on C/C++ AST.</li>
</ul>

<h2 id="haskell">Haskell</h2>

<ul>
  <li>Template Haskell
    <ul>
      <li>Instead, we should have a metaprogramming library, and generate hs files.</li>
    </ul>
  </li>
  <li>Haskell compilation is slow.</li>
  <li>Haskell module system is a design mistake.</li>
  <li>GHC: If A depends on B, and B changes without changing API, then A still requires recompilation.</li>
  <li>Bottom inhabits every type including the supposedly empty type <code class="highlighter-rouge">data Void</code>.</li>
</ul>

<h3 id="not-leveraging-user-defined-isomorphisms">Not leveraging user-defined isomorphisms</h3>

<p>I want this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data A = A0 | A1
data B = B0 | B1

isomorphism "iso" between A and B is
    A0 ~ B0
    A1 ~ B1
</code></pre></div></div>

<p>instead of this:</p>

<div class="language-haskell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">data</span> <span class="kt">Iso</span> <span class="n">a</span> <span class="n">b</span> <span class="o">=</span> <span class="kt">MkIso</span> <span class="p">{</span>
        <span class="n">fwd</span> <span class="o">::</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">b</span>
        <span class="p">,</span> <span class="n">rev</span> <span class="o">::</span> <span class="n">b</span> <span class="o">-&gt;</span> <span class="n">a</span>
    <span class="p">}</span>

<span class="n">iso</span> <span class="o">::</span> <span class="kt">Iso</span> <span class="n">a</span> <span class="n">b</span>
<span class="n">iso</span> <span class="o">=</span> <span class="kt">MkIso</span> <span class="n">ab</span> <span class="n">ba</span> <span class="kr">where</span>

    <span class="n">ab</span> <span class="o">::</span> <span class="kt">A</span> <span class="o">-&gt;</span> <span class="kt">B</span>
    <span class="n">ab</span> <span class="kt">A0</span> <span class="o">=</span> <span class="kt">B0</span>
    <span class="n">ab</span> <span class="kt">A1</span> <span class="o">=</span> <span class="kt">B1</span>

    <span class="n">ba</span> <span class="o">::</span> <span class="kt">B</span> <span class="o">-&gt;</span> <span class="kt">A</span>
    <span class="n">ba</span> <span class="kt">B0</span> <span class="o">=</span> <span class="kt">A0</span>
    <span class="n">ba</span> <span class="kt">B1</span> <span class="o">=</span> <span class="kt">A1</span>
</code></pre></div></div>

<p>Explicit isomorphism may help reduce newtype boilerplate.</p>

<h2 id="what">what</h2>

<p>A problem with current programming methodologies is that they don’t capture the higher-level properties of software, such as the architecture.
For example, how do we write, in a way that the computer can exploit, this statement:
“The fields of class C correspond one-to-one with the columns of database table T.”?</p>

<ul>
  <li>Other people’s experiences
    <ul>
      <li>https://www.quora.com/If-you-were-to-design-a-programming-language-what-other-programming-language-would-it-evolve-from-and-what-aspect-of-that-language-would-you-do-differently</li>
      <li><a href="http://beza1e1.tuxen.de/articles/proglang_mistakes.html">5 Mistakes in Programming Language Design ― Andreas Zwinkau</a>
        <ul>
          <li><a href="https://news.ycombinator.com/item?id=1500665">Mistakes in programming language design | Hacker News</a></li>
        </ul>
      </li>
      <li><a href="https://softwareengineering.stackexchange.com/questions/55047/what-is-the-greatest-design-flaw-you-have-faced-in-any-programming-language">What is the greatest design flaw you have faced in any programming language? - Software Engineering Stack Exchange</a></li>
      <li><a href="http://www.inquisition.ca/en/info/gepsypl/rules.htm">Programming Language Design Rules</a></li>
      <li>1999 Steele article “Growing a language” <a href="http://www.catonmat.net/blog/growing-a-language-by-guy-steele/">html</a></li>
    </ul>
  </li>
</ul>

  </div>

</article>

      </div>
    </main>

    
    
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
var disqus_config = function () {
    this.page.url = "https://edom.github.io/pldm.html";  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = "https://edom.github.io/pldm.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://edom-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    

    <footer class="site-footer h-card">
    <data class="u-url" href="/"></data>

    <div class="wrapper">
        <p>This page was created on 2018-08-29 00:15 +0700.</p>
        <p class="rss-subscribe">There is an <a href="/feed.xml">RSS feed</a>,
        but it's unused because this site is a wiki, not a blog.</p>
        <p>Stop writing books, papers, and blogs! Write a personal wiki instead! Or, even better, contribute to a community wiki.</p>
    </div>

</footer>


  </body>

</html>
